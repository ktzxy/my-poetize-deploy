(window.webpackJsonp=window.webpackJsonp||[]).push([["app~748942c6"],{0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},1:function(e,t){},"17ec":function(e,t,n){},2:function(e,t){},4998:function(e,t){var n,a=document.title;document.addEventListener("visibilitychange",function(){document.hidden?(document.title="w(ï¾ŸÐ”ï¾Ÿ)w ä¸è¦èµ°ï¼å†çœ‹çœ‹å˜›ï¼",clearTimeout(n)):(document.title="â™ª(^âˆ‡^*)æ¬¢è¿Žè‚¥æ¥ï¼",n=setTimeout(function(){document.title=a},2e3))})},"56d7":function(e,t,n){"use strict";n.r(t),n("0fae");var a=n("9e2f"),i=n.n(a),r=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),o=(n("b64b"),n("d3b7"),n("3ca3"),n("ddb0"),n("99af"),n("d9e2"),n("b0c0"),n("e9c4"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"settings-menu"},[n("el-popover",{attrs:{placement:"top-end",width:"400",trigger:"click"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("div",{staticClass:"settings-panel"},[n("el-tabs",{attrs:{type:"border-card"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[n("el-tab-pane",{attrs:{label:"ðŸŽ¨ ä¸»é¢˜",name:"theme"}},[n("div",{staticClass:"theme-settings"},[n("div",{staticClass:"settings-section"},[n("h4",[e._v("é¢„è®¾ä¸»é¢˜")]),n("div",{staticClass:"theme-grid"},e._l(e.presetThemes,function(t){return n("div",{key:t.key,staticClass:"theme-card",class:{active:e.currentTheme===t.key},on:{click:function(n){return e.selectTheme(t.key)}}},[n("div",{staticClass:"theme-color",style:{background:t.color}}),n("span",{staticClass:"theme-label"},[e._v(e._s(t.name))]),e.currentTheme===t.key?n("i",{staticClass:"el-icon-check"}):e._e()])}),0)]),n("el-divider"),n("div",{staticClass:"settings-section"},[n("h4",[e._v("å¿«é€Ÿè®¾ç½®")]),n("div",{staticClass:"quick-settings"},[n("span",[e._v("æ·±è‰²æ¨¡å¼")]),n("el-switch",{on:{change:e.toggleDarkMode},model:{value:e.isDarkMode,callback:function(t){e.isDarkMode=t},expression:"isDarkMode"}})],1),n("div",{staticClass:"quick-settings"},[n("span",[e._v("æŠ¤çœ¼æ¨¡å¼")]),n("el-switch",{on:{change:e.toggleEyeMode},model:{value:e.isEyeMode,callback:function(t){e.isEyeMode=t},expression:"isEyeMode"}})],1),n("div",{staticClass:"quick-settings"},[n("span",[e._v("è‡ªåŠ¨åˆ‡æ¢")]),n("el-switch",{on:{change:e.toggleAutoSwitch},model:{value:e.autoSwitchTheme,callback:function(t){e.autoSwitchTheme=t},expression:"autoSwitchTheme"}})],1)]),n("el-divider"),n("div",{staticClass:"settings-section"},[n("h4",[e._v("èŠ‚æ—¥ä¸»é¢˜")]),n("div",{staticClass:"quick-settings"},[n("span",[e._v("å¯ç”¨èŠ‚æ—¥ä¸»é¢˜")]),n("el-switch",{on:{change:e.toggleHolidayTheme},model:{value:e.enableHolidayTheme,callback:function(t){e.enableHolidayTheme=t},expression:"enableHolidayTheme"}})],1),e.currentHoliday?n("p",{staticClass:"holiday-info"},[e._v(" ðŸŽ‰ å½“å‰èŠ‚æ—¥ï¼š"+e._s(e.currentHoliday.name)+" ")]):e._e()]),n("el-divider"),n("div",{staticClass:"settings-section"},[n("el-button-group",[n("el-button",{attrs:{size:"small",icon:"el-icon-download"},on:{click:e.exportTheme}},[e._v(" å¯¼å‡º ")]),n("el-button",{attrs:{size:"small",icon:"el-icon-upload2"},on:{click:e.showImportDialog}},[e._v(" å¯¼å…¥ ")]),n("el-button",{attrs:{size:"small",icon:"el-icon-refresh"},on:{click:e.resetTheme}},[e._v(" é‡ç½® ")])],1)],1)],1)]),n("el-tab-pane",{attrs:{label:"ðŸ‘ï¸ æ˜¾ç¤º",name:"display"}},[n("div",{staticClass:"display-settings"},[n("div",{staticClass:"settings-section"},[n("h4",[e._v("å­—ä½“å¤§å°")]),n("el-radio-group",{attrs:{size:"small"},on:{change:e.changeFontSize},model:{value:e.fontSizeLevel,callback:function(t){e.fontSizeLevel=t},expression:"fontSizeLevel"}},[n("el-radio-button",{attrs:{label:"small"}},[e._v("å°")]),n("el-radio-button",{attrs:{label:"medium"}},[e._v("ä¸­")]),n("el-radio-button",{attrs:{label:"large"}},[e._v("å¤§")]),n("el-radio-button",{attrs:{label:"xlarge"}},[e._v("ç‰¹å¤§")])],1)],1),n("el-divider"),n("div",{staticClass:"settings-section"},[n("h4",[e._v("è¡Œé—´è·")]),n("el-radio-group",{attrs:{size:"small"},on:{change:e.changeLineHeight},model:{value:e.lineHeightLevel,callback:function(t){e.lineHeightLevel=t},expression:"lineHeightLevel"}},[n("el-radio-button",{attrs:{label:"1.5"}},[e._v("ç´§å‡‘")]),n("el-radio-button",{attrs:{label:"1.8"}},[e._v("é€‚ä¸­")]),n("el-radio-button",{attrs:{label:"2.0"}},[e._v("èˆ’é€‚")]),n("el-radio-button",{attrs:{label:"2.5"}},[e._v("å®½æ¾")])],1)],1),n("el-divider"),n("div",{staticClass:"settings-section"},[n("h4",[e._v("é¡µé¢ç‰¹æ•ˆ")]),n("div",{staticClass:"quick-settings"},[n("span",[e._v("é¡µé¢åŠ¨ç”»")]),n("el-switch",{on:{change:e.toggleAnimations},model:{value:e.enableAnimations,callback:function(t){e.enableAnimations=t},expression:"enableAnimations"}})],1),n("div",{staticClass:"quick-settings"},[n("span",[e._v("ç²’å­èƒŒæ™¯")]),n("el-switch",{on:{change:e.toggleParticles},model:{value:e.enableParticles,callback:function(t){e.enableParticles=t},expression:"enableParticles"}})],1)])],1)]),n("el-tab-pane",{attrs:{label:"âš™ï¸ å…¶ä»–",name:"other"}},[n("div",{staticClass:"other-settings"},[n("div",{staticClass:"settings-section"},[n("h4",[e._v("èƒŒæ™¯ç‰¹æ•ˆ")]),n("div",{staticClass:"quick-settings"},[n("span",[e._v("æ˜¾ç¤ºèƒŒæ™¯")]),n("el-switch",{on:{change:e.toggleBackground},model:{value:e.enableBackground,callback:function(t){e.enableBackground=t},expression:"enableBackground"}})],1),e.enableBackground?n("div",{staticClass:"quick-settings"},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"é€‰æ‹©èƒŒæ™¯ç±»åž‹",size:"small"},on:{change:e.changeBackgroundType},model:{value:e.backgroundType,callback:function(t){e.backgroundType=t},expression:"backgroundType"}},[n("el-option",{attrs:{label:"æ— ",value:"none"}}),n("el-option",{attrs:{label:"âœ¨ ç²’å­",value:"particle"}}),n("el-option",{attrs:{label:"ðŸŒ¸ æ¨±èŠ±",value:"sakura"}}),n("el-option",{attrs:{label:"â˜„ï¸ æµæ˜Ÿ",value:"meteor"}})],1)],1):e._e(),e.enableBackground&&"none"!==e.backgroundType?n("div",{staticClass:"quick-settings"},[n("span",[e._v("é€æ˜Žåº¦")]),n("el-slider",{staticStyle:{width:"120px","margin-left":"10px"},attrs:{min:0,max:100,step:5},on:{change:e.changeBackgroundOpacity},model:{value:e.backgroundOpacity,callback:function(t){e.backgroundOpacity=t},expression:"backgroundOpacity"}}),n("span",{staticClass:"size-preview"},[e._v(e._s(e.backgroundOpacity)+"%")])],1):e._e()]),n("el-divider"),n("div",{staticClass:"settings-section"},[n("h4",[e._v("é¼ æ ‡ç‚¹å‡»ç‰¹æ•ˆ")]),n("div",{staticClass:"quick-settings"},[n("span",[e._v("å¯ç”¨ç‰¹æ•ˆ")]),n("el-switch",{on:{change:e.toggleMouseEffect},model:{value:e.enableMouseEffect,callback:function(t){e.enableMouseEffect=t},expression:"enableMouseEffect"}})],1)]),n("el-divider"),n("div",{staticClass:"settings-section"},[n("h4",[e._v("Live2Dçœ‹æ¿å¨˜")]),n("div",{staticClass:"quick-settings"},[n("span",[e._v("å¯ç”¨çœ‹æ¿å¨˜")]),n("el-switch",{on:{change:e.toggleLive2d},model:{value:e.enableLive2d,callback:function(t){e.enableLive2d=t},expression:"enableLive2d"}})],1)]),n("el-divider"),n("div",{staticClass:"settings-section"},[n("h4",[e._v("éŸ³ä¹æ’­æ”¾å™¨")]),n("div",{staticClass:"quick-settings"},[n("span",[e._v("å¯ç”¨éŸ³ä¹")]),n("el-switch",{on:{change:e.toggleMusic},model:{value:e.enableMusic,callback:function(t){e.enableMusic=t},expression:"enableMusic"}})],1)]),n("el-divider"),n("div",{staticClass:"settings-section"},[n("h4",[e._v("è§¦æ‘¸åé¦ˆï¼ˆç§»åŠ¨ç«¯ï¼‰")]),n("div",{staticClass:"quick-settings"},[n("span",[e._v("å¯ç”¨åé¦ˆ")]),n("el-switch",{on:{change:e.toggleTouchFeedback},model:{value:e.enableTouchFeedback,callback:function(t){e.enableTouchFeedback=t},expression:"enableTouchFeedback"}})],1)]),n("el-divider"),n("div",{staticClass:"settings-section"},[n("h4",[e._v("ç¼“å­˜ç®¡ç†")]),n("el-button",{staticStyle:{width:"100%"},attrs:{size:"small",icon:"el-icon-delete"},on:{click:e.clearCache}},[e._v(" æ¸…ç©ºæœ¬åœ°ç¼“å­˜ ")])],1)],1)])],1)],1),n("el-button",{staticClass:"settings-trigger",attrs:{slot:"reference",circle:"",icon:"el-icon-setting",title:"è®¾ç½®èœå•"},slot:"reference"})],1),n("el-dialog",{attrs:{title:"å¯¼å…¥ä¸»é¢˜",visible:e.importDialogVisible,width:"500px"},on:{"update:visible":function(t){e.importDialogVisible=t}}},[n("el-input",{attrs:{type:"textarea",rows:10,placeholder:"ç²˜è´´ä¸»é¢˜JSONé…ç½®..."},model:{value:e.importJson,callback:function(t){e.importJson=t},expression:"importJson"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.importDialogVisible=!1}}},[e._v("å–æ¶ˆ")]),n("el-button",{attrs:{type:"primary"},on:{click:e.importTheme}},[e._v("å¯¼å…¥")])],1)],1)],1)}),s=n("1da1"),c=(n("96cf"),n("25f0"),n("7db0"),n("159b"),n("2b3d"),n("9861"),n("498a"),n("ac1f"),n("00b4"),n("5530")),l=n("3835"),u=n("b85c"),d=n("d4ec"),f=n("bee2"),h=(n("4d90"),n("d81d"),n("1276"),n("a9e3"),n("fb6a"),n("4e82"),function(){function e(){Object(d.a)(this,e),this.holidays=this.initHolidays(),this.currentHoliday=null}return Object(f.a)(e,[{key:"initHolidays",value:function(){return[{id:"new_year",name:"å…ƒæ—¦",startDate:"01-01",endDate:"01-03",theme:{primary:"#ff6b6b",secondary:"#ffd93d",accent:"#6bcf7f",background:"#fff5f5",name:"æ–°å¹´ä¸»é¢˜"},effects:["fireworks","snow"]},{id:"spring_festival",name:"æ˜¥èŠ‚",dateRange:"lunar",lunarDate:"1-1",duration:7,theme:{primary:"#e63946",secondary:"#f77f00",accent:"#ffb703",background:"#fff8f0",name:"æ˜¥èŠ‚ä¸»é¢˜"},effects:["fireworks","lanterns","red_packets"]},{id:"valentines",name:"æƒ…äººèŠ‚",startDate:"02-14",endDate:"02-14",theme:{primary:"#ff006e",secondary:"#fb5607",accent:"#ff85a2",background:"#fff0f6",name:"æƒ…äººèŠ‚ä¸»é¢˜"},effects:["hearts","roses"]},{id:"womens_day",name:"å¦‡å¥³èŠ‚",startDate:"03-08",endDate:"03-08",theme:{primary:"#f72585",secondary:"#b5179e",accent:"#7209b7",background:"#fff5fb",name:"å¦‡å¥³èŠ‚ä¸»é¢˜"},effects:["flowers"]},{id:"qingming",name:"æ¸…æ˜ŽèŠ‚",dateRange:"solar",solarTerm:"qingming",theme:{primary:"#8ac926",secondary:"#52b788",accent:"#95d5b2",background:"#f8fff8",name:"æ¸…æ˜Žä¸»é¢˜"},effects:["willow","rain"]},{id:"labor_day",name:"åŠ³åŠ¨èŠ‚",startDate:"05-01",endDate:"05-03",theme:{primary:"#ff4d6d",secondary:"#ffb703",accent:"#06d6a0",background:"#fffbf0",name:"åŠ³åŠ¨èŠ‚ä¸»é¢˜"},effects:[]},{id:"childrens_day",name:"å„¿ç«¥èŠ‚",startDate:"06-01",endDate:"06-01",theme:{primary:"#4cc9f0",secondary:"#f72585",accent:"#ffd93d",background:"#f0fbff",name:"å„¿ç«¥èŠ‚ä¸»é¢˜"},effects:["balloons","candy"]},{id:"mid_autumn",name:"ä¸­ç§‹èŠ‚",dateRange:"lunar",lunarDate:"8-15",duration:1,theme:{primary:"#ffb703",secondary:"#fb8500",accent:"#ffd60a",background:"#fffef0",name:"ä¸­ç§‹ä¸»é¢˜"},effects:["moon","lanterns"]},{id:"national_day",name:"å›½åº†èŠ‚",startDate:"10-01",endDate:"10-07",theme:{primary:"#e63946",secondary:"#ffba08",accent:"#f77f00",background:"#fff5f0",name:"å›½åº†ä¸»é¢˜"},effects:["flag","fireworks"]},{id:"halloween",name:"ä¸‡åœ£èŠ‚",startDate:"10-31",endDate:"10-31",theme:{primary:"#ff6d00",secondary:"#8338ec",accent:"#3a0ca3",background:"#fff8f0",name:"ä¸‡åœ£èŠ‚ä¸»é¢˜"},effects:["pumpkin","ghost","bats"]},{id:"christmas",name:"åœ£è¯žèŠ‚",startDate:"12-24",endDate:"12-26",theme:{primary:"#c9184a",secondary:"#06a77d",accent:"#ffd60a",background:"#fff5f5",name:"åœ£è¯žä¸»é¢˜"},effects:["snow","santa","tree"]}]}},{key:"checkCurrentHoliday",value:function(){var e,t=new Date,n=this.formatDate(t),a=Object(u.a)(this.holidays);try{for(a.s();!(e=a.n()).done;){var i=e.value;if(this.isHolidayActive(i,t,n))return this.currentHoliday=i,i}}catch(e){a.e(e)}finally{a.f()}return this.currentHoliday=null,null}},{key:"isHolidayActive",value:function(e,t,n){if("lunar"===e.dateRange)return!1;if("solar"===e.dateRange)return!1;var a=e.startDate,i=e.endDate;return n>=a&&n<=i}},{key:"formatDate",value:function(e){var t=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n)}},{key:"getCurrentTheme",value:function(){var e=this.checkCurrentHoliday();return e?e.theme:null}},{key:"applyHolidayTheme",value:function(){var e=this.getCurrentTheme();if(!e)return!1;var t=document.documentElement;return Object.keys(e).forEach(function(n){"name"!==n&&t.style.setProperty("--".concat(n),e[n])}),this.currentHoliday&&this.currentHoliday.effects&&this.applyEffects(this.currentHoliday.effects),!0}},{key:"applyEffects",value:function(e){var t=this;e.forEach(function(e){switch(e){case"snow":t.createSnowEffect();break;case"fireworks":t.createFireworksEffect();break;case"hearts":t.createHeartsEffect();break;case"sakura":t.createSakuraEffect()}})}},{key:"createSnowEffect",value:function(){var e=document.createElement("div");e.className="snow-container",e.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      pointer-events: none;\n      z-index: 9999;\n    ";for(var t=0;t<50;t++){var n=document.createElement("div");n.innerHTML="â„",n.style.cssText="\n        position: absolute;\n        top: -20px;\n        left: ".concat(100*Math.random(),"%;\n        font-size: ").concat(10*Math.random()+10,"px;\n        opacity: ").concat(.5*Math.random()+.3,";\n        animation: fall ").concat(3*Math.random()+2,"s linear infinite;\n        animation-delay: ").concat(2*Math.random(),"s;\n      "),e.appendChild(n)}var a=document.createElement("style");a.textContent="\n      @keyframes fall {\n        to {\n          transform: translateY(100vh) rotate(360deg);\n        }\n      }\n    ",document.head.appendChild(a),document.body.appendChild(e)}},{key:"createFireworksEffect",value:function(){}},{key:"createHeartsEffect",value:function(){}},{key:"createSakuraEffect",value:function(){}},{key:"clearEffects",value:function(){document.querySelectorAll(".snow-container, .fireworks-container, .hearts-container").forEach(function(e){return e.remove()})}},{key:"getAllHolidays",value:function(){return this.holidays}},{key:"getUpcomingHolidays",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=new Date,n=[];return this.holidays.forEach(function(e){if("lunar"!==e.dateRange&&"solar"!==e.dateRange){var a=e.startDate.split("-").map(Number),i=Object(l.a)(a,2),r=i[0],o=i[1],s=new Date(t.getFullYear(),r-1,o);s>t&&n.push(Object(c.a)(Object(c.a)({},e),{},{daysUntil:Math.ceil((s-t)/864e5)}))}}),n.sort(function(e,t){return e.daysUntil-t.daysUntil}).slice(0,e)}}]),e}()),m=h,g={name:"EnhancedSettingsMenu",data:function(){return{visible:!1,activeTab:"theme",currentTheme:"default",isDarkMode:!1,isEyeMode:!1,autoSwitchTheme:!1,enableHolidayTheme:!0,currentHoliday:null,fontSizeLevel:"medium",lineHeightLevel:"1.8",enableAnimations:!0,enableParticles:!0,enableBackground:!0,backgroundType:"particle",backgroundOpacity:80,textScrollContent:"",enableMusic:!0,enableMouseEffect:!0,enableLive2d:!1,enableTouchFeedback:!0,sysConfig:{},importDialogVisible:!1,importJson:"",presetThemes:[{key:"default",name:"é»˜è®¤",color:"#667eea"},{key:"dark",name:"æš—é»‘",color:"#1a1a1a"},{key:"light",name:"æµ…è‰²",color:"#ffffff"},{key:"eye",name:"æŠ¤çœ¼",color:"#c7edcc"},{key:"ocean",name:"æµ·æ´‹",color:"#0077be"},{key:"sunset",name:"å¤•é˜³",color:"#ff6b6b"},{key:"forest",name:"æ£®æž—",color:"#52b788"},{key:"purple",name:"ç´«æ¢¦",color:"#9d4edd"}],holidayManager:null}},created:function(){this.holidayManager=new m,this.loadSettings(),this.updateHoliday(),this.loadSysConfig()},methods:{loadSettings:function(){var e=localStorage.getItem("poetize-settings");if(e){var t=JSON.parse(e);Object.assign(this,t)}},saveSettings:function(){var e={currentTheme:this.currentTheme,isDarkMode:this.isDarkMode,isEyeMode:this.isEyeMode,autoSwitchTheme:this.autoSwitchTheme,enableHolidayTheme:this.enableHolidayTheme,fontSizeLevel:this.fontSizeLevel,lineHeightLevel:this.lineHeightLevel,enableAnimations:this.enableAnimations,enableParticles:this.enableParticles,enableBackground:this.enableBackground,backgroundType:this.backgroundType,backgroundOpacity:this.backgroundOpacity,textScrollContent:this.textScrollContent,enableMusic:this.enableMusic,enableMouseEffect:this.enableMouseEffect,enableLive2d:this.enableLive2d,enableTouchFeedback:this.enableTouchFeedback};localStorage.setItem("poetize-settings",JSON.stringify(e)),localStorage.setItem("reading-font-size",this.fontSizeLevel),localStorage.setItem("reading-line-height",this.lineHeightLevel),localStorage.setItem("eye-protection",this.isEyeMode.toString()),localStorage.setItem("isDark",this.isDarkMode.toString())},selectTheme:function(e){this.currentTheme=e,this.applyTheme(e),"dark"===e?(this.isDarkMode=!0,this.$root.$emit("toggle-dark-mode",!0)):(this.isDarkMode=!1,this.$root.$emit("toggle-dark-mode",!1)),this.$message.success("å·²åˆ‡æ¢åˆ°".concat(this.presetThemes.find(function(t){return t.key===e}).name,"ä¸»é¢˜"))},applyTheme:function(e){var t={default:{primary:"#667eea",background:"#ffffff",text:"#333"},dark:{primary:"#667eea",background:"#1a1a1a",text:"#e0e0e0"},light:{primary:"#667eea",background:"#ffffff",text:"#000"},eye:{primary:"#52b788",background:"#c7edcc",text:"#333"},ocean:{primary:"#0077be",background:"#e3f2fd",text:"#01579b"},sunset:{primary:"#ff6b6b",background:"#fff5f5",text:"#c92a2a"},forest:{primary:"#52b788",background:"#f8fff8",text:"#1b5e20"},purple:{primary:"#9d4edd",background:"#f3e5f5",text:"#4a148c"}}[e];if(t){var n=document.documentElement;Object.keys(t).forEach(function(e){n.style.setProperty("--theme-".concat(e),t[e])})}this.saveSettings()},toggleDarkMode:function(e){this.isDarkMode=e;var t=e?"dark":"default";this.currentTheme=t,this.applyTheme(t),this.$root.$emit("toggle-dark-mode",e),this.saveSettings()},toggleEyeMode:function(e){this.isEyeMode=e,this.$root.$emit("toggle-eye-protection",e),this.saveSettings()},changeFontSize:function(e){this.fontSizeLevel=e,this.$root.$emit("change-font-size",e),this.saveSettings()},changeLineHeight:function(e){this.lineHeightLevel=e,this.$root.$emit("change-line-height",e),this.saveSettings()},toggleAnimations:function(e){this.enableAnimations=e,this.$message.info(e?"é¡µé¢åŠ¨ç”»å·²å¯ç”¨":"é¡µé¢åŠ¨ç”»å·²å…³é—­"),this.$root.$emit("toggle-animations",e),this.saveSettings()},toggleParticles:function(e){this.enableParticles=e,this.$message.info(e?"ç²’å­èƒŒæ™¯å·²å¯ç”¨":"ç²’å­èƒŒæ™¯å·²å…³é—­"),this.$root.$emit("toggle-particles",e),this.saveSettings()},toggleAutoSwitch:function(e){this.autoSwitchTheme=e,this.$message.info(e?"å·²å¯ç”¨ä¸»é¢˜è‡ªåŠ¨åˆ‡æ¢":"å·²å…³é—­ä¸»é¢˜è‡ªåŠ¨åˆ‡æ¢"),this.$root.$emit("toggle-auto-switch",e),this.saveSettings()},toggleHolidayTheme:function(e){if(this.enableHolidayTheme=e,e){var t=this.holidayManager.checkCurrentHoliday();t?(this.holidayManager.applyHolidayTheme(),this.$message.success("å·²å¯ç”¨".concat(t.name,"ä¸»é¢˜"))):this.$message.info("å½“å‰æ— ç‰¹æ®ŠèŠ‚æ—¥ä¸»é¢˜")}this.saveSettings()},updateHoliday:function(){this.currentHoliday=this.holidayManager.checkCurrentHoliday()},exportTheme:function(){var e=JSON.stringify({theme:this.currentTheme,settings:{fontSize:this.fontSize,lineHeight:this.lineHeight,isDarkMode:this.isDarkMode,isEyeMode:this.isEyeMode}},null,2),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download="poetize-theme-".concat(Date.now(),".json"),a.click(),URL.revokeObjectURL(n),this.$message.success("ä¸»é¢˜å·²å¯¼å‡º")},showImportDialog:function(){this.importDialogVisible=!0,this.importJson=""},importTheme:function(){if(this.importJson.trim())try{var e=JSON.parse(this.importJson);e.theme&&this.selectTheme(e.theme),e.settings&&(Object.assign(this,e.settings),this.applyTheme(this.currentTheme)),this.importDialogVisible=!1,this.$message.success("ä¸»é¢˜å¯¼å…¥æˆåŠŸ")}catch(e){this.$message.error("ä¸»é¢˜å¯¼å…¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥JSONæ ¼å¼")}else this.$message.warning("è¯·è¾“å…¥ä¸»é¢˜é…ç½®")},resetTheme:function(){var e=this;this.$confirm("ç¡®å®šè¦é‡ç½®ä¸ºé»˜è®¤ä¸»é¢˜å—ï¼Ÿ","æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then(function(){e.selectTheme("default"),e.fontSize=14,e.lineHeight=1.5,e.isDarkMode=!1,e.isEyeMode=!1,e.saveSettings(),e.$message.success("å·²é‡ç½®ä¸ºé»˜è®¤è®¾ç½®")}).catch(function(){})},clearCache:function(){var e=this;this.$confirm("ç¡®å®šè¦æ¸…ç©ºæœ¬åœ°ç¼“å­˜å—ï¼Ÿ","æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then(function(){localStorage.clear(),e.$message.success("æœ¬åœ°ç¼“å­˜å·²æ¸…ç©º")}).catch(function(){})},toggleBackground:function(e){this.enableBackground=e,this.$message.info(e?"èƒŒæ™¯ç‰¹æ•ˆå·²å¯ç”¨":"èƒŒæ™¯ç‰¹æ•ˆå·²å…³é—­"),this.saveSettings(),this.$root.$emit("toggle-background",e)},changeBackgroundType:function(e){this.backgroundType=e;this.$message.success("å·²åˆ‡æ¢åˆ°".concat({none:"æ— ",image:"å›¾ç‰‡",particle:"ç²’å­",sakura:"æ¨±èŠ±",meteor:"æµæ˜Ÿ",text:"æ–‡å­—æ»šåŠ¨"}[e]||"æœªçŸ¥","èƒŒæ™¯")),this.saveSettings(),this.$root.$emit("change-background-type",e)},changeBackgroundOpacity:function(e){this.backgroundOpacity=e,this.saveSettings(),this.$root.$emit("change-background-opacity",e/100)},changeTextScrollContent:function(){this.saveSettings(),"text"===this.backgroundType&&this.$root.$emit("change-background-type","text")},getBackgroundName:function(e){return{none:"æ— ",particle:"ç²’å­",sakura:"æ¨±èŠ±",fluid:"æµä½“",canvas:"ç”»å¸ƒ",svg:"SVG"}[e]||"æœªçŸ¥"},toggleMouseEffect:function(e){this.enableMouseEffect=e,this.$message.info(e?"é¼ æ ‡ç‰¹æ•ˆå·²å¯ç”¨":"é¼ æ ‡ç‰¹æ•ˆå·²å…³é—­"),this.$root.$emit("toggle-mouse-effect",e),this.saveSettings()},toggleLive2d:function(e){this.enableLive2d=e,this.$message.info(e?"Live2Dçœ‹æ¿å¨˜å·²å¯ç”¨":"Live2Dçœ‹æ¿å¨˜å·²å…³é—­"),this.$root.$emit("toggle-live2d",e),this.saveSettings()},toggleMusic:function(e){this.enableMusic=e,this.$message.info(e?"éŸ³ä¹æ’­æ”¾å™¨å·²å¯ç”¨":"éŸ³ä¹æ’­æ”¾å™¨å·²å…³é—­"),this.$root.$emit("toggle-music",e),this.saveSettings()},toggleTouchFeedback:function(e){this.enableTouchFeedback=e,this.$message.info(e?"è§¦æ‘¸åé¦ˆå·²å¯ç”¨":"è§¦æ‘¸åé¦ˆå·²å…³é—­"),this.$root.$emit("toggle-touch-feedback",e),this.saveSettings()},loadSysConfig:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.get(e.$constant.baseURL+"/sysConfig/listSysConfig");case 3:(n=t.sent)&&n.data&&(e.sysConfig=n.data,e.applyServerConfig()),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}))()},applyServerConfig:function(){"false"===this.sysConfig["theme.holiday.enable"]&&(this.enableHolidayTheme=!1),"false"===this.sysConfig["effect.mousedown.enable"]&&(this.enableMouseEffect=!1),"true"===this.sysConfig["component.live2d.enable"]&&(this.enableLive2d=!0)}},watch:{fontSize:function(e){document.documentElement.style.fontSize=e+"px",this.saveSettings()},lineHeight:function(e){document.documentElement.style.lineHeight=e,this.saveSettings()}}},p=g,v=(n("a32b"),n("2877")),b={components:{EnhancedSettingsMenu:Object(v.a)(p,o,[],!1,null,"0642bd84",null).exports},data:function(){return{aplayer:null,aplayerReady:!1,musicInitialized:!1,backgroundManager:null}},computed:{sysConfig:function(){return this.$store.state.sysConfig}},watch:{sysConfig:{handler:function(e){e&&Object.keys(e).length>0&&!this.musicInitialized&&(this.musicInitialized=!0)},deep:!0,immediate:!0}},created:function(){var e=this;Promise.all([n.e("chunk-commons~31ecd969"),n.e("chunk-2d0aa1bb")]).then(n.bind(null,"1039")).then(function(t){var n=t.default;e.backgroundManager=new n,setTimeout(function(){e.restoreBackgroundSettings()},300)}),this.setupUserInteraction(),this.getWebInfo(),this.$root.$on("toggle-music",this.handleMusicToggle),this.$root.$on("toggle-live2d",this.handleLive2dToggle),this.$root.$on("change-background-type",this.handleBackgroundTypeChange),this.$root.$on("toggle-background",this.handleBackgroundToggle),this.$root.$on("change-background-opacity",this.handleBackgroundOpacityChange),this.$nextTick(function(){var t=localStorage.getItem("poetize-settings");if(t)try{var n=JSON.parse(t);!1===n.enableMusic&&e.handleMusicToggle(!1),!1===n.enableLive2d&&e.handleLive2dToggle(!1)}catch(e){}})},mounted:function(){},beforeDestroy:function(){this.aplayer&&this.aplayer.destroy(),this.backgroundManager&&(this.backgroundManager.destroy(),this.backgroundManager=null),this.$root.$off("toggle-music",this.handleMusicToggle),this.$root.$off("toggle-live2d",this.handleLive2dToggle),this.$root.$off("change-background-type",this.handleBackgroundTypeChange),this.$root.$off("toggle-background",this.handleBackgroundToggle),this.$root.$off("change-background-opacity",this.handleBackgroundOpacityChange)},methods:{getWebInfo:function(){var e=this;this.$http.get(this.$constant.baseURL+"/webInfo/getWebInfo").then(function(t){e.$common.isEmpty(t.data)||(e.$store.commit("loadWebInfo",t.data),localStorage.setItem("defaultStoreType",t.data.defaultStoreType))}).catch(function(e){})},setupUserInteraction:function(){var e=this,t=function t(){e.musicInitialized&&!e.aplayer&&(e.initAplayer(),document.removeEventListener("click",t),document.removeEventListener("touchstart",t),document.removeEventListener("keydown",t))};document.addEventListener("click",t),document.addEventListener("touchstart",t),document.addEventListener("keydown",t)},initAplayer:function(){var e=this,t=this.sysConfig["aplayer.playlist.id"]||"2158283120",n=this.sysConfig["aplayer.server"]||"netease";this.loadAPlayerLibs().then(function(){if("undefined"!=typeof APlayer){e.aplayer=new APlayer({container:document.getElementById("global-aplayer"),fixed:!0,autoplay:!0,theme:"#667eea",loop:"all",order:"random",preload:"auto",volume:.7,mutex:!0,listFolded:!1,audio:[]});var a=["https://api.injahow.cn/meting/?server=".concat(n,"&type=playlist&id=").concat(t),"https://music.xf857.com/api.php?server=".concat(n,"&type=playlist&id=").concat(t)],i=0;!function t(){i>=a.length?e.loadFallbackMusic():fetch(a[i]).then(function(e){if(!e.ok)throw new Error("HTTP ".concat(e.status));return e.json()}).then(function(t){if(!(t&&Array.isArray(t)&&t.length>0))throw new Error("APIè¿”å›žæ•°æ®ä¸ºç©º");e.aplayer.list.clear(),e.aplayer.list.add(t),e.aplayerReady=!0,e.$nextTick(function(){e.initAPlayerDrag()}),e.aplayer.on("play",function(){}),e.aplayer.on("error",function(){setTimeout(function(){e.aplayer&&e.aplayer.list.audios.length>1&&e.aplayer.skipForward()},500)}),setTimeout(function(){if(e.aplayer&&e.aplayer.paused&&"function"==typeof e.aplayer.play){var t=e.aplayer.play();t&&"function"==typeof t.catch&&t.catch(function(e){})}},500)}).catch(function(e){i++,t()})}()}})},loadFallbackMusic:function(){var e=this;this.aplayer.list.clear(),this.aplayer.list.add([{name:"èµ·é£Žäº†",artist:"ä¹°è¾£æ¤’ä¹Ÿç”¨åˆ¸",url:"https://music.163.com/song/media/outer/url?id=1330348068.mp3",cover:"https://p1.music.126.net/diGAyEmpymX8G7JcnElncQ==/109951163699673355.jpg"},{name:"æ™´å¤©",artist:"å‘¨æ°ä¼¦",url:"https://music.163.com/song/media/outer/url?id=186016.mp3",cover:"https://p1.music.126.net/Md3RLH0fe2a_3AMPJHFe-A==/7934075906687672.jpg"},{name:"æµ·é˜”å¤©ç©º",artist:"Beyond",url:"https://music.163.com/song/media/outer/url?id=346576.mp3",cover:"https://p1.music.126.net/QHw-RuMcsyXPSy3Xcd_PBQ==/18805696695122492.jpg"}]),this.aplayerReady=!0,this.$nextTick(function(){e.initAPlayerDrag()}),setTimeout(function(){if(e.aplayer&&e.aplayer.paused&&"function"==typeof e.aplayer.play){var t=e.aplayer.play();t&&"function"==typeof t.catch&&t.catch(function(e){})}},500)},loadAPlayerLibs:function(){return new Promise(function(e,t){if("undefined"==typeof APlayer){var n=document.createElement("link");n.rel="stylesheet",n.href="https://cdn.bootcdn.net/ajax/libs/aplayer/1.10.1/APlayer.min.css",document.head.appendChild(n);var a=document.createElement("script");a.src="https://cdn.bootcdn.net/ajax/libs/aplayer/1.10.1/APlayer.min.js",a.onload=function(){var t=document.createElement("script");t.src="https://cdn.bootcdn.net/ajax/libs/meting/2.0.1/Meting.min.js",t.onload=function(){return e()},t.onerror=function(){return e()},document.body.appendChild(t)},a.onerror=t,document.body.appendChild(a)}else e()})},initAPlayerDrag:function(){var e=this;setTimeout(function(){var t=document.querySelector(".aplayer.aplayer-fixed");if(t){var n,a,i,r,o=!1,s=localStorage.getItem("aplayer-position");if(s)try{var c=JSON.parse(s);t.style.left=c.left+"px",t.style.bottom=c.bottom+"px",t.style.right="auto"}catch(n){e.setAPlayerDefaultPosition(t)}else e.setAPlayerDefaultPosition(t);t.addEventListener("mousedown",function(e){if(e.target.closest("button")||e.target.closest(".aplayer-icon")||e.target.closest(".aplayer-volume-bar")||e.target.closest(".aplayer-bar")||e.target.closest(".aplayer-list-item")||e.target.closest("input")||e.target.closest("a"));else{o=!0,t.classList.add("dragging"),n=e.clientX,a=e.clientY;var s=t.getBoundingClientRect();i=s.left,r=window.innerHeight-s.bottom,e.preventDefault(),e.stopPropagation()}},!0),document.addEventListener("mousemove",function(e){if(o){var s=e.clientX-n,c=e.clientY-a,l=i+s,u=r-c,d=t.offsetWidth,f=t.offsetHeight;l=Math.max(0,Math.min(l,window.innerWidth-d)),u=Math.max(0,Math.min(u,window.innerHeight-f)),t.style.left=l+"px",t.style.bottom=u+"px",t.style.right="auto",e.preventDefault()}}),document.addEventListener("mouseup",function(){if(o){o=!1,t.classList.remove("dragging");var e=t.getBoundingClientRect(),n={left:e.left,bottom:window.innerHeight-e.bottom};localStorage.setItem("aplayer-position",JSON.stringify(n))}})}else setTimeout(function(){return e.initAPlayerDrag()},1e3)},500)},setAPlayerDefaultPosition:function(e){e.style.left="auto",e.style.right="0px",e.style.bottom="0px"},handleMusicToggle:function(e){if(e){if(this.aplayer){var t=document.querySelector(".aplayer-wrapper");t&&(t.style.display="block"),this.aplayer.paused&&this.aplayer.play().catch(function(e){})}else this.initAplayer();this.$message.success("ðŸŽµ éŸ³ä¹æ’­æ”¾å™¨å·²å¯ç”¨")}else{this.aplayer&&this.aplayer.pause();var n=document.querySelector(".aplayer-wrapper");n&&(n.style.display="none"),this.$message.info("ðŸŽµ éŸ³ä¹æ’­æ”¾å™¨å·²å…³é—­")}},handleLive2dToggle:function(e){var t=document.getElementById("waifu"),n=document.getElementById("waifu-toggle");e?(t&&(t.style.display="block"),n&&(n.style.display="block"),this.$message.success("Live2Dçœ‹æ¿å¨˜å·²å¯ç”¨")):(t&&(t.style.display="none"),n&&(n.style.display="none"),this.$message.info("Live2Dçœ‹æ¿å¨˜å·²å…³é—­"))},restoreBackgroundSettings:function(){var e=localStorage.getItem("poetize-settings");if(e)try{var t=JSON.parse(e);void 0!==t.backgroundOpacity&&this.backgroundManager.setOpacity(t.backgroundOpacity),t.enableBackground&&t.backgroundType&&"none"!==t.backgroundType&&this.applyBackgroundType(t.backgroundType)}catch(e){}},handleBackgroundTypeChange:function(e){this.backgroundManager&&(this.applyBackgroundType(e),localStorage.setItem("backgroundType",e))},applyBackgroundType:function(e){if(this.backgroundManager){if(this.backgroundManager.clear(),"none"===e)return this.backgroundManager.restoreOriginalBackground(),void this.$message.info("èƒŒæ™¯ç‰¹æ•ˆå·²å…³é—­");switch(e){case"particle":this.backgroundManager.setParticleBackground(),this.$message.success("âœ¨ ç²’å­èƒŒæ™¯å·²å¯ç”¨");break;case"sakura":this.backgroundManager.setSakuraBackground(),this.$message.success("ðŸŒ¸ æ¨±èŠ±èƒŒæ™¯å·²å¯ç”¨");break;case"meteor":this.backgroundManager.setMeteorBackground(),this.$message.success("â˜„ï¸ æµæ˜ŸèƒŒæ™¯å·²å¯ç”¨")}}},handleBackgroundToggle:function(e){if(this.backgroundManager)if(e){var t=localStorage.getItem("poetize-settings");if(t)try{var n=JSON.parse(t);n.backgroundType&&"none"!==n.backgroundType&&this.applyBackgroundType(n.backgroundType)}catch(e){}}else this.backgroundManager.clear(),this.backgroundManager.restoreOriginalBackground(),this.$message.info("èƒŒæ™¯ç‰¹æ•ˆå·²å…³é—­")},handleBackgroundOpacityChange:function(e){this.backgroundManager&&this.backgroundManager.setOpacity(e)}}},y=b,w=(n("034f"),Object(v.a)(y,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view"),n("div",{directives:[{name:"show",rawName:"v-show",value:e.aplayerReady,expression:"aplayerReady"}],staticClass:"aplayer-wrapper"},[n("div",{attrs:{id:"global-aplayer"}})]),n("EnhancedSettingsMenu")],1)},[],!1,null,null,null)),k=w.exports,S=n("8c4f"),T=S.a.prototype.push;S.a.prototype.push=function(e){return T.call(this,e).catch(function(e){return e})},r.default.use(S.a);var I=[{path:"/landing",name:"landing",component:function(){return n.e("landing~2edbbfe9").then(n.bind(null,"4925"))}},{path:"/",redirect:"/landing"},{path:"/home",component:function(){return Promise.all([n.e("chunk-commons~31ecd969"),n.e("home~21833f8f")]).then(n.bind(null,"c3b0"))},children:[{path:"/",name:"index",component:function(){return Promise.all([n.e("chunk-commons~31ecd969"),n.e("index~21833f8f")]).then(n.bind(null,"6e78"))}},{path:"/sort",name:"sort",component:function(){return Promise.all([n.e("chunk-commons~31ecd969"),n.e("sort~9132ad1a")]).then(n.bind(null,"6499"))}},{path:"/article/:id",name:"article",component:function(){return Promise.all([n.e("chunk-markdown~00c385fd"),n.e("chunk-markdown~18c029cd"),n.e("article~31ecd969")]).then(n.bind(null,"d31b"))}},{path:"/weiYan",name:"weiYan",component:function(){return n.e("weiyan~68e90b2d").then(n.bind(null,"1099"))}},{path:"/jotting",name:"jotting",component:function(){return n.e("jotting~eda05df5").then(n.bind(null,"da4b"))}},{path:"/love",name:"love",component:function(){return n.e("love~d7e5aaad").then(n.bind(null,"a7d2"))}},{path:"/favorite",name:"favorite",component:function(){return n.e("favorite~eea7bfd9").then(n.bind(null,"9679"))}},{path:"/collection",name:"collection",component:function(){return n.e("collection~007be298").then(n.bind(null,"c47d"))}},{path:"/travel",name:"travel",component:function(){return n.e("travel~d503e975").then(n.bind(null,"9ead"))}},{path:"/message",name:"message",component:function(){return n.e("message~16258d72").then(n.bind(null,"16c2"))}},{path:"/about",name:"about",component:function(){return n.e("about~e3d5e500").then(n.bind(null,"3a34"))}},{path:"/user",name:"user",component:function(){return Promise.all([n.e("chunk-commons~31ecd969"),n.e("user~c9c4de14")]).then(n.bind(null,"885a"))}},{path:"/notification",name:"notification",component:function(){return Promise.all([n.e("chunk-commons~31ecd969"),n.e("notification~b08be51a")]).then(n.bind(null,"75be"))}},{path:"/letter",name:"letter",component:function(){return n.e("letter~b4dbaeda").then(n.bind(null,"30b1"))}},{path:"/contact",name:"contact",component:function(){return n.e("contact~929b2a9f").then(n.bind(null,"6180"))}}]},{path:"/admin",redirect:"/welcome",meta:{requiresAuth:!0,requiresAdmin:!0},component:function(){return n.e("admin~159bcbe4").then(n.bind(null,"75a7"))},children:[{path:"/welcome",name:"welcome",meta:{requiresAdmin:!0},component:function(){return n.e("admin-welcome~ad1e7cfa").then(n.bind(null,"b894"))}},{path:"/main",name:"main",meta:{requiresAdmin:!0},component:function(){return n.e("admin-main~065b16f2").then(n.bind(null,"6f7c"))}},{path:"/webEdit",name:"webEdit",meta:{requiresAdmin:!0,requiresRoot:!0},component:function(){return Promise.all([n.e("chunk-commons~31ecd969"),n.e("admin-webedit~107bf457")]).then(n.bind(null,"57d1"))}},{path:"/userList",name:"userList",meta:{requiresAdmin:!0,requiresRoot:!0},component:function(){return n.e("admin-userlist~3b199ac0").then(n.bind(null,"d401"))}},{path:"/postList",name:"postList",meta:{requiresAdmin:!0},component:function(){return n.e("admin-postlist~2d0f8592").then(n.bind(null,"24c4"))}},{path:"/postEdit",name:"postEdit",meta:{requiresAdmin:!0},component:function(){return Promise.all([n.e("chunk-commons~31ecd969"),n.e("admin-postedit~31ecd969")]).then(n.bind(null,"868a"))}},{path:"/sortList",name:"sortList",meta:{requiresAdmin:!0},component:function(){return n.e("admin-sortlist~81c164b8").then(n.bind(null,"0c89"))}},{path:"/configList",name:"configList",meta:{requiresAdmin:!0,requiresRoot:!0},component:function(){return n.e("admin-configlist~3ed38d82").then(n.bind(null,"3a0e"))}},{path:"/commentList",name:"commentList",meta:{requiresAdmin:!0},component:function(){return n.e("admin-commentlist~8cda5576").then(n.bind(null,"2543"))}},{path:"/commentAudit",name:"commentAudit",meta:{requiresAdmin:!0,requiresRoot:!0},component:function(){return n.e("admin-commentaudit~d04c6680").then(n.bind(null,"d4019"))}},{path:"/treeHoleList",name:"treeHoleList",meta:{requiresAdmin:!0},component:function(){return n.e("admin-treeholelist~e68e25e0").then(n.bind(null,"738f"))}},{path:"/resourceList",name:"resourceList",meta:{requiresAdmin:!0},component:function(){return n.e("admin-resourcelist~641649cd").then(n.bind(null,"ea6f"))}},{path:"/loveList",name:"loveList",meta:{requiresAdmin:!0},component:function(){return n.e("admin-lovelist~55e8935b").then(n.bind(null,"273f"))}},{path:"/resourcePathList",name:"resourcePathList",meta:{requiresAdmin:!0},component:function(){return n.e("admin-resourcepathlist~411ea6ca").then(n.bind(null,"3601"))}},{path:"/dashboard",name:"dashboard",meta:{requiresAdmin:!0},component:function(){return Promise.all([n.e("chunk-commons~31ecd969"),n.e("admin-dashboard~6140c950")]).then(n.bind(null,"ca24"))}},{path:"/analytics",name:"analytics",meta:{requiresAdmin:!0},component:function(){return n.e("admin-analytics~84eadbbc").then(n.bind(null,"ece0"))}},{path:"/shareStats",name:"shareStats",meta:{requiresAdmin:!0},component:function(){return n.e("admin-sharestats~a0ad92a9").then(n.bind(null,"139e"))}},{path:"/apiCache",name:"apiCache",meta:{requiresAdmin:!0,requiresRoot:!0},component:function(){return n.e("admin-apicache~d6bce6c5").then(n.bind(null,"acb0"))}},{path:"/systemSettings",name:"systemSettings",meta:{requiresAdmin:!0,requiresRoot:!0},component:function(){return n.e("admin-systemsettings~2ec55c4d").then(n.bind(null,"1806"))}}]},{path:"/verify",name:"verify",component:function(){return n.e("verify~7f342261").then(n.bind(null,"6419"))}}],x=new S.a({mode:"history",routes:I,scrollBehavior:function(e,t,n){return{x:0,y:0}}});x.beforeEach(function(e,t,n){if(e.matched.some(function(e){return e.meta.requiresAuth})){if(!localStorage.getItem("adminToken"))return void n({path:"/verify",query:{redirect:e.fullPath}});if(e.matched.some(function(e){return e.meta.requiresAdmin})){var a=JSON.parse(localStorage.getItem("currentAdmin")||"{}");if(e.matched.some(function(e){return e.meta.requiresRoot})){if(0!==a.userType)return void n({path:"/welcome",query:{error:"permission_denied"}})}else if(0!==a.userType&&1!==a.userType)return void n({path:"/verify",query:{error:"not_admin"}})}n()}else n()}),x.afterEach(function(e,t){"index"===e.name&&setTimeout(function(){Promise.all([n.e("chunk-markdown~00c385fd"),n.e("chunk-markdown~18c029cd"),n.e("article~31ecd969")]).then(n.bind(null,"d31b"))},2e3),"sort"===e.name&&setTimeout(function(){Promise.all([n.e("chunk-markdown~00c385fd"),n.e("chunk-markdown~18c029cd"),n.e("article~31ecd969")]).then(n.bind(null,"d31b"))},1e3),"article"===e.name&&setTimeout(function(){n.e("chunk-2d209ab9").then(n.bind(null,"79f0"))},1500)});var L=x,M=(n("2ca0"),n("caad"),n("2532"),n("4de4"),n("2f62"));r.default.use(M.a);var E="webInfo_last_refresh",A=Date.now(),D=localStorage.getItem(E);if(!D||A-parseInt(D)>3e5||!function(){try{var e=localStorage.getItem("webInfo");if(!e)return!1;for(var t=JSON.parse(e),n=0,a=["backgroundImage","avatar","favoriteBgImage","loveBgImage","weiyanBgImage","treeHoleBgImage","loveWeiyanAvatar","lovePhotoAvatar","loveMessageAvatar"];n<a.length;n++){var i=a[n];if(!t[i]||""===t[i])return!1}return!0}catch(e){return!1}}()){localStorage.removeItem("webInfo");Object.keys(localStorage).forEach(function(e){e.startsWith("poetize_api_cache_")&&(e.includes("/webInfo/")||e.includes("getWebInfo")||e.includes("getSortInfo")||e.includes("listSortArticle"))&&localStorage.removeItem(e)}),localStorage.setItem(E,A.toString())}var C=new M.a.Store({state:{toolbar:JSON.parse(localStorage.getItem("toolbar")||'{"visible": false, "enter": true}'),sortInfo:JSON.parse(localStorage.getItem("sortInfo")||"[]"),currentUser:JSON.parse(localStorage.getItem("currentUser")||"{}"),currentAdmin:JSON.parse(localStorage.getItem("currentAdmin")||"{}"),sysConfig:JSON.parse(localStorage.getItem("sysConfig")||"{}"),webInfo:JSON.parse(localStorage.getItem("webInfo")||'{"webName": "", "webTitle": [], "notices": [], "randomCover": [], "footer": "", "backgroundImage": "", "avatar": ""}')},getters:{articleTotal:function(e){return null!==e.sortInfo&&0!==e.sortInfo.length?1===e.sortInfo.length?e.sortInfo[0].countOfSort:e.sortInfo.reduce(function(e,t){return"number"==typeof e?e+t.countOfSort:e.countOfSort+t.countOfSort}):0},navigationBar:function(e){return null!==e.sortInfo&&0!==e.sortInfo.length?e.sortInfo.filter(function(e){return 0===e.sortType}):[]}},mutations:{changeToolbarStatus:function(e,t){e.toolbar=t,localStorage.setItem("toolbar",JSON.stringify(t))},loadSortInfo:function(e,t){null!==t&&0!==t.length&&(e.sortInfo=t.sort(function(e,t){return e.priority-t.priority}),localStorage.setItem("sortInfo",JSON.stringify(t.sort(function(e,t){return e.priority-t.priority}))))},loadCurrentUser:function(e,t){e.currentUser=t,localStorage.setItem("currentUser",JSON.stringify(t))},loadSysConfig:function(e,t){e.sysConfig=t,localStorage.setItem("sysConfig",JSON.stringify(t))},loadCurrentAdmin:function(e,t){e.currentAdmin=t,localStorage.setItem("currentAdmin",JSON.stringify(t))},loadWebInfo:function(e,t){t.webTitle&&"string"==typeof t.webTitle?t.webTitle=t.webTitle.split(""):t.webTitle||(t.webTitle=[]);try{t.notices="string"==typeof t.notices?JSON.parse(t.notices):t.notices||[]}catch(e){t.notices=[]}try{t.randomCover="string"==typeof t.randomCover?JSON.parse(t.randomCover):t.randomCover||[]}catch(e){t.randomCover=[]}e.webInfo=t,localStorage.setItem("webInfo",JSON.stringify(t))}},actions:{},modules:{},plugins:[]}),P=n("bc3a"),O=n.n(P),j={baseURL:"http://localhost:8081",webURL:"http://localhost",host:location.hostname+(location.port?":"+location.port:""),live2d_path:"https://fastly.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/",cdnPath:"https://fastly.jsdelivr.net/gh/fghrsh/live2d_api/",waifuPath:"/webInfo/getWaifuJson",hitokoto:"https://v1.hitokoto.cn",shehui:"https://api.oick.cn/yulu/api.php",tocbot:"https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.18.2/tocbot.min.js",jinrishici:"https://v1.jinrishici.com/all.json",cryptojs_key:"atticuswildeblog",before_color_list:["black","rgb(131, 123, 199)","#ee7752","#e73c7e","#23a6d5","#23d5ab"],tree_hole_color:["rgb(180, 224, 255)","rgb(180, 203, 255)","rgb(246, 223, 255)","rgb(255, 214, 198)","rgb(255, 205, 143)","rgb(238, 255, 143)","rgb(220, 255, 165)","rgb(164, 234, 192)","rgb(202, 241, 233)","rgb(230, 230, 250)"],before_color_1:"black",after_color_1:"linear-gradient(45deg, #f43f3b, #ec008c)",before_color_2:"rgb(131, 123, 199)",after_color_2:"linear-gradient(45deg, #f43f3b, #ec008c)",sortColor:["linear-gradient(to right, #358bff, #15c6ff)","linear-gradient(to right, #18e7ae, #1eebeb)","linear-gradient(to right, #ff6655, #ffbf37)","linear-gradient(120deg, rgba(255, 39, 232, 1) 0%, rgba(255, 128, 0, 1) 100%)","linear-gradient(120deg, rgba(91, 39, 255, 1) 0%, rgba(0, 212, 255, 1) 100%)"],pageColor:"#ee7752",commentPageColor:"#23d5ab",userId:1,source:0,emojiList:["è¡°","é„™è§†","å†è§","æ‚å˜´","æ‘¸é±¼","å¥‹æ–—","ç™½çœ¼","å¯æ€œ","çš±çœ‰","é¼“æŽŒ","çƒ¦æ¼","åèˆŒ","æŒ–é¼»","å§”å±ˆ","æ»‘ç¨½","å•Šè¿™","ç”Ÿæ°”","å®³ç¾ž","æ™•","å¥½è‰²","æµæ³ª","åè¡€","å¾®ç¬‘","é…·","åç¬‘","å“","å¤§å…µ","å“­ç¬‘","å›°","å‘²ç‰™"]},z=n("4328"),B=n.n(z),_=(n("4ec9"),n("a15b"),n("4fad"),n("a630"),function(){function e(){Object(d.a)(this,e),this.memoryCache=new Map,this.config={defaultTTL:3e5,maxMemoryItems:100,storagePrefix:"poetize_api_cache_",enableLocalStorage:!0,maxStorageSize:5242880},this.cacheStrategies={"/article/listArticle":3e5,"/article/info":6e5,"/sort/getSortInfo":18e5,"/user/getUserInfo":9e5,"/comment/listComment":18e4},this.cachePriority={"/sort/getSortInfo":10,"/user/getUserInfo":9,"/article/info":8,"/article/listArticle":7,"/comment/listComment":5},this.accessCounter=new Map,this.preloadQueue=[],this.isPreloading=!1}return Object(f.a)(e,[{key:"generateKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.keys(t).sort().map(function(e){return"".concat(e,"=").concat(JSON.stringify(t[e]))}).join("&");return"".concat(e,"?").concat(n)}},{key:"getTTL",value:function(e){for(var t=0,n=Object.entries(this.cacheStrategies);t<n.length;t++){var a=Object(l.a)(n[t],2),i=a[0],r=a[1];if(e.includes(i))return r}return this.config.defaultTTL}},{key:"set",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=this.generateKey(e,t),r=a||this.getTTL(e),o={data:n,timestamp:Date.now(),ttl:r,url:e,params:t};if(this.memoryCache.set(i,o),this.memoryCache.size>this.config.maxMemoryItems){var s=this.memoryCache.keys().next().value;this.memoryCache.delete(s)}if(this.config.enableLocalStorage)try{var c=this.config.storagePrefix+i;localStorage.setItem(c,JSON.stringify(o)),this.cleanExpiredStorage()}catch(e){this.clearOldestStorage()}}},{key:"get",value:function(e,t){var n=this.generateKey(e,t),a=this.accessCounter.get(n)||0;this.accessCounter.set(n,a+1);var i=this.memoryCache.get(n);if(!i&&this.config.enableLocalStorage)try{var r=this.config.storagePrefix+n,o=localStorage.getItem(r);o&&(i=JSON.parse(o),this.memoryCache.set(n,i))}catch(e){}if(i){if(Date.now()-i.timestamp<i.ttl)return i.data;this.delete(e,t)}return null}},{key:"delete",value:function(e,t){var n=this.generateKey(e,t);if(this.memoryCache.delete(n),this.config.enableLocalStorage)try{var a=this.config.storagePrefix+n;localStorage.removeItem(a)}catch(e){}}},{key:"clear",value:function(){var e=this;if(this.memoryCache.clear(),this.config.enableLocalStorage)try{Object.keys(localStorage).forEach(function(t){t.startsWith(e.config.storagePrefix)&&localStorage.removeItem(t)})}catch(e){}}},{key:"clearByPattern",value:function(e){var t=this;if(Array.from(this.memoryCache.keys()).forEach(function(n){n.includes(e)&&t.memoryCache.delete(n)}),this.config.enableLocalStorage)try{Object.keys(localStorage).forEach(function(n){n.startsWith(t.config.storagePrefix)&&n.includes(e)&&localStorage.removeItem(n)})}catch(e){}}},{key:"cleanExpiredStorage",value:function(){var e=this;if(this.config.enableLocalStorage)try{var t=Object.keys(localStorage),n=Date.now();t.forEach(function(t){if(t.startsWith(e.config.storagePrefix))try{var a=JSON.parse(localStorage.getItem(t));a&&n-a.timestamp>=a.ttl&&localStorage.removeItem(t)}catch(e){localStorage.removeItem(t)}})}catch(e){}}},{key:"clearOldestStorage",value:function(){var e=this;if(this.config.enableLocalStorage)try{for(var t=Object.keys(localStorage).filter(function(t){return t.startsWith(e.config.storagePrefix)}),n=t.map(function(e){try{return{key:e,timestamp:JSON.parse(localStorage.getItem(e)).timestamp||0}}catch(t){return{key:e,timestamp:0}}}).sort(function(e,t){return e.timestamp-t.timestamp}),a=Math.ceil(.1*n.length),i=0;i<a;i++)localStorage.removeItem(n[i].key)}catch(e){}}},{key:"getStats",value:function(){var e=this,t=this.memoryCache.size,n=0,a=0;if(this.config.enableLocalStorage)try{Object.keys(localStorage).forEach(function(t){if(t.startsWith(e.config.storagePrefix)){a++;var i=localStorage.getItem(t);n+=i?2*i.length:0}})}catch(e){}return{memory:{count:t,maxCount:this.config.maxMemoryItems},storage:{count:a,size:n,maxSize:this.config.maxStorageSize,sizeFormatted:this.formatSize(n)}}}},{key:"formatSize",value:function(e){if(0===e)return"0 B";var t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["B","KB","MB","GB"][t]}},{key:"getPriority",value:function(e){for(var t=0,n=Object.entries(this.cachePriority);t<n.length;t++){var a=Object(l.a)(n[t],2),i=a[0],r=a[1];if(e.includes(i))return r}return 0}},{key:"clearLowPriorityCache",value:function(){for(var e=this,t=Array.from(this.memoryCache.entries()).map(function(t){var n=Object(l.a)(t,2),a=n[0],i=n[1];return{key:a,item:i,priority:e.getPriority(i.url),accessCount:e.accessCounter.get(a)||0}}).sort(function(e,t){return e.priority!==t.priority?e.priority-t.priority:e.accessCount-t.accessCount}),n=Math.ceil(.3*t.length),a=0;a<n;a++)this.memoryCache.delete(t[a].key)}},{key:"preload",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.generateKey(t,a);return this.get(t,a)?Promise.resolve():new Promise(function(r,o){n.preloadQueue.push({fetchFn:e,url:t,params:a,key:i,resolve:r,reject:o,priority:n.getPriority(t)}),n.processPreloadQueue()})}},{key:"processPreloadQueue",value:function(){var e=Object(s.a)(regeneratorRuntime.mark(function e(){var t,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPreloading&&0!==this.preloadQueue.length){e.next=2;break}return e.abrupt("return");case 2:this.isPreloading=!0,this.preloadQueue.sort(function(e,t){return t.priority-e.priority});case 4:if(!(this.preloadQueue.length>0)){e.next=25;break}if(t=this.preloadQueue.shift(),e.prev=6,!(n=this.get(t.url,t.params))){e.next=11;break}return t.resolve(n),e.abrupt("continue",4);case 11:return e.next=13,t.fetchFn();case 13:return a=e.sent,this.set(t.url,t.params,a),t.resolve(a),e.next=18,new Promise(function(e){return setTimeout(e,100)});case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(6),t.reject(e.t0);case 23:e.next=4;break;case 25:this.isPreloading=!1;case 26:case"end":return e.stop()}},e,this,[[6,20]])}));return function(){return e.apply(this,arguments)}}()},{key:"smartPreload",value:function(e,t){var n=this;"requestIdleCallback"in window?window.requestIdleCallback(function(){t.forEach(function(t){var a=t.url,i=t.params;n.preload(e,a,i)})}):setTimeout(function(){t.forEach(function(t){var a=t.url,i=t.params;n.preload(e,a,i)})},1e3)}},{key:"getHotCache",value:function(){return Array.from(this.accessCounter.entries()).sort(function(e,t){return t[1]-e[1]}).slice(0,10).map(function(e){var t=Object(l.a)(e,2);return{key:t[0],count:t[1]}})}}]),e}()),H=new _;O.a.defaults.baseURL=j.baseURL,O.a.interceptors.request.use(function(e){return e},function(e){return Promise.reject(e)}),O.a.interceptors.response.use(function(e){return null!==e.data&&e.data.hasOwnProperty("code")&&200!==e.data.code?(300===e.data.code&&(C.commit("loadCurrentUser",{}),localStorage.removeItem("userToken"),C.commit("loadCurrentAdmin",{}),localStorage.removeItem("adminToken"),window.location.href=j.webURL+"/user"),Promise.reject(new Error(e.data.message))):e},function(e){return Promise.reject(e)});var R={post:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?{headers:{Authorization:localStorage.getItem("adminToken")}}:{headers:{Authorization:localStorage.getItem("userToken")}},new Promise(function(i,r){O.a.post(e,a?n:B.a.stringify(n),t).then(function(e){i(e.data)}).catch(function(e){r(e)})})},get:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?{Authorization:localStorage.getItem("adminToken")}:{Authorization:localStorage.getItem("userToken")},a){var i=H.get(e,n);if(i)return Promise.resolve(i)}return new Promise(function(i,r){O.a.get(e,{params:n,headers:t}).then(function(t){a&&t.data&&200===t.data.code&&H.set(e,n,t.data),i(t.data)}).catch(function(e){r(e)})})},delete:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?{Authorization:localStorage.getItem("adminToken")}:{Authorization:localStorage.getItem("userToken")},new Promise(function(a,i){O.a.delete(e,{params:n,headers:t}).then(function(e){a(e.data)}).catch(function(e){i(e)})})},upload:function(e,t){var n,a=arguments.length>3?arguments[3]:void 0;return n=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?{headers:{Authorization:localStorage.getItem("adminToken")},timeout:6e4}:{headers:{Authorization:localStorage.getItem("userToken")},timeout:6e4},void 0!==a&&(n.onUploadProgress=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),a.onProgress(e)}),new Promise(function(a,i){O.a.post(e,t,n).then(function(e){a(e.data)}).catch(function(e){i(e)})})},uploadQiniu:function(e,t){var n={headers:{"Content-Type":"multipart/form-data"},timeout:6e4};return new Promise(function(a,i){O.a.post(e,t,n).then(function(e){a(e.data)}).catch(function(e){i(e)})})}},q=(n("466d"),n("5319"),n("4d63"),n("c607"),n("2c3e"),n("3452")),N=n.n(q),J=(n("b680"),n("820e"),{compressImageByNetwork:function(e){var t=arguments,n=this;return Object(s.a)(regeneratorRuntime.mark(function a(){var i,r,o,s,l;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:i=t.length>1&&void 0!==t[1]?t[1]:{},r=n.getNetworkType(),o=.8,s=1920,a.t0=r,a.next="slow-2g"===a.t0||"2g"===a.t0?7:"3g"===a.t0?10:"4g"===a.t0?13:(a.t0,16);break;case 7:return o=.4,s=800,a.abrupt("break",19);case 10:return o=.6,s=1200,a.abrupt("break",19);case 13:return o=.8,s=1920,a.abrupt("break",19);case 16:return o=.9,s=2560,a.abrupt("break",19);case 19:return l=Object(c.a)({quality:i.quality||o,maxWidth:i.maxWidth||s,maxHeight:i.maxHeight||s},i),a.abrupt("return",n.compressImage(e,l));case 21:case"end":return a.stop()}},a)}))()},compressImage:function(e){var t=arguments,n=this;return Object(s.a)(regeneratorRuntime.mark(function a(){var i,r,o,s,c,l,u,d,f;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=(i=t.length>1&&void 0!==t[1]?t[1]:{}).quality,o=void 0===r?.8:r,s=i.maxWidth,c=void 0===s?1920:s,l=i.maxHeight,u=void 0===l?1920:l,d=i.mimeType,f=void 0===d?"image/jpeg":d,a.abrupt("return",new Promise(function(t,a){var i=new FileReader;i.onload=function(i){var r=new Image;r.onload=function(){try{var i=document.createElement("canvas"),s=i.getContext("2d"),l=n.calculateSize(r.width,r.height,c,u),d=l.width,h=l.height;i.width=d,i.height=h,s.drawImage(r,0,0,d,h),i.toBlob(function(n){if(n){var i=new File([n],e.name,{type:f}),r=(100*(1-n.size/e.size)).toFixed(2);t({file:i,originalSize:e.size,compressedSize:n.size,compressionRate:"".concat(r,"%"),width:d,height:h})}else a(new Error("å›¾ç‰‡åŽ‹ç¼©å¤±è´¥"))},f,o)}catch(e){a(e)}},r.onerror=function(){return a(new Error("å›¾ç‰‡åŠ è½½å¤±è´¥"))},r.src=i.target.result},i.onerror=function(){return a(new Error("æ–‡ä»¶è¯»å–å¤±è´¥"))},i.readAsDataURL(e)}));case 3:case"end":return a.stop()}},a)}))()},calculateSize:function(e,t,n,a){if(e<=n&&t<=a)return{width:e,height:t};var i=n/e,r=a/t,o=Math.min(i,r);return{width:Math.round(e*o),height:Math.round(t*o)}},getNetworkType:function(){if(!navigator.connection)return"unknown";var e=navigator.connection,t=e.effectiveType;return"wifi"===e.type?"wifi":t||"unknown"},getNetworkSpeed:function(){return navigator.connection?{downlink:navigator.connection.downlink,effectiveType:navigator.connection.effectiveType,rtt:navigator.connection.rtt,saveData:navigator.connection.saveData}:null},preloadImages:function(e){var t=this,n=e.map(function(e){return t.preloadImage(e)});return Promise.allSettled(n)},preloadImage:function(e){return new Promise(function(t,n){var a=new Image;a.onload=function(){return t({url:e,loaded:!0})},a.onerror=function(){return n({url:e,loaded:!1})},a.src=e})},smartPreload:function(e){var t=this;return Object(s.a)(regeneratorRuntime.mark(function n(){var a,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("slow-2g"!==(a=t.getNetworkType())&&"2g"!==a){n.next=4;break}return n.abrupt("return");case 4:if("3g"!==a){n.next=8;break}return i=e.slice(0,3),n.abrupt("return",t.preloadImages(i));case 8:return n.abrupt("return",t.preloadImages(e));case 10:case"end":return n.stop()}},n)}))()},convertToWebP:function(e){return Object(s.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){var a=new FileReader;a.onload=function(a){var i=new Image;i.onload=function(){var a=document.createElement("canvas");a.width=i.width,a.height=i.height,a.getContext("2d").drawImage(i,0,0),a.toBlob(function(a){if(a){var i=new File([a],e.name.replace(/\.[^.]+$/,".webp"),{type:"image/webp"});t(i)}else n(new Error("WebPè½¬æ¢å¤±è´¥"))},"image/webp",.8)},i.onerror=function(){return n(new Error("å›¾ç‰‡åŠ è½½å¤±è´¥"))},i.src=a.target.result},a.onerror=function(){return n(new Error("æ–‡ä»¶è¯»å–å¤±è´¥"))},a.readAsDataURL(e)}));case 1:case"end":return t.stop()}},t)}))()},isSupportWebP:function(){var e=document.createElement("canvas");return e.width=1,e.height=1,0===e.toDataURL("image/webp").indexOf("data:image/webp")},getImageInfo:function(e){return Object(s.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){var a=new FileReader;a.onload=function(a){var i=new Image;i.onload=function(){t({width:i.width,height:i.height,size:e.size,type:e.type,name:e.name,ratio:(i.width/i.height).toFixed(2)})},i.onerror=function(){return n(new Error("å›¾ç‰‡åŠ è½½å¤±è´¥"))},i.src=a.target.result},a.onerror=function(){return n(new Error("æ–‡ä»¶è¯»å–å¤±è´¥"))},a.readAsDataURL(e)}));case 1:case"end":return t.stop()}},t)}))()},generateSrcset:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[480,768,1024,1920]).map(function(t){return"".concat(e,"?w=").concat(t," ").concat(t,"w")}).join(", ")},createLazyObserver:function(e){return new IntersectionObserver(function(t,n){t.forEach(function(t){t.isIntersecting&&(e(t.target),n.unobserve(t.target))})},{root:null,rootMargin:"50px",threshold:.01})},formatFileSize:function(e){if(0===e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]},onNetworkChange:function(e){var t=this;if(!navigator.connection)return null;var n=navigator.connection,a=function(){var n=t.getNetworkSpeed();e(n)};return n.addEventListener("change",a),function(){n.removeEventListener("change",a)}},shouldLoadHDImage:function(){var e,t=this.getNetworkType();return!(null===(e=navigator.connection)||void 0===e?void 0:e.saveData)&&"slow-2g"!==t&&"2g"!==t},getAdaptiveImageUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.shouldLoadHDImage(),a=this.isSupportWebP(),i=e,r=n?90:60;return i+=i.includes("?")?"&":"?",i+="q=".concat(r),a&&!1!==t.webp&&(i+="&f=webp"),t.width&&(i+="&w=".concat(t.width)),i}}),W={pushNotification:function(e,t){if(t)return this.isEmpty(e)?[]:e.filter(function(e){return"æŽ¨é€æ ‡é¢˜ï¼š"!==e.substr(0,5)&&"æŽ¨é€å°é¢ï¼š"!==e.substr(0,5)&&"æŽ¨é€é“¾æŽ¥ï¼š"!==e.substr(0,5)});var n={};return e.forEach(function(e){"æŽ¨é€æ ‡é¢˜ï¼š"===e.substr(0,5)?n["æ ‡é¢˜"]=e.substr(5):"æŽ¨é€å°é¢ï¼š"===e.substr(0,5)?n["å°é¢"]=e.substr(5):"æŽ¨é€é“¾æŽ¥ï¼š"===e.substr(0,5)&&(n["é“¾æŽ¥"]=e.substr(5))}),n},mobile:function(){var e=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);return e&&e.length&&e.length>0},isEmpty:function(e){return!!(null==e||"string"==typeof e&&""===e.trim()||Array.prototype.isPrototypeOf(e)&&0===e.length||Object.prototype.isPrototypeOf(e)&&0===Object.keys(e).length)},encrypt:function(e){var t={mode:N.a.mode.ECB,padding:N.a.pad.Pkcs7},n=N.a.enc.Utf8.parse(j.cryptojs_key);return N.a.AES.encrypt(e,n,t).toString().replace(/\//g,"_").replace(/\+/g,"-")},decrypt:function(e){var t=e.replace(/\-/g,"+").replace(/_/g,"/"),n={mode:N.a.mode.ECB,padding:N.a.pad.Pkcs7},a=N.a.enc.Utf8.parse(j.cryptojs_key),i=N.a.AES.decrypt(t,a,n);return N.a.enc.Utf8.stringify(i)},faceReg:function(e){return e?(e=e.replace(/\[[^\[^\]]+\]/g,function(e){var t=j.emojiList.indexOf(e.replace("[","").replace("]",""));return t>-1?'<img loading="lazy" style="vertical-align: middle;width: 32px;height: 32px" src="'+((C.state.sysConfig&&C.state.sysConfig.webStaticResourcePrefix?C.state.sysConfig.webStaticResourcePrefix:"http://localhost:8081/resourceStorage/static/")+"static/emoji/q"+(t+1)+".gif")+'" title="'+e+'" onerror="this.style.display=\'none\';"/>':e}),e):e},pictureReg:function(e){return e=e.replace(/\[[^\[^\]]+\]/g,function(e){if(e.indexOf(",")>-1){var t=e.replace("[","").replace("]","").split(",");return'<img loading="lazy" class="pictureReg" style="border-radius: 5px;width: 100%;max-width: 250px;display: block" src="'+t[1]+'" title="'+t[0]+'"/>'}return e}),e},imgShow:function(e){$(e).click(function(){var e=$(this).attr("src");$("#bigImg").attr("src",e),$("<img/>").attr("src",e).load(function(){var e,t,n=$(window).width(),a=$(window).height(),i=this.width,r=this.height,o=.8;r>a*o?(e=(t=a*o)/r*i)>n*o&&(e=n*o):i>n*o?t=(e=n*o)/i*r:(e=i,t=r),$("#bigImg").css("width",e),$("#bigImg").css("border-radius","6px");var s=(n-e)/2,c=(a-t)/2;$("#innerImg").css({top:c,left:s}),$("#outerImg").fadeIn("fast")}),$("#outerImg").click(function(){$(this).fadeOut("fast")})})},getDateTimeStamp:function(e){return Date.parse(e.replace(/-/gi,"/"))},getDateDiff:function(e){var t,n,a,i,r,o=isNaN(Date.parse(e.replace(/-/gi,"/"))/1e3)?Date.parse(e)/1e3:Date.parse(e.replace(/-/gi,"/"))/1e3,s=Math.floor((new Date).getTime()/1e3),c=new Date(1e3*o),l=c.getFullYear(),u=c.getMonth()+1,d=c.getDate(),f=c.getHours(),h=c.getMinutes(),m=c.getSeconds();return u<10&&(u="0"+u),d<10&&(d="0"+d),f<10&&(f="0"+f),h<10&&(h="0"+h),m<10&&(m="0"+m),r=s-o,i=Math.floor(r/86400),a=Math.floor(r/3600),n=Math.floor(r/60),t=Math.floor(r),i>0&&i<3?i+"å¤©å‰":i<=0&&a>0?a+"å°æ—¶å‰":a<=0&&n>0?n+"åˆ†é’Ÿå‰":t<60?t<=0?"åˆšåˆšå‘è¡¨":t+"ç§’å‰":i>=3?l+"-"+u+"-"+d+" "+f+":"+h:void 0},saveResource:function(e,t,n,a,i,r,o){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c={type:t,path:n,size:a,mimeType:i,storeType:o,originalName:r};e.$http.post(e.$constant.baseURL+"/resource/saveResource",c,s).catch(function(t){e.$message({message:t.message,type:"error"})})},timeDiff:function(e,t){e=e.replace(new RegExp("-","gm"),"/"),t=t?t.replace(new RegExp("-","gm"),"/"):new Date;var n=function(e,t,n){var a=new Date(e).getTime()-new Date(t).getTime()>0?t:e,i=new Date(e).getTime()-new Date(t).getTime()>0?e:t,r=new Date(new Date(i).getFullYear(),new Date(i).getMonth()+1,0).getDate(),o=new Date(a).getDate()>r?r:new Date(a).getDate();return{minTime:a,maxTime:i,maxMinTong:"month"===n?new Date(i).getFullYear()+"/"+(new Date(a).getMonth()+1)+"/"+o+" "+new Date(a).toLocaleTimeString("chinese",{hour12:!1}):new Date(i).getFullYear()+"/"+(new Date(i).getMonth()+1)+"/"+o+" "+new Date(a).toLocaleTimeString("chinese",{hour12:!1})}},a=function(e,t,n){var a=Math.abs(new Date(e).getTime()-new Date(t).getTime());return n?parseInt(a/864e5)-n:parseInt(a/864e5)};return function(e,t){var i=n(e,t,"day"),r=i.minTime,o=i.maxTime,s=i.maxMinTong,c=a(r,s);if(new Date(s).getTime()>new Date(o).getTime()){var l=new Date(s).getMonth()-1,u=new Date(s).setMonth(l);c-=a(new Date(u).getFullYear()+"/"+(new Date(u).getMonth()+1)+"/"+new Date(u).getDate(),s)}var d=function(e,t){var a=new Date(e).getFullYear(),i=new Date(t).getFullYear(),r=n(e,t,"month"),o=(r.minTime,r.maxTime),s=r.maxMinTong,c=Math.abs(a-i);return new Date(s).getTime()>new Date(o).getTime()&&c--,c}(e,t),f=function(e,t,a){var i=12*new Date(e).getFullYear()+(new Date(e).getMonth()+1),r=12*new Date(t).getFullYear()+(new Date(t).getMonth()+1),o=n(e,t,"day"),s=(o.minTime,o.maxTime),c=o.maxMinTong,l=Math.abs(i-r);return new Date(c).getTime()>new Date(s).getTime()&&l--,a?l-a:l}(e,t,12*d),h=a(e,t,c),m=function(e,t,n){var a=Math.abs(new Date(e).getTime()-new Date(t).getTime());return n?parseInt(a/36e5)-n:parseInt(a/36e5)}(e,t,24*a(e,t)),g=function(e,t,n){var a=Math.abs(new Date(e).getTime()-new Date(t).getTime());return n?parseInt(a/6e4)-n:parseInt(a/6e4)}(e,t,24*a(e,t)*60+60*m),p=function(e,t,n){var a=Math.abs(new Date(e).getTime()-new Date(t).getTime());return n?parseInt(a/1e3)-n:parseInt(a/1e3)}(e,t,24*a(e,t)*60*60+60*m*60+60*g);return{diffYear:d,diffMonth:f,diffDay:h,diffHour:m,diffMinute:g,diffSecond:p}}(e,t)},countdown:function(e){e=new Date(e.replace(new RegExp("-","gm"),"/"));var t=new Date,n=parseInt((e.getTime()-t.getTime())/1e3);return{d:parseInt(n/3600/24),h:parseInt(n/3600%24),m:parseInt(n/60%60),s:parseInt(n%60)}},imageOptimizer:J},F=n("b2d8"),U=n.n(F),Y=(n("6062"),function(){try{return 0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")}catch(e){return!1}})(),Q="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",G="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2YwZjBmMCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiM5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj7lm77niYfliqDovb3lpLHotKU8L3RleHQ+PC9zdmc+",X=new Set,Z=function(e){if(!e||!Y)return e;if(e.includes(".webp"))return e;if(e.includes("qiniu")||e.includes("cdn")){var t=e.includes("?")?"&":"?";return"".concat(e).concat(t,"imageMogr2/format/webp")}return e},V=function(e){return new Promise(function(t,n){var a=new Image;a.onload=function(){return t(e)},a.onerror=n,a.src=e})},K=null,ee=function(){return K||(K=new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting){var t=e.target,n=t.dataset.src,a=t.dataset.error;if(n&&!X.has(n)){t.classList.add("lazy-loading");var i=Z(n);V(i).then(function(){t.src=i,t.classList.remove("lazy-loading"),t.classList.add("lazy-loaded"),X.add(n),K.unobserve(t)}).catch(function(){i!==n?V(n).then(function(){t.src=n,t.classList.remove("lazy-loading"),t.classList.add("lazy-loaded"),X.add(n),K.unobserve(t)}).catch(function(){t.src=a||G,t.classList.remove("lazy-loading"),t.classList.add("lazy-error"),K.unobserve(t)}):(t.src=a||G,t.classList.remove("lazy-loading"),t.classList.add("lazy-error"),K.unobserve(t))})}else X.has(n)&&(t.src=Z(n),t.classList.add("lazy-loaded"),K.unobserve(t))}})},{rootMargin:"50px",threshold:.01})),K},te={install:function(e){e.directive("lazy",{bind:function(e,t){if(e.src=Q,e.dataset.src=t.value,t.modifiers.error&&t.arg&&(e.dataset.error=t.arg),e.classList.add("lazy-image"),X.has(t.value))e.src=Z(t.value),e.classList.add("lazy-loaded");else if("IntersectionObserver"in window)ee().observe(e);else{var n=Z(t.value);V(n).then(function(){e.src=n,e.classList.add("lazy-loaded"),X.add(t.value)}).catch(function(){e.src=e.dataset.error||G,e.classList.add("lazy-error")})}},update:function(e,t){if(t.value!==t.oldValue)if(e.dataset.src=t.value,e.src=Q,e.classList.remove("lazy-loaded","lazy-loading","lazy-error"),e.classList.add("lazy-image"),X.has(t.value))e.src=Z(t.value),e.classList.add("lazy-loaded");else if("IntersectionObserver"in window)ee().observe(e);else{var n=Z(t.value);V(n).then(function(){e.src=n,e.classList.add("lazy-loaded"),X.add(t.value)}).catch(function(){e.src=e.dataset.error||G,e.classList.add("lazy-error")})}},unbind:function(e){K&&K.unobserve(e)}})}},ne="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",ae={rootMargin:"500px",threshold:.01},ie=null;function re(e){var t=e.dataset.src;if(t){var n=e.dataset.optimize||"smart",a=t;switch(n){case"mobile":a=J.optimizeForMobile(t);break;case"network":a=J.optimizeByNetwork(t);break;case"smart":a=J.smartOptimize(t);break;default:a=t}if("true"===e.dataset.progressive)J.progressiveLoad(e,a);else{e.classList.add("img-loading");var i=new Image;i.onload=function(){e.src=a,e.classList.remove("img-loading"),e.classList.add("img-loaded"),e.dispatchEvent(new CustomEvent("lazyloaded",{detail:{src:a}}))},i.onerror=function(){e.classList.remove("img-loading"),e.classList.add("img-error"),e.src=e.dataset.errorSrc||ne,e.dispatchEvent(new CustomEvent("lazyerror",{detail:{src:t}}))},i.src=a}}}var oe={bind:function(e,t){t.value?e.dataset.src=t.value:e.src&&!e.src.startsWith("data:")&&(e.dataset.src=e.src),e.src=e.dataset.placeholder||ne,e.classList.add("lazy-img"),t.arg&&(e.dataset.optimize=t.arg),t.modifiers.progressive&&(e.dataset.progressive="true");var n=function(e){return ie||(window.IntersectionObserver?(ie=new IntersectionObserver(function(t){t.forEach(function(t){t.isIntersecting&&(e(t.target),ie.unobserve(t.target))})},ae),ie):null)}(re);n?n.observe(e):re(e)},update:function(e,t){t.value!==t.oldValue&&(e.dataset.src=t.value,e.classList.contains("img-loaded")&&re(e))},unbind:function(e){ie&&ie.unobserve(e)},mounted:function(e,t){this.bind(e,t)},updated:function(e,t){this.update(e,t)},unmounted:function(e){this.unbind(e)}},se={register:function(){var e=this;"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/sw.js").then(function(t){t.addEventListener("updatefound",function(){var n=t.installing;n.addEventListener("statechange",function(){"installed"===n.state&&navigator.serviceWorker.controller&&e.showUpdateNotification(n)})})}).catch(function(e){}),navigator.serviceWorker.addEventListener("controllerchange",function(){})})},showUpdateNotification:function(e){if(window.$notify){var t=window.$createElement;window.$notify({title:"å‘çŽ°æ–°ç‰ˆæœ¬",message:t("div",[t("p","ç½‘ç«™æœ‰æ–°ç‰ˆæœ¬å¯ç”¨"),t("el-button",{props:{type:"primary",size:"small"},on:{click:function(){e.postMessage({type:"SKIP_WAITING"}),window.location.reload()}}},"ç«‹å³æ›´æ–°")]),duration:0,type:"info"})}},unregister:function(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}).catch(function(e){})},clearCache:function(){return"serviceWorker"in navigator&&"caches"in window?caches.keys().then(function(e){return Promise.all(e.map(function(e){return caches.delete(e)}))}).then(function(){return!0}).catch(function(e){return!1}):Promise.resolve(!1)},getCacheSize:function(){return Object(s.a)(regeneratorRuntime.mark(function e(){var t,n,a,i,r,o,s,c,l,d,f,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("caches"in window)){e.next=50;break}return e.next=3,caches.keys();case 3:t=e.sent,n=0,a=Object(u.a)(t),e.prev=6,a.s();case 8:if((i=a.n()).done){e.next=41;break}return r=i.value,e.next=12,caches.open(r);case 12:return o=e.sent,e.next=15,o.keys();case 15:s=e.sent,c=Object(u.a)(s),e.prev=17,c.s();case 19:if((l=c.n()).done){e.next=31;break}return d=l.value,e.next=23,o.match(d);case 23:if(!(f=e.sent)){e.next=29;break}return e.next=27,f.blob();case 27:h=e.sent,n+=h.size;case 29:e.next=19;break;case 31:e.next=36;break;case 33:e.prev=33,e.t0=e.catch(17),c.e(e.t0);case 36:return e.prev=36,c.f(),e.finish(36);case 39:e.next=8;break;case 41:e.next=46;break;case 43:e.prev=43,e.t1=e.catch(6),a.e(e.t1);case 46:return e.prev=46,a.f(),e.finish(46);case 49:return e.abrupt("return",n);case 50:return e.abrupt("return",0);case 51:case"end":return e.stop()}},e,null,[[6,43,46,49],[17,33,36,39]])}))()},formatCacheSize:function(e){if(0===e)return"0 B";var t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["B","KB","MB","GB"][t]}};function ce(e,t){if(t){var n=document.createElement("span");n.classList.add("ripple");var a=t.getBoundingClientRect(),i=Math.max(a.width,a.height),r=e.clientX-a.left-i/2,o=e.clientY-a.top-i/2;n.style.width=n.style.height=i+"px",n.style.left=r+"px",n.style.top=o+"px",t.appendChild(n),setTimeout(function(){n.remove()},600)}}function le(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var n=t.ripple,a=void 0===n||n,i=t.scale,r=void 0===i||i,o=t.vibrate,s=void 0!==o&&o;r&&e.classList.add("touch-feedback"),a&&e.classList.add("ripple-container"),e.addEventListener("touchstart",function(t){a&&ce(t.touches[0],e),s&&navigator.vibrate&&navigator.vibrate(10)},{passive:!0})}}var ue={addRipple:ce,enableTouchFeedback:le,enableTouchFeedbackBatch:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};document.querySelectorAll(e).forEach(function(e){le(e,t)})},detectLongPress:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;if(e&&t){var a=null,i=function(){a=setTimeout(function(){t(),navigator.vibrate&&navigator.vibrate([30,50,30])},n)},r=function(){a&&(clearTimeout(a),a=null)};return e.addEventListener("touchstart",i,{passive:!0}),e.addEventListener("touchend",r,{passive:!0}),e.addEventListener("touchmove",r,{passive:!0}),function(){e.removeEventListener("touchstart",i),e.removeEventListener("touchend",r),e.removeEventListener("touchmove",r)}}},detectSwipe:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var n=0,a=0,i=0,r=0,o=function(e){n=e.touches[0].clientX,a=e.touches[0].clientY},s=function(e){i=e.touches[0].clientX,r=e.touches[0].clientY},c=function(){var e=i-n,o=r-a;Math.abs(e)>Math.abs(o)?Math.abs(e)>50&&(e>0&&t.onSwipeRight?t.onSwipeRight():e<0&&t.onSwipeLeft&&t.onSwipeLeft()):Math.abs(o)>50&&(o>0&&t.onSwipeDown?t.onSwipeDown():o<0&&t.onSwipeUp&&t.onSwipeUp())};return e.addEventListener("touchstart",o,{passive:!0}),e.addEventListener("touchmove",s,{passive:!0}),e.addEventListener("touchend",c,{passive:!0}),function(){e.removeEventListener("touchstart",o),e.removeEventListener("touchmove",s),e.removeEventListener("touchend",c)}}},preventDoubleTapZoom:function(e){if(e){var t=0;e.addEventListener("touchend",function(e){var n=(new Date).getTime(),a=n-t;a<300&&a>0&&e.preventDefault(),t=n},{passive:!1})}}};if(n("8a79"),n("841c"),j.live2d_path,screen.width>768){setTimeout(function(){var e=function(){var e=C.state.sysConfig||{};return{enabled:"false"!==e["live2d.enabled"],modelName:e["live2d.modelName"]||"",showWelcome:"false"!==e["live2d.showWelcome"],showHitokoto:"false"!==e["live2d.showHitokoto"],showToolbar:"false"!==e["live2d.showToolbar"],minWidth:parseInt(e["live2d.minWidth"])||768,lockModel:"true"===e["live2d.lockModel"]}}();if(e.enabled)if(screen.width<e.minWidth);else{var t=["https://fastly.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/","https://gcore.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/","https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/"],n=0;!function a(){if(n>=t.length);else{var i=t[n];Promise.all([de(i+"waifu.css","css"),de(i+"live2d.min.js","js")]).then(function(){!function(e){document.body.insertAdjacentHTML("beforeend",'<div id="waifu-toggle">\n\t\t\t<span>çœ‹æ¿å¨˜</span>\n\t\t</div>');var t=document.getElementById("waifu-toggle");t.addEventListener("click",function(){if(t.classList.remove("waifu-toggle-active"),t.getAttribute("first-time"))fe(e),t.removeAttribute("first-time");else{localStorage.removeItem("waifu-display");var n=document.getElementById("waifu");n.style.display="",setTimeout(function(){n.style.opacity="1"},0)}}),localStorage.getItem("waifu-display")&&Date.now()-localStorage.getItem("waifu-display")<=864e5?(t.setAttribute("first-time",!0),setTimeout(function(){t.classList.add("waifu-toggle-active")},0)):fe(e)}({waifuPath:j.baseURL+j.waifuPath,cdnPath:j.cdnPath,config:e})}).catch(function(e){n++,setTimeout(a,500)})}}()}},1e3)}function de(e,t){return new Promise(function(n,a){var i;if("css"===t?((i=document.createElement("link")).rel="stylesheet",i.href=e):"js"===t&&((i=document.createElement("script")).src=e),i){var r=setTimeout(function(){a(new Error("èµ„æºåŠ è½½è¶…æ—¶: ".concat(e)))},1e4);i.onload=function(){clearTimeout(r),n(e)},i.onerror=function(){clearTimeout(r),a(new Error("èµ„æºåŠ è½½å¤±è´¥: ".concat(e)))},document.head.appendChild(i)}else a(new Error("ä¸æ”¯æŒçš„èµ„æºç±»åž‹: ".concat(t)))})}function fe(e){var t=e.waifuPath,n=e.cdnPath,a=e.config;n.endsWith("/")||(n+="/");var i,r=0,o=!1;localStorage.removeItem("waifu-display"),localStorage.removeItem("waifu-text");var c=a.showToolbar?'\n      \x3c!-- å·¥å…· --\x3e\n\t\t\t<div id="waifu-tool">\n\t\t\t\t<span class="fa fa-lg fa-comment"></span>\n\t\t\t\t<span class="fa fa-lg fa-street-view"></span>\n\t\t\t\t<span class="fa fa-lg fa-camera-retro"></span>\n\t\t\t\t<span class="fa fa-lg fa-mouse-pointer"></span>\n\t\t\t\t<span class="fa fa-lg fa-times"></span>\n\t\t\t</div>':"";document.body.insertAdjacentHTML("beforeend",'<div id="waifu">\n\t\t\t<div id="waifu-tips"></div>\n\t\t\t<canvas id="live2d" width="800" height="800"></canvas>\n\t\t\t'.concat(c,"\n\t\t</div>")),setTimeout(function(){document.getElementById("waifu").style.bottom=0,setTimeout(function(){!function(){var e=document.getElementById("waifu");if(e){var t,n,a,i,r=!1,o=localStorage.getItem("waifu-position");if(o)try{var s=JSON.parse(o);e.style.left=s.left+"px",e.style.bottom=s.bottom+"px"}catch(t){T(e)}else T(e);e.addEventListener("mousedown",function(o){if(!o.target.closest("#waifu-tool")&&!o.target.closest("#waifu-tips")){r=!0,e.classList.add("dragging"),t=o.clientX,n=o.clientY;var s=e.getBoundingClientRect();a=s.left,i=window.innerHeight-s.bottom,o.preventDefault(),o.stopPropagation()}},!0),document.addEventListener("mousemove",function(o){if(r){var s=o.clientX-t,c=o.clientY-n,l=a+s,u=i-c,d=e.offsetWidth,f=e.offsetHeight;l=Math.max(0,Math.min(l,window.innerWidth-d)),u=Math.max(0,Math.min(u,window.innerHeight-f)),e.style.left=l+"px",e.style.bottom=u+"px",e.style.right="auto",o.preventDefault()}}),document.addEventListener("mouseup",function(){if(r){r=!1,e.classList.remove("dragging");var t=e.getBoundingClientRect(),n={left:t.left,bottom:window.innerHeight-t.bottom};localStorage.setItem("waifu-position",JSON.stringify(n))}}),e.addEventListener("dblclick",function(t){t.target.closest("#waifu-tool")||(T(e),localStorage.removeItem("waifu-position"),S("ä½ç½®å·²é‡ç½®~",2e3,8))})}}()},200)},100);var l,d,f=!1,h=["æˆ‘æ˜¯ä¸€ä¸ªç‰¹åˆ«å›ºæ‰§çš„äººï¼Œæˆ‘ä»Žæ¥ä¸ä¼šåœ¨æ„åˆ«äººè·Ÿæˆ‘è¯´ä»€ä¹ˆï¼Œè®©æˆ‘åŽ»åšï¼Œè®©æˆ‘åŽ»æ€Žä¹ˆåšï¼Œæˆ‘ä¸ç®¡ã€‚å¦‚æžœï¼Œä½ ä¹Ÿå¯ä»¥åƒæˆ‘ä¸€æ ·ï¼Œé‚£æˆ‘è§‰å¾—ï¼Œè¿™ä»¶äº‹æƒ…ï¼Œå¤ªé…·è¾£!!!","æˆ‘åŽ‰å®³ï¼Œä½ ç»™æˆ‘å¤§æ‹‡å“¥ï¼","é‚£äº›è¯´æˆ‘ä»¬çš„ç½‘ç«™åœŸçš„äººï¼Œè¯´æŠ„è¢­çš„äººï¼Œè¯´æˆ‘ä»¬æ–‡ç« æ‹‰çš„äººï¼Œè¯´æˆ‘åƒé¥±äº†æ’‘çš„äººï¼Œä½ ç»™æˆ‘å¤§æ‹‡å“¥ï¼","å¥½ä¹…ä¸è§ï¼Œæ—¥å­è¿‡å¾—å¥½å¿«å‘¢â€¦â€¦","å˜¤å˜¤å˜¤ï½ž","å—¨ï½žå¿«æ¥é€—æˆ‘çŽ©å§ï¼","é€€ã€é€€ã€é€€","å¾ˆå–œæ¬¢ä¸Šç­ï¼Œæœ‰ç§ä¸ŠåŸçš„æ„Ÿè§‰ã€‚","å¾ˆå–œæ¬¢æ”¾å‡ï¼Œæœ‰ç§åˆ‘æ»¡é‡Šæ”¾çš„æ„Ÿè§‰ã€‚","å¾ˆå–œæ¬¢çœ‹è¯„è®ºï¼Œæœ‰ä¸€ç§æ‰¹é˜…å¥æŠ˜çš„æ„Ÿè§‰ã€‚","å¾ˆå–œæ¬¢å‘å·¥èµ„ï¼Œæœ‰ä¸€ç§é¢†ä½Žä¿çš„æ„Ÿè§‰ã€‚","è®°å¾—æŠŠæˆ‘åŠ å…¥ Adblock ç™½åå•å“¦ï¼"];function m(){return g.apply(this,arguments)}function g(){return g=Object(s.a)(regeneratorRuntime.mark(function e(){var t,a,r,o,s,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("live2d_model_list"))){e.next=11;break}return e.prev=2,i=JSON.parse(t),e.abrupt("return");case 8:e.prev=8,e.t0=e.catch(2);case 11:a={models:[["Potion-Maker/Pio"],["ShizukuTalk/shizuku-48"],["HyperdimensionNeptunia/nepnep","HyperdimensionNeptunia/blanc","HyperdimensionNeptunia/noir","HyperdimensionNeptunia/vert"],["kesshouban/kasumi-pajamas"],["tororo/tororo"],["hijiki/hijiki"],["tsumiki/tsumiki"]],messages:["å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ Pioï½ž","å—¨ï¼Œä½ å¥½å‘€ï½ž","è¯·å¤šæŒ‡æ•™ï½ž","å—¯...?","å¤§å®¶å¥½ï½ž","è¯·å¤šå…³ç…§ï½ž","ä½ å¥½å‘€ï½ž"]},r=["".concat(n,"model_list.json"),"https://fastly.jsdelivr.net/gh/fghrsh/live2d_api/model_list.json","https://gcore.jsdelivr.net/gh/fghrsh/live2d_api/model_list.json"],o=0,s=r;case 14:if(!(o<s.length)){e.next=36;break}return c=s[o],e.prev=16,e.next=20,Promise.race([fetch(c),new Promise(function(e,t){return setTimeout(function(){return t(new Error("timeout"))},5e3)})]);case 20:return l=e.sent,e.next=23,l.json();case 23:return i=e.sent,localStorage.setItem("live2d_model_list",JSON.stringify(i)),e.abrupt("return");case 29:return e.prev=29,e.t1=e.catch(16),e.abrupt("continue",33);case 33:o++,e.next=14;break;case 36:i=a,localStorage.setItem("live2d_model_list",JSON.stringify(i));case 39:case"end":return e.stop()}},e,null,[[2,8],[16,29]])})),g.apply(this,arguments)}function p(e,t,n){return v.apply(this,arguments)}function v(){return v=Object(s.a)(regeneratorRuntime.mark(function e(t,a,r){var s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=3;break}return S("æ¨¡åž‹åŠ è½½ä¸­ï¼Œè¯·ç¨å€™...",2e3,9),e.abrupt("return");case 3:if(o=!0,localStorage.setItem("modelId",t),e.prev=5,!a){e.next=10;break}s=a,e.next=14;break;case 10:if(i){e.next=13;break}return e.next=13,m();case 13:s=k(i.models[t]);case 14:c="".concat(n,"model/").concat(s,"/index.json"),loadlive2d("live2d",c),r&&S(r,4e3,10),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5);case 22:return e.prev=22,setTimeout(function(){o=!1},1e3),e.finish(22);case 25:case"end":return e.stop()}},e,null,[[5,19,22,25]])})),v.apply(this,arguments)}function b(){return b=Object(s.a)(regeneratorRuntime.mark(function e(){var t,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.lockModel){e.next=5;break}return S("ç®¡ç†å‘˜å·²é”å®šæ¨¡åž‹ï¼Œæ— æ³•åˆ‡æ¢å“¦ï½ž",4e3,9),e.abrupt("return");case 5:if(e.prev=5,S("æ­£åœ¨åŠ è½½æ–°çš®è‚¤...",2e3,11),t=localStorage.getItem("modelId")||"0",i){e.next=13;break}return e.next=13,m();case 13:r=k(i.models[t]),o="".concat(n,"model/").concat(r,"/index.json"),loadlive2d("live2d",o),setTimeout(function(){S("æˆ‘çš„æ–°è¡£æœå¥½çœ‹å˜›ï¼Ÿ",4e3,10)},2e3),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(5),S("åˆ‡æ¢çš®è‚¤å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿žæŽ¥",3e3,9);case 25:case"end":return e.stop()}},e,null,[[5,21]])})),b.apply(this,arguments)}function y(){return y=Object(s.a)(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.lockModel){e.next=5;break}return S("ç®¡ç†å‘˜å·²é”å®šæ¨¡åž‹ï¼Œæ— æ³•åˆ‡æ¢å“¦ï½ž",4e3,9),e.abrupt("return");case 5:if(e.prev=5,t=parseInt(localStorage.getItem("modelId")||"0"),i){e.next=12;break}return e.next=12,m();case 12:return n=++t>=i.models.length?0:t,e.next=17,p(n,null,i.messages[n]);case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(5),S("åˆ‡æ¢æ¨¡åž‹å¤±è´¥ï¼Œè¯·æŸ¥çœ‹æŽ§åˆ¶å°é”™è¯¯ä¿¡æ¯",3e3,9);case 23:case"end":return e.stop()}},e,null,[[5,19]])})),y.apply(this,arguments)}function w(e){var t=new Array("å¯Œå¼º","æ°‘ä¸»","æ–‡æ˜Ž","å’Œè°","è‡ªç”±","å¹³ç­‰","å…¬æ­£","æ³•æ²»","çˆ±å›½","æ•¬ä¸š","è¯šä¿¡","å‹å–„"),n=$("<span>").text(t[r]);r=(r+1)%t.length;var a=e.pageX,i=e.pageY;n.css({"z-index":1e3,top:i-20,left:a,position:"absolute","pointer-events":"none","font-weight":"bold",color:"#ff6651"}),$("body").append(n),n.animate({top:i-180,opacity:0},1500,function(){n.remove()})}function k(e){return Array.isArray(e)?e[Math.floor(Math.random()*e.length)]:e}function S(e,t,n){if(e&&!(localStorage.getItem("waifu-text")&&localStorage.getItem("waifu-text")>n)){d&&(clearTimeout(d),d=null),e=k(e),localStorage.setItem("waifu-text",n);var a=document.getElementById("waifu-tips");a.innerHTML=e,a.classList.add("waifu-tips-active"),d=setTimeout(function(){localStorage.removeItem("waifu-text"),a.classList.remove("waifu-tips-active")},t)}}function T(e){e.style.left="0px",e.style.bottom="0px",e.style.right="auto"}window.addEventListener("mousemove",function(){return f=!0}),window.addEventListener("keydown",function(){return f=!0}),setInterval(function(){f?(f=!1,clearInterval(l),l=null):l||(l=setInterval(function(){S(k(h),6e3,9)},2e4))},1e3),function(){if(a.showToolbar){var e=document.querySelector("#waifu-tool");if(!e)return;if(a.showHitokoto){var t=e.querySelector(".fa-comment");t&&t.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),fetch(j.hitokoto).then(function(e){return e.json()}).then(function(e){var t="è¿™å¥ä¸€è¨€æ¥è‡ª <span>ã€Œ".concat(e.from,"ã€</span>ï¼Œæ˜¯ <span>").concat(e.creator,"</span> åœ¨ hitokoto.cn æŠ•ç¨¿çš„ã€‚");S(e.hitokoto,6e3,9),setTimeout(function(){S(t,4e3,9)},6e3)})})}var n=e.querySelector(".fa-street-view");n&&n.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),function(){y.apply(this,arguments)}()});var i=e.querySelector(".fa-camera-retro");i&&i.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),function(){b.apply(this,arguments)}()});var r=e.querySelector(".fa-mouse-pointer");r&&r.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),"0"===localStorage.getItem("showMouseAnimation")?(localStorage.setItem("showMouseAnimation","1"),document.querySelector("body").addEventListener("click",w),S("å“ˆå“ˆï¼Œè¦ç‰¢è®°ç¤¾ä¼šä¸»ä¹‰æ ¸å¿ƒä»·å€¼è§‚å“¦ï¼",6e3,9)):(localStorage.setItem("showMouseAnimation","0"),document.querySelector("body").removeEventListener("click",w),S("ä»Šå¤©ä½ çˆ±å›½äº†å—ï¼Ÿ",6e3,9))});var o=e.querySelector(".fa-times");o&&o.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),localStorage.setItem("waifu-display",Date.now()),S("æ„¿ä½ æœ‰ä¸€å¤©èƒ½ä¸Žé‡è¦çš„äººé‡é€¢ã€‚",2e3,11);var t=document.getElementById("waifu");t.style.opacity="0",t.style.transition="opacity 0.3s",setTimeout(function(){t.style.display="none",t.style.transition="none";var e=document.getElementById("waifu-toggle");e&&e.classList.add("waifu-toggle-active")},300)})}window.addEventListener("copy",function(){S("ä½ éƒ½å¤åˆ¶äº†äº›ä»€ä¹ˆå‘€ï¼Œè½¬è½½è¦è®°å¾—åŠ ä¸Šå‡ºå¤„å“¦ï¼",6e3,9)}),window.addEventListener("visibilitychange",function(){document.hidden||S("å“‡ï¼Œä½ ç»ˆäºŽå›žæ¥äº†ï½ž",6e3,9)}),localStorage.setItem("showMouseAnimation","1"),document.querySelector("body").addEventListener("click",w)}(),function(){if(a.showWelcome){var e;if("/"===location.pathname){var t=(new Date).getHours();e=t>5&&t<=7?"æ—©ä¸Šå¥½ï¼ä¸€æ—¥ä¹‹è®¡åœ¨äºŽæ™¨ï¼Œç¾Žå¥½çš„ä¸€å¤©å°±è¦å¼€å§‹äº†ã€‚":t>7&&t<=11?"ä¸Šåˆå¥½ï¼å·¥ä½œé¡ºåˆ©å˜›ï¼Œä¸è¦ä¹…åï¼Œå¤šèµ·æ¥èµ°åŠ¨èµ°åŠ¨å“¦ï¼":t>11&&t<=13?"ä¸­åˆäº†ï¼Œå·¥ä½œäº†ä¸€ä¸ªä¸Šåˆï¼ŒçŽ°åœ¨æ˜¯åˆé¤æ—¶é—´ï¼":t>13&&t<=17?"åˆåŽå¾ˆå®¹æ˜“çŠ¯å›°å‘¢ï¼Œä»Šå¤©çš„è¿åŠ¨ç›®æ ‡å®Œæˆäº†å—ï¼Ÿ":t>17&&t<=19?"å‚æ™šäº†ï¼çª—å¤–å¤•é˜³çš„æ™¯è‰²å¾ˆç¾Žä¸½å‘¢ï¼Œæœ€ç¾Žä¸è¿‡å¤•é˜³çº¢ï½ž":t>19&&t<=21?"æ™šä¸Šå¥½ï¼Œä»Šå¤©è¿‡å¾—æ€Žä¹ˆæ ·ï¼Ÿ":t>21&&t<=23?["å·²ç»è¿™ä¹ˆæ™šäº†å‘€ï¼Œæ—©ç‚¹ä¼‘æ¯å§ï¼Œæ™šå®‰ï½ž","æ·±å¤œæ—¶è¦çˆ±æŠ¤çœ¼ç›å‘€ï¼"]:"ä½ æ˜¯å¤œçŒ«å­å‘€ï¼Ÿè¿™ä¹ˆæ™šè¿˜ä¸ç¡è§‰ï¼Œæ˜Žå¤©èµ·çš„æ¥å˜›ï¼Ÿ"}else if(""!==document.referrer){var n=new URL(document.referrer),i=n.hostname.split(".")[1];e=location.hostname===n.hostname?"æ¬¢è¿Žé˜…è¯»<span>ã€Œ".concat(document.title.split(" - ")[0],"ã€</span>"):"baidu"===i?"Helloï¼æ¥è‡ª ç™¾åº¦æœç´¢ çš„æœ‹å‹<br>ä½ æ˜¯æœç´¢ <span>".concat(n.search.split("&wd=")[1].split("&")[0],"</span> æ‰¾åˆ°çš„æˆ‘å—ï¼Ÿ"):"so"===i?"Helloï¼æ¥è‡ª 360æœç´¢ çš„æœ‹å‹<br>ä½ æ˜¯æœç´¢ <span>".concat(n.search.split("&q=")[1].split("&")[0],"</span> æ‰¾åˆ°çš„æˆ‘å—ï¼Ÿ"):"google"===i?"Helloï¼æ¥è‡ª è°·æ­Œæœç´¢ çš„æœ‹å‹<br>æ¬¢è¿Žé˜…è¯»<span>ã€Œ".concat(document.title.split(" - ")[0],"ã€</span>"):"Helloï¼æ¥è‡ª <span>".concat(n.hostname,"</span> çš„æœ‹å‹")}else e="æ¬¢è¿Žé˜…è¯»<span>ã€Œ".concat(document.title.split(" - ")[0],"ã€</span>");S(e,7e3,8)}}(),function(){var e=localStorage.getItem("modelId"),n=a.modelName&&null===e;null===e&&(e=0),p(e,n?a.modelName:null),window.addEventListener("error",function(e){if(e.message&&e.message.includes("Cannot read properties of undefined"))return e.preventDefault(),!1},!0),fetch(t).then(function(e){return e.json()}).then(function(e){e&&(Array.isArray(e.mouseover)&&window.addEventListener("mouseover",function(t){var n,a=Object(u.a)(e.mouseover);try{for(a.s();!(n=a.n()).done;){var i=n.value,r=i.selector,o=i.text;if(t.target.matches(r))return void S(o=(o=k(o)).replace("{text}",t.target.innerText),4e3,8)}}catch(e){a.e(e)}finally{a.f()}}),Array.isArray(e.click)&&window.addEventListener("click",function(t){var n,a=Object(u.a)(e.click);try{for(a.s();!(n=a.n()).done;){var i=n.value,r=i.selector,o=i.text;if(t.target.matches(r))return void S(o=(o=k(o)).replace("{text}",t.target.innerText),4e3,8)}}catch(e){a.e(e)}finally{a.f()}}),Array.isArray(e.seasons)&&e.seasons.forEach(function(e){var t=e.date,n=e.text,a=new Date,i=t.split("-")[0],r=t.split("-")[1]||i;i.split("/")[0]<=a.getMonth()+1&&a.getMonth()+1<=r.split("/")[0]&&i.split("/")[1]<=a.getDate()&&a.getDate()<=r.split("/")[1]&&(n=(n=k(n)).replace("{year}",a.getFullYear()),h.push(n))}))}).catch(function(e){})}()}n("4998"),n("c98c"),n("a2f0"),n("cadf"),n("7f91"),n("03fd"),n("1a0a"),n("8602"),n("64e1");var he=n("1188");r.default.use(i.a),r.default.use(he.vueBaberrage),r.default.use(U.a),r.default.use(te),r.default.directive("lazyload",oe),r.default.prototype.$http=R,r.default.prototype.$common=W,r.default.prototype.$constant=j,r.default.prototype.$apiCache=H,r.default.prototype.$touchFeedback=ue,r.default.config.productionTip=!1,se.register(),window.innerWidth<=768&&r.default.nextTick(function(){ue.enableTouchFeedbackBatch("button, .el-button",{ripple:!0,scale:!0,vibrate:!1})});var me=new r.default({router:L,store:C,render:function(e){return e(k)}}).$mount("#app");window.$notify=me.$notify,window.$createElement=me.$createElement},"85ec":function(e,t,n){},a32b:function(e,t,n){"use strict";n("17ec")}},[[0,"runtime-app","chunk-vue~b1f96ece","chunk-vue~d2305125","chunk-vue~87de5440","chunk-element-ui~85c8dd33","chunk-element-ui~69afac5b","chunk-markdown~00c385fd","chunk-markdown~18c029cd","chunk-vendors~253ae210","chunk-vendors~d939e436","chunk-vendors~92c00e46","chunk-vendors~31c671ca","chunk-vendors~73914085","styles~a095a59b"]],["chunk-markdown~00c385fd","chunk-markdown~18c029cd","article~31ecd969","chunk-2d209ab9"]]);