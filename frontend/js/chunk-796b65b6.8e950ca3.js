(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-796b65b6"],{"769f":function(t,e,o){"use strict";o("b1ca")},b1ca:function(t,e,o){},bc04:function(t,e,o){"use strict";o.r(e);var a={components:{uploadPicture:(o("d3b7"),o("3ca3"),o("ddb0"),o("4de4"),o("caad"),o("d81d"),o("2ca0"),o("7db0"),o("e9c4"),o("a434"),o("c740"),function(){return o.e("chunk-commons~31ecd969").then(o.bind(null,"6034"))})},data:function(){return{contactMethods:[],backgroundConfig:{url:""},currentMethod:{method:"",value:"",displayValue:"",visible:!0,qrcodeImage:""},showDialog:!1,isEditing:!1,saving:!1,editingMethod:null,formRules:{method:[{required:!0,message:"è¯·é€‰æ‹©è”ç³»æ–¹å¼",trigger:"change"}],value:[{required:!0,message:"è¯·è¾“å…¥è”ç³»ä¿¡æ¯",trigger:"blur"}]},supportedMethods:[{key:"email",label:"ç”µå­é‚®ç®±",icon:"el-icon-message",color:"#EA4335",type:"copy"},{key:"phone",label:"ç”µè¯",icon:"el-icon-phone",color:"#34A853",type:"copy"},{key:"wechat",label:"å¾®ä¿¡",icon:"el-icon-chat-line-round",color:"#07C160",type:"qrcode"},{key:"qq",label:"QQ",icon:"el-icon-chat-dot-round",color:"#12B7F5",type:"copy"},{key:"github",label:"GitHub",icon:"fa fa-github",color:"#333",type:"link"},{key:"gitee",label:"Gitee",icon:"fa fa-git",color:"#C71D23",type:"link"},{key:"facebook",label:"Facebook",icon:"fa fa-facebook",color:"#1877F2",type:"link"},{key:"bilibili",label:"Bç«™",icon:"fa fa-play-circle",color:"#00A1D6",type:"link"},{key:"csdn",label:"CSDN",icon:"fa fa-code",color:"#F26522",type:"link"},{key:"zhihu",label:"çŸ¥ä¹",icon:"fa fa-file-text",color:"#0084FF",type:"link"},{key:"wechat_official",label:"å…¬ä¼—å·",icon:"el-icon-s-marketing",color:"#09B83E",type:"qrcode"},{key:"weibo",label:"å¾®åš",icon:"fa fa-weibo",color:"#E6162D",type:"link"},{key:"twitter",label:"æ¨ç‰¹",icon:"fa fa-twitter",color:"#1DA1F2",type:"link"},{key:"telegram",label:"ç”µæŠ¥",icon:"fa fa-paper-plane",color:"#0088cc",type:"link"},{key:"instagram",label:"Instagram",icon:"fa fa-instagram",color:"#E4405F",type:"link"},{key:"linkedin",label:"LinkedIn",icon:"fa fa-linkedin",color:"#0077B5",type:"link"}]}},computed:{methodOptions:function(){return[{label:"å³æ—¶é€šè®¯",options:this.supportedMethods.filter(function(t){return["wechat","qq","telegram"].includes(t.key)})},{label:"ç¤¾äº¤åª’ä½“",options:this.supportedMethods.filter(function(t){return["github","gitee","facebook","weibo","twitter","instagram","linkedin"].includes(t.key)})},{label:"è§†é¢‘/åšå®¢",options:this.supportedMethods.filter(function(t){return["bilibili","csdn","zhihu"].includes(t.key)})},{label:"å…¶ä»–",options:this.supportedMethods.filter(function(t){return["email","phone","wechat_official"].includes(t.key)})}]}},created:function(){this.loadContactConfig()},methods:{loadContactConfig:function(){var t=this;this.$http.get(this.$constant.baseURL+"/sysConfig/listSysConfig").then(function(e){if(!t.$common.isEmpty(e.data)){var o=e.data["contact.methods"];if(!o)return void t.loadContactConfigAdmin();try{var a=JSON.parse(o);a=a.map(function(e){if(e.qrcodeImage){if(e.qrcodeImage.startsWith("http://")||e.qrcodeImage.startsWith("https://"))return e;e.qrcodeImage.startsWith("resourceStorage/")||(e.qrcodeImage="/resourceStorage/"+e.qrcodeImage),e.qrcodeImage.startsWith(t.$constant.baseURL)||(e.qrcodeImage=t.$constant.baseURL+e.qrcodeImage)}return e}),t.contactMethods=a}catch(t){}e.data["contact.background"]&&(e.data["contact.background"].startsWith("http://")||e.data["contact.background"].startsWith("https://")?t.backgroundConfig.url=e.data["contact.background"]:e.data["contact.background"].startsWith("resourceStorage/")?t.backgroundConfig.url=t.$constant.baseURL+"/"+e.data["contact.background"]:t.backgroundConfig.url=t.$constant.baseURL+"/resourceStorage/"+e.data["contact.background"])}}).catch(function(e){t.$message.error("åŠ è½½é…ç½®å¤±è´¥:"+e.message)})},loadContactConfigAdmin:function(){var t=this;this.$http.get(this.$constant.baseURL+"/admin/sysConfig/listConfig",{},!0).then(function(e){if(!t.$common.isEmpty(e.data)){var o=e.data.find(function(t){return"contact.methods"===t.configKey}),a=e.data.find(function(t){return"contact.background"===t.configKey});if(o)try{var i=JSON.parse(o.configValue);i=i.map(function(e){if(e.qrcodeImage){if(e.qrcodeImage.startsWith("http://")||e.qrcodeImage.startsWith("https://"))return e;e.qrcodeImage.startsWith("resourceStorage/")||(e.qrcodeImage="/resourceStorage/"+e.qrcodeImage),e.qrcodeImage.startsWith(t.$constant.baseURL)||(e.qrcodeImage=t.$constant.baseURL+e.qrcodeImage)}return e}),t.contactMethods=i}catch(t){}a&&(a.configValue.startsWith("http://")||a.configValue.startsWith("https://")?t.backgroundConfig.url=a.configValue:a.configValue.startsWith("resourceStorage/")?t.backgroundConfig.url=t.$constant.baseURL+"/"+a.configValue:t.backgroundConfig.url=t.$constant.baseURL+"/resourceStorage/"+a.configValue)}}).catch(function(t){})},getMethodLabel:function(t){var e=this.supportedMethods.find(function(e){return e.key===t});return e?e.label:t},getMethodDescription:function(t){return{email:"ç”µå­é‚®ç®±åœ°å€ï¼ˆå¦‚ï¼šadmin@example.comï¼‰",phone:"ç”µè¯å·ç ï¼ˆå¦‚ï¼š+86 13800138000ï¼‰",wechat:"WeChat ID",qq:"QQå·ç ",github:"GitHubä¸ªäººä¸»é¡µURLï¼ˆå¦‚ï¼šhttps://github.com/usernameï¼‰",gitee:"Giteeä¸ªäººä¸»é¡µURLï¼ˆå¦‚ï¼šhttps://gitee.com/usernameï¼‰",facebook:"Facebookä¸ªäººä¸»é¡µURL",bilibili:"Bç«™ä¸ªäººä¸»é¡µURL",csdn:"CSDNä¸ªäººä¸»é¡µURL",zhihu:"çŸ¥ä¹ä¸ªäººä¸»é¡µURL",wechat_official:"å¾®ä¿¡å…¬ä¼—å·äºŒç»´ç ï¼ˆä¸Šä¼ å›¾ç‰‡ï¼‰",weibo:"å¾®åšä¸ªäººä¸»é¡µURL",twitter:"Twitterä¸ªäººä¸»é¡µURL",telegram:"Telegramä¸ªäººä¸»é¡µURL",instagram:"Instagramä¸ªäººä¸»é¡µURL",linkedin:"LinkedInä¸ªäººä¸»é¡µURL"}[t]||""},getMethodPlaceholder:function(t){return this.getMethodDescription(t)},isQRCodeType:function(t){var e=this.supportedMethods.find(function(e){return e.key===t});return e&&"qrcode"===e.type},showAddDialog:function(){this.resetForm(),this.isEditing=!1,this.showDialog=!0},editMethod:function(t){this.currentMethod=JSON.parse(JSON.stringify(t)),this.isEditing=!0,this.editingMethod=t,this.showDialog=!0},deleteMethod:function(t){var e=this;this.$confirm("ç¡®å®šåˆ é™¤è¯¥è”ç³»æ–¹å¼å—ï¼Ÿ","æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then(function(){e.contactMethods.splice(t,1),e.$message.success("åˆ é™¤æˆåŠŸ")})},saveMethod:function(){var t=this;this.$refs.methodForm.validate(function(e){if(e){if(t.isEditing){var o=t.contactMethods.findIndex(function(e){return e.method===t.editingMethod.method});-1!==o&&t.$set(t.contactMethods,o,t.currentMethod)}else{if(t.contactMethods.find(function(e){return e.method===t.currentMethod.method}))return void t.$message.error("è¯¥è”ç³»æ–¹å¼å·²å­˜åœ¨");t.contactMethods.push(t.currentMethod)}t.showDialog=!1,t.$message.success(t.isEditing?"æ›´æ–°æˆåŠŸ":"æ·»åŠ æˆåŠŸ")}})},resetForm:function(){this.currentMethod={method:"",value:"",displayValue:"",visible:!0,qrcodeImage:""},this.$refs.methodForm&&this.$refs.methodForm.clearValidate()},onQRCodeUpload:function(t){this.currentMethod.qrcodeImage=t},getFullImageUrl:function(t){return t?(t.startsWith("http")||(t.startsWith("/resourceStorage/")||t.startsWith("resourceStorage/")||(t=t.startsWith("/")?"resourceStorage"+t:"resourceStorage/"+t),t.startsWith(this.$constant.baseURL)||(t=this.$constant.baseURL+"/"+t)),t):""},saveAllConfig:function(){var t=this;this.saving=!0;var e=[{configKey:"contact.methods",configName:"è”ç³»æ–¹å¼",configValue:JSON.stringify(this.contactMethods),configType:"2"},{configKey:"contact.background",configName:"è”ç³»é¡µèƒŒæ™¯å›¾",configValue:this.backgroundConfig.url,configType:"2"}];this.$http.post(this.$constant.baseURL+"/admin/sysConfig/batchSaveConfig",e,!0).then(function(e){t.saving=!1,t.$message.success("é…ç½®ä¿å­˜æˆåŠŸï¼"),t.$http.get(t.$constant.baseURL+"/sysConfig/listSysConfig").then(function(e){t.$common.isEmpty(e.data)||t.$store.commit("loadSysConfig",e.data)}).catch(function(t){})}).catch(function(e){t.saving=!1,t.$message.error("ä¿å­˜å¤±è´¥:"+(e.message||"æœªçŸ¥é”™è¯¯"))})},resetConfig:function(){var t=this;this.$confirm("ç¡®å®šé‡ç½®æ‰€æœ‰é…ç½®å—ï¼Ÿ","æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then(function(){t.loadContactConfig(),t.$message.success("å·²é‡ç½®é…ç½®")})}}},i=a,n=(o("769f"),o("2877")),r=Object(n.a)(i,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"contact-manage"},[t.editingMethod?t._e():o("el-card",{attrs:{shadow:"hover"}},[o("div",{attrs:{slot:"header"},slot:"header"},[o("span",[t._v("ğŸ“§ è”ç³»æ–¹å¼ç®¡ç†")]),o("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:t.showAddDialog}},[t._v("æ·»åŠ è”ç³»æ–¹å¼")])],1),o("div",{staticClass:"config-section"},[o("h4",[t._v("ğŸ“¸ è”ç³»é¡µèƒŒæ™¯å›¾é…ç½®")]),o("el-form",{attrs:{model:t.backgroundConfig,"label-width":"150px"}},[o("el-form-item",{attrs:{label:"èƒŒæ™¯å›¾é¢„è§ˆ"}},[t.backgroundConfig.url?o("div",{staticClass:"background-preview"},[o("el-image",{staticStyle:{width:"100%","max-width":"600px",height:"300px","border-radius":"8px"},attrs:{src:t.getFullImageUrl(t.backgroundConfig.url),fit:"cover"}},[o("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[o("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"48px",color:"#ccc"}}),o("p",{staticStyle:{color:"#999","margin-top":"10px"}},[t._v("å›¾ç‰‡åŠ è½½å¤±è´¥")])])])],1):o("div",{staticClass:"no-image"},[o("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"48px",color:"#ccc"}}),o("p",{staticStyle:{color:"#999","margin-top":"10px"}},[t._v("æš‚æ— èƒŒæ™¯å›¾")])]),o("div",{staticClass:"tips",staticStyle:{"margin-top":"10px"}},[o("i",{staticClass:"el-icon-info"}),o("span",[t._v("é»˜è®¤è·¯å¾„: /resourceStorage/contact-background/contact-background.jpg")])]),o("div",{staticClass:"tips",staticStyle:{"margin-top":"5px"}},[o("i",{staticClass:"el-icon-warning"}),o("span",[t._v("å¦‚éœ€æ›´æ¢èƒŒæ™¯å›¾ï¼Œè¯·ç›´æ¥æ›¿æ¢æœåŠ¡å™¨ä¸Šçš„å›¾ç‰‡æ–‡ä»¶")])])])],1)],1),o("el-divider"),o("div",{staticClass:"methods-section"},[o("h4",[t._v("ğŸ”— å·²é…ç½®çš„è”ç³»æ–¹å¼")]),o("el-table",{attrs:{data:t.contactMethods,border:""}},[o("el-table-column",{attrs:{prop:"method",label:"ç±»å‹",width:"120",formatter:function(e){return t.getMethodLabel(e.method)}}}),o("el-table-column",{attrs:{prop:"value",label:"å€¼","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.value)+" ")]}}],null,!1,4272015574)}),o("el-table-column",{attrs:{prop:"displayValue",label:"æ˜¾ç¤ºå€¼","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.displayValue||"é»˜è®¤")+" ")]}}],null,!1,921410256)}),o("el-table-column",{attrs:{prop:"visible",label:"æ˜¾ç¤º",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-tag",{attrs:{type:!1!==e.row.visible?"success":"danger"}},[t._v(" "+t._s(!1!==e.row.visible?"æ˜¯":"å¦")+" ")])]}}],null,!1,550223673)}),o("el-table-column",{attrs:{label:"æ“ä½œ",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(o){return t.editMethod(e.row)}}},[t._v("ç¼–è¾‘")]),o("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(o){return t.deleteMethod(e.$index)}}},[t._v("åˆ é™¤")])]}}],null,!1,3717416208)})],1)],1),o("div",{staticClass:"config-actions",staticStyle:{"margin-top":"20px"}},[o("el-button",{attrs:{type:"primary",loading:t.saving},on:{click:t.saveAllConfig}},[o("i",{staticClass:"el-icon-check"}),t._v(" ä¿å­˜é…ç½® ")]),o("el-button",{on:{click:t.resetConfig}},[o("i",{staticClass:"el-icon-refresh-left"}),t._v(" é‡ç½® ")])],1)],1),o("el-dialog",{attrs:{title:t.isEditing?"ç¼–è¾‘è”ç³»æ–¹å¼":"æ·»åŠ è”ç³»æ–¹å¼",visible:t.showDialog,width:"600px"},on:{"update:visible":function(e){t.showDialog=e},close:t.resetForm}},[o("el-form",{ref:"methodForm",attrs:{model:t.currentMethod,rules:t.formRules,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"è”ç³»æ–¹å¼",prop:"method"}},[o("el-select",{attrs:{placeholder:"é€‰æ‹©è”ç³»æ–¹å¼",disabled:t.isEditing},model:{value:t.currentMethod.method,callback:function(e){t.$set(t.currentMethod,"method",e)},expression:"currentMethod.method"}},t._l(t.methodOptions,function(e){return o("el-option-group",{key:e.label,attrs:{label:e.label}},t._l(e.options,function(e){return o("el-option",{key:e.key,attrs:{label:e.label,value:e.key}},[o("span",{staticStyle:{color:"item.color"}},[o("i",{class:e.icon}),t._v(" "+t._s(e.label)+" ")])])}),1)}),1)],1),o("el-form-item",{attrs:{label:"è”ç³»ä¿¡æ¯",prop:"value"}},[o("el-input",{attrs:{placeholder:t.getMethodPlaceholder(t.currentMethod.method)},model:{value:t.currentMethod.value,callback:function(e){t.$set(t.currentMethod,"value",e)},expression:"currentMethod.value"}}),o("div",{staticClass:"tips",staticStyle:{"margin-top":"10px"}},[t._v(" "+t._s(t.getMethodDescription(t.currentMethod.method))+" ")])],1),t.isQRCodeType(t.currentMethod.method)?o("el-form-item",{attrs:{label:"äºŒç»´ç å›¾ç‰‡",prop:"qrcodeImage"}},[t.currentMethod.qrcodeImage?o("div",{staticClass:"qrcode-preview"},[o("el-image",{staticStyle:{"max-width":"150px","max-height":"150px"},attrs:{src:t.getFullImageUrl(t.currentMethod.qrcodeImage)}}),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text",size:"small",icon:"el-icon-delete"},on:{click:function(e){t.currentMethod.qrcodeImage=""}}},[t._v("åˆ é™¤")])],1):o("uploadPicture",{attrs:{prefix:"contact-qrcode-"+t.currentMethod.method},on:{addPicture:t.onQRCodeUpload}})],1):t._e(),o("el-form-item",{attrs:{label:"æ˜¾ç¤ºåç§°",prop:"displayValue"}},[o("el-input",{attrs:{placeholder:"ç•™ç©ºåˆ™æ˜¾ç¤ºé»˜è®¤å€¼ï¼ˆå¦‚ï¼šyour-email@example.comï¼‰"},model:{value:t.currentMethod.displayValue,callback:function(e){t.$set(t.currentMethod,"displayValue",e)},expression:"currentMethod.displayValue"}}),o("div",{staticClass:"tips",staticStyle:{"margin-top":"10px"}},[t._v(" éšè—çœŸå®ä¿¡æ¯ï¼Œæ˜¾ç¤ºç»™è®¿å®¢çš„å€¼ï¼ˆä¾‹å¦‚ï¼šéšè—é‚®ç®±åç¼€ï¼‰ ")])],1),o("el-form-item",{attrs:{label:"æ˜¯å¦æ˜¾ç¤º",prop:"visible"}},[o("el-switch",{model:{value:t.currentMethod.visible,callback:function(e){t.$set(t.currentMethod,"visible",e)},expression:"currentMethod.visible"}}),o("span",{staticStyle:{"margin-left":"10px",color:"#999"}},[t._v("å¦‚æœå…³é—­ï¼Œæ­¤è”ç³»æ–¹å¼ä¸ä¼šæ˜¾ç¤ºåœ¨é¡µé¢ä¸Š")])],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.showDialog=!1}}},[t._v("å– æ¶ˆ")]),o("el-button",{attrs:{type:"primary"},on:{click:t.saveMethod}},[t._v("ç¡® å®š")])],1)],1)],1)},[],!1,null,"3d4f9049",null);e.default=r.exports}}]);