(window.webpackJsonp=window.webpackJsonp||[]).push([["message~16258d72"],{"16c2":function(t,e,s){"use strict";s.r(e);var a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-image",{staticClass:"background-image",staticStyle:{animation:"header-effect 2s"},attrs:{lazy:"",src:t.$store.state.webInfo.treeHoleBgImage||t.$store.state.webInfo.randomCover[Math.floor(Math.random()*t.$store.state.webInfo.randomCover.length)],fit:"cover"}},[s("div",{staticClass:"image-slot background-image-error",attrs:{slot:"error"},slot:"error"})])}],n={components:{comment:(s("d3b7"),s("3ca3"),s("ddb0"),s("159b"),s("498a"),function(){return s.e("chunk-2d209ab9").then(s.bind(null,"79f0"))}),myFooter:function(){return s.e("chunk-d55226c4").then(s.bind(null,"68e4"))}},data:function(){return{show:!1,messageContent:"",barrageList:[]}},created:function(){this.getTreeHole()},methods:{getTreeHole:function(){var t=this;this.$http.get(this.$constant.baseURL+"/webInfo/listTreeHole").then(function(e){t.$common.isEmpty(e.data)||e.data.forEach(function(e){t.barrageList.push({id:e.id,avatar:e.avatar,msg:e.message,time:Math.floor(5*Math.random()+10)})})}).catch(function(e){t.$message({message:e.message,type:"error"})})},submitMessage:function(){var t=this;if(""!==this.messageContent.trim()){var e={message:this.messageContent.trim()};this.$common.isEmpty(this.$store.state.currentUser)||this.$common.isEmpty(this.$store.state.currentUser.avatar)||(e.avatar=this.$store.state.currentUser.avatar),this.$http.post(this.$constant.baseURL+"/webInfo/saveTreeHole",e).then(function(e){t.$common.isEmpty(e.data)||t.barrageList.push({id:e.data.id,avatar:e.data.avatar,msg:e.data.message,time:Math.floor(5*Math.random()+10)})}).catch(function(e){t.$message({message:e.message,type:"error"})}),this.messageContent="",this.show=!1}else this.$message({message:"你还没写呢~",type:"warning"})}}},o=n,r=(s("fa71"),s("2877")),i=Object(r.a)(o,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",[t._m(0),s("div",{staticClass:"message-in",staticStyle:{"text-align":"center"}},[s("h2",{staticClass:"message-title"},[t._v("树洞")]),s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.messageContent,expression:"messageContent"}],staticClass:"message-input",staticStyle:{outline:"none",width:"70%"},attrs:{type:"text",placeholder:"留下点什么啦~",maxlength:"60"},domProps:{value:t.messageContent},on:{click:function(e){t.show=!0},input:function(e){e.target.composing||(t.messageContent=e.target.value)}}}),s("button",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"message-input",staticStyle:{"margin-left":"12px",cursor:"pointer",width:"20%"},on:{click:t.submitMessage}},[t._v("发射 ")])])]),s("div",{staticClass:"barrage-container"},[s("vue-baberrage",{attrs:{barrageList:t.barrageList,loop:!0}})],1)],1),s("div",{staticClass:"comment-wrap"},[s("div",{staticClass:"comment-content"},[s("comment",{attrs:{source:t.$constant.source,type:"message",userId:t.$constant.userId}})],1),s("myFooter")],1)])},a,!1,null,"4a4049f6",null);e.default=i.exports},a327:function(t,e,s){},fa71:function(t,e,s){"use strict";s("a327")}}]);