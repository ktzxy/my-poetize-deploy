(window.webpackJsonp=window.webpackJsonp||[]).push([["verify~c74f2af8"],{6419:function(t,a,s){"use strict";s.r(a);var e=s("5530"),o=(s("d3b7"),s("2ca0"),s("498a"),s("8a79"),{data:function(){return{redirect:this.$route.query.redirect,account:"",password:"",isLoading:!1,backgroundImage:""}},computed:{},created:function(){this.loadSysConfig(),this.loadWebInfo()},methods:{loadSysConfig:function(){var t=this;this.$http.get(this.$constant.baseURL+"/sysConfig/listSysConfig").then(function(a){a.data&&t.$store.commit("loadSysConfig",a.data)}).catch(function(t){}).finally(function(){t.$nextTick(function(){t.setBackgroundImage()})})},loadWebInfo:function(){var t=this;this.$http.get(this.$constant.baseURL+"/webInfo/getWebInfo").then(function(a){a.data&&t.$store.commit("loadWebInfo",a.data)}).catch(function(t){})},setBackgroundImage:function(){var t=localStorage.getItem("adminLoginBackground");if(t)this.backgroundImage=t;else{var a=this.$store.state.sysConfig;if(a&&void 0!==a.adminLoginBackground&&null!==a.adminLoginBackground&&""!==a.adminLoginBackground)if(a.adminLoginBackground.startsWith("http://")||a.adminLoginBackground.startsWith("https://"))this.backgroundImage=a.adminLoginBackground;else{var s=a["local.downloadUrl"]||a.webStaticResourcePrefix||this.$constant.baseURL;a.adminLoginBackground.startsWith("resourceStorage/")?this.backgroundImage=s+"/"+a.adminLoginBackground:this.backgroundImage=s+"/resourceStorage/"+a.adminLoginBackground}else{var e=this.$store.state.webInfo;e&&e.randomCover&&e.randomCover.length>0?this.backgroundImage=e.randomCover[Math.floor(Math.random()*e.randomCover.length)]:a&&a.webStaticResourcePrefix&&(this.backgroundImage=a.webStaticResourcePrefix+"assets/backgroundPicture.jpg")}}},login:function(){var t=this;if(this.$common.isEmpty(this.account)||this.$common.isEmpty(this.password))this.$message({message:"è¯·è¾“å…¥è´¦å·å’Œå¯†ç ï¼",type:"warning"});else{this.isLoading=!0;var a={account:this.account.trim(),password:this.$common.encrypt(this.password.trim()),isAdmin:!0};this.$http.post(this.$constant.baseURL+"/user/login",a,!0,!1).then(function(a){if(!t.$common.isEmpty(a.data)){localStorage.setItem("adminToken",a.data.accessToken);var s=Object(e.a)({},a.data);if(s.avatar&&"string"==typeof s.avatar){var o=t.$store.state.sysConfig["local.downloadUrl"]||t.$store.state.sysConfig.webStaticResourcePrefix;s.avatar.startsWith("http://")||s.avatar.startsWith("https://")||!o||(s.avatar.startsWith("resourceStorage/")?o.endsWith("/resourceStorage/")||o.endsWith("resourceStorage/")?s.avatar=o+s.avatar.substring(16):s.avatar=o+s.avatar:o.endsWith("/resourceStorage/")||o.endsWith("resourceStorage/")?s.avatar=o+s.avatar:s.avatar=o+"resourceStorage/"+s.avatar)}t.$store.commit("loadCurrentAdmin",s),t.$message({message:"ğŸ‰ ç™»å½•æˆåŠŸï¼",type:"success"}),t.account="",t.password="",setTimeout(function(){t.$router.push({path:t.redirect||"/welcome"})},500)}}).catch(function(a){t.$message({message:a.message||"ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥è´¦å·å¯†ç ",type:"error"})}).finally(function(){t.isLoading=!1})}}}}),i=o,n=(s("809a"),s("2877")),r=Object(n.a)(i,function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"verify-container"},[s("el-image",{staticClass:"verify-background",attrs:{lazy:"",src:t.backgroundImage,fit:"cover"}},[s("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[s("div",{staticClass:"default-background"})])]),s("div",{staticClass:"verify-wrapper myCenter"},[s("div",{staticClass:"verify-content"},[s("div",{staticClass:"avatar-container"},[s("el-avatar",{attrs:{size:80,src:t.$store.state.webInfo.avatar}}),s("div",{staticClass:"site-name"},[t._v(t._s(t.$store.state.webInfo.webName||"åå°ç®¡ç†"))])],1),s("h2",{staticClass:"verify-title"},[t._v("ğŸ” ç®¡ç†å‘˜ç™»å½•")]),s("div",{staticClass:"input-group"},[s("div",{staticClass:"input-wrapper"},[s("i",{staticClass:"el-icon-user input-icon"}),s("el-input",{attrs:{placeholder:"è¯·è¾“å…¥è´¦å·"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.login.apply(null,arguments)}},model:{value:t.account,callback:function(a){t.account=a},expression:"account"}})],1)]),s("div",{staticClass:"input-group"},[s("div",{staticClass:"input-wrapper"},[s("i",{staticClass:"el-icon-lock input-icon"}),s("el-input",{attrs:{type:"password",placeholder:"è¯·è¾“å…¥å¯†ç ","show-password":""},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.login.apply(null,arguments)}},model:{value:t.password,callback:function(a){t.password=a},expression:"password"}})],1)]),s("div",{staticClass:"button-group"},[s("el-button",{staticClass:"login-button",attrs:{type:"primary",loading:t.isLoading},on:{click:t.login}},[t.isLoading?t._e():s("span",[t._v("ğŸš€ ç«‹å³ç™»å½•")]),t._v('">ç™»å½•ä¸­...')])],1),s("div",{staticClass:"footer-links"},[s("router-link",{attrs:{to:"/"}},[t._v("â† è¿”å›é¦–é¡µ")]),s("span",{staticClass:"divider"},[t._v("|")]),s("router-link",{attrs:{to:"/user"}},[t._v("æ™®é€šç”¨æˆ·ç™»å½•")])],1)])])],1)},[],!1,null,"428abd0e",null);a.default=r.exports},"809a":function(t,a,s){"use strict";s("eea7")},eea7:function(t,a,s){}}]);