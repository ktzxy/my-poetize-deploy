(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-945dd5a8"],{"28ac":function(e,t,n){"use strict";n("5f39")},"5f39":function(e,t,n){},fca0:function(e,t,n){"use strict";n.r(t);var s=n("1da1"),i=(n("99af"),n("4d90"),n("d3b7"),n("25f0"),n("96cf"),{name:"VideoPlayer",props:{src:{type:String,required:!0},poster:{type:String,default:""},autoplay:{type:Boolean,default:!1},loop:{type:Boolean,default:!1},muted:{type:Boolean,default:!1},controls:{type:Boolean,default:!0}},data:function(){return{isPlaying:!1,isLoading:!1,isFullscreen:!1,showControls:!0,showVolumeSlider:!1,currentTime:0,duration:0,buffered:0,volume:100,playbackRate:1,isMuted:this.muted,controlsTimer:null,supportsPiP:document.pictureInPictureEnabled}},computed:{progress:function(){return this.duration>0?this.currentTime/this.duration*100:0},volumeIcon:function(){return this.isMuted||0===this.volume?"el-icon-turn-off-microphone":(this.volume,"el-icon-microphone")}},mounted:function(){this.initPlayer()},beforeDestroy:function(){this.cleanup()},methods:{initPlayer:function(){var e=this.$refs.videoPlayer;e&&(e.volume=this.volume/100,document.addEventListener("fullscreenchange",this.handleFullscreenChange),document.addEventListener("webkitfullscreenchange",this.handleFullscreenChange),this.$el.addEventListener("mousemove",this.handleMouseMove),this.$el.addEventListener("mouseleave",this.handleMouseLeave))},cleanup:function(){document.removeEventListener("fullscreenchange",this.handleFullscreenChange),document.removeEventListener("webkitfullscreenchange",this.handleFullscreenChange),this.controlsTimer&&clearTimeout(this.controlsTimer)},togglePlay:function(){var e=this.$refs.videoPlayer;e.paused?e.play():e.pause()},handleLoadedMetadata:function(){this.duration=this.$refs.videoPlayer.duration,this.isLoading=!1},handleTimeUpdate:function(){var e=this.$refs.videoPlayer;this.currentTime=e.currentTime,e.buffered.length>0&&(this.buffered=e.buffered.end(0)/e.duration*100)},handleEnded:function(){this.$emit("ended")},handleProgressClick:function(e){var t=e.currentTarget.getBoundingClientRect(),n=(e.clientX-t.left)/t.width,s=this.$refs.videoPlayer;s.currentTime=n*s.duration},toggleMute:function(){var e=this.$refs.videoPlayer;this.isMuted=!this.isMuted,e.muted=this.isMuted},handleVolumeChange:function(){this.$refs.videoPlayer.volume=this.volume/100,this.isMuted=0===this.volume},handleRateChange:function(e){var t=this.$refs.videoPlayer;this.playbackRate=parseFloat(e),t.playbackRate=this.playbackRate},togglePictureInPicture:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.$refs.videoPlayer,t.prev=1,!document.pictureInPictureElement){t.next=7;break}return t.next=5,document.exitPictureInPicture();case 5:t.next=9;break;case 7:return t.next=9,n.requestPictureInPicture();case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1);case 14:case"end":return t.stop()}},t,null,[[1,11]])}))()},toggleFullscreen:function(){var e=this.$el.querySelector(".video-container");document.fullscreenElement?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()},handleFullscreenChange:function(){this.isFullscreen=!!document.fullscreenElement||!!document.webkitFullscreenElement},handleMouseMove:function(){var e=this;this.showControls=!0,this.controlsTimer&&clearTimeout(this.controlsTimer),this.isPlaying&&(this.controlsTimer=setTimeout(function(){e.showControls=!1},3e3))},handleMouseLeave:function(){this.isPlaying&&(this.showControls=!1)},formatTime:function(e){if(!e||isNaN(e))return"00:00";var t=Math.floor(e/60),n=Math.floor(e%60);return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"))}}}),o=i,a=(n("28ac"),n("2877")),l=Object(a.a)(o,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"video-player-wrapper"},[n("div",{staticClass:"video-container",class:{fullscreen:e.isFullscreen}},[n("video",{ref:"videoPlayer",staticClass:"video-element",attrs:{src:e.src,poster:e.poster,autoplay:e.autoplay,loop:e.loop},domProps:{muted:e.muted},on:{loadedmetadata:e.handleLoadedMetadata,timeupdate:e.handleTimeUpdate,ended:e.handleEnded,play:function(t){e.isPlaying=!0},pause:function(t){e.isPlaying=!1},click:e.togglePlay}},[e._v(" 您的浏览器不支持视频播放 ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showControls,expression:"showControls"}],staticClass:"video-controls"},[n("button",{staticClass:"control-btn play-btn",on:{click:e.togglePlay}},[n("i",{class:e.isPlaying?"el-icon-video-pause":"el-icon-video-play"})]),n("div",{staticClass:"progress-container"},[n("div",{staticClass:"progress-bar",on:{click:e.handleProgressClick}},[n("div",{staticClass:"progress-played",style:{width:e.progress+"%"}},[n("div",{staticClass:"progress-thumb"})]),n("div",{staticClass:"progress-buffered",style:{width:e.buffered+"%"}})]),n("div",{staticClass:"time-display"},[n("span",[e._v(e._s(e.formatTime(e.currentTime)))]),n("span",[e._v("/")]),n("span",[e._v(e._s(e.formatTime(e.duration)))])])]),n("div",{staticClass:"volume-control"},[n("button",{staticClass:"control-btn",on:{click:e.toggleMute}},[n("i",{class:e.volumeIcon})]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showVolumeSlider,expression:"showVolumeSlider"}],staticClass:"volume-slider"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.volume,expression:"volume"}],staticClass:"volume-input",attrs:{type:"range",min:"0",max:"100"},domProps:{value:e.volume},on:{input:e.handleVolumeChange,__r:function(t){e.volume=t.target.value}}})])]),n("div",{staticClass:"playback-rate"},[n("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleRateChange}},[n("button",{staticClass:"control-btn"},[n("span",[e._v(e._s(e.playbackRate)+"x")])]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"0.5"}},[e._v("0.5x")]),n("el-dropdown-item",{attrs:{command:"0.75"}},[e._v("0.75x")]),n("el-dropdown-item",{attrs:{command:"1"}},[e._v("1x")]),n("el-dropdown-item",{attrs:{command:"1.25"}},[e._v("1.25x")]),n("el-dropdown-item",{attrs:{command:"1.5"}},[e._v("1.5x")]),n("el-dropdown-item",{attrs:{command:"2"}},[e._v("2x")])],1)],1)],1),e.supportsPiP?n("button",{staticClass:"control-btn",on:{click:e.togglePictureInPicture}},[n("i",{staticClass:"el-icon-picture-outline"})]):e._e(),n("button",{staticClass:"control-btn fullscreen-btn",on:{click:e.toggleFullscreen}},[n("i",{class:e.isFullscreen?"el-icon-close":"el-icon-full-screen"})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],staticClass:"loading-spinner"},[n("i",{staticClass:"el-icon-loading"})]),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.isPlaying&&!e.isLoading,expression:"!isPlaying && !isLoading"}],staticClass:"play-overlay",on:{click:e.togglePlay}},[n("i",{staticClass:"el-icon-video-play"})])])])},[],!1,null,"ec984662",null);t.default=l.exports}}]);