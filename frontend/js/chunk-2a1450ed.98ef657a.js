(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2a1450ed"],{da3f:function(t,e,n){},eb8f:function(t,e,n){"use strict";n.r(e);var a=n("3835"),r=n("1da1"),i=(n("4d90"),n("99af"),n("b64b"),n("d3b7"),n("498a"),n("ac1f"),n("1276"),n("d81d"),n("a9e3"),n("b680"),n("caad"),n("2532"),n("96cf"),{name:"DigitalClock",data:function(){return{time:{hours:"00",minutes:"00",seconds:"00",week:"星期日",date:"2025-12-23"},timer:null,locationInfo:"",weatherInfo:null,weatherTimer:null}},mounted:function(){var t=this;this.updateTime(),this.timer=setInterval(this.updateTime,1e3),this.$nextTick(function(){setTimeout(function(){t.getLocationAndWeather()},2e3)}),this.weatherTimer=setInterval(this.getLocationAndWeather,18e5)},beforeDestroy:function(){this.timer&&clearInterval(this.timer),this.weatherTimer&&clearInterval(this.weatherTimer)},methods:{fetchSysConfig:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark(function e(){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=(new Date).getTime(),e.next=4,t.$http.get(t.$constant.baseURL+"/sysConfig/listSysConfig?t="+n);case 4:if(!(a=e.sent)||!a.data){e.next=7;break}return e.abrupt("return",a.data);case 7:return e.abrupt("return",null);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",null);case 14:case"end":return e.stop()}},e,null,[[0,10]])}))()},updateTime:function(){var t=new Date;this.time.hours=String(t.getHours()).padStart(2,"0"),this.time.minutes=String(t.getMinutes()).padStart(2,"0"),this.time.seconds=String(t.getSeconds()).padStart(2,"0");this.time.week=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][t.getDay()];var e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0");this.time.date="".concat(e,"-").concat(n,"-").concat(a)},getLocationAndWeather:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark(function e(){var n,r,i,s,c,o,l,u,d,h,f,p,g,m,v,w,_,y,k,b,x,C,I,S,A,j,T,D,O,L,W,R;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(i=t.$store.state.sysConfig)&&0!==Object.keys(i).length){e.next=9;break}return e.next=5,t.fetchSysConfig();case 5:if((i=e.sent)&&0!==Object.keys(i).length){e.next=9;break}return setTimeout(function(){return t.getLocationAndWeather()},3e3),e.abrupt("return");case 9:if(s=i.gaud_map_key||i.gaud_map_key,c=i.qweather_key||i.qweather_key,o=i["electric_clock.default_rectangle"]||(null===(n=i.electric_clock)||void 0===n?void 0:n.default_rectangle),l=i["electric_clock.rectangle"]||(null===(r=i.electric_clock)||void 0===r?void 0:r.rectangle)||"116.405285,39.904989",s&&c){e.next=16;break}return t.locationInfo="",e.abrupt("return");case 16:if(u="",d="",!o){e.next=29;break}return d=l,e.next=22,fetch("https://restapi.amap.com/v3/geocode/regeo?key=".concat(s,"&location=").concat(l));case 22:return h=e.sent,e.next=25,h.json();case 25:"1"===(f=e.sent).status&&f.regeocode&&(p=f.regeocode.addressComponent,g=p.city,m=p.province,Array.isArray(g)&&(g=g.length>0?g[0]:""),Array.isArray(m)&&(m=m.length>0?m[0]:""),g=String(g||"").trim(),m=String(m||"").trim(),u=g||m||"北京市"),e.next=45;break;case 29:return e.next=31,fetch("https://restapi.amap.com/v3/ip?key=".concat(s));case 31:return v=e.sent,e.next=34,v.json();case 34:if("1"===(w=e.sent).status&&w.city&&(u=w.city,w.rectangle&&"string"==typeof w.rectangle&&(2===(_=w.rectangle.split(";")).length&&(y=_[0].split(",").map(Number),k=Object(a.a)(y,2),b=k[0],x=k[1],C=_[1].split(",").map(Number),I=Object(a.a)(C,2),S=I[0],A=I[1],d="".concat((b+S)/2,",").concat((x+A)/2)))),d){e.next=45;break}return d=l,e.next=40,fetch("https://restapi.amap.com/v3/geocode/regeo?key=".concat(s,"&location=").concat(l));case 40:return j=e.sent,e.next=43,j.json();case 43:"1"===(T=e.sent).status&&T.regeocode&&(D=T.regeocode.addressComponent,O=D.city,L=D.province,Array.isArray(O)&&(O=O.length>0?O[0]:""),Array.isArray(L)&&(L=L.length>0?L[0]:""),O=String(O||"").trim(),L=String(L||"").trim(),u=O||L||"北京市");case 45:if(!u){e.next=55;break}if(t.locationInfo=u,!d){e.next=55;break}return e.next=50,fetch("https://devapi.qweather.com/v7/weather/now?location=".concat(d,"&key=").concat(c));case 50:return W=e.sent,e.next=53,W.json();case 53:"200"===(R=e.sent).code&&R.now&&(t.weatherInfo={text:R.now.text,temp:R.now.temp,humidity:R.now.humidity,windDir:R.now.windDir,windScale:R.now.windScale});case 55:e.next=61;break;case 57:e.prev=57,e.t0=e.catch(0),t.locationInfo="获取失败";case 61:case"end":return e.stop()}},e,null,[[0,57]])}))()},getFallbackLocation:function(){var t=this;navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){t.locationInfo="".concat(e.coords.latitude.toFixed(2),"°N, ").concat(e.coords.longitude.toFixed(2),"°E")},function(){t.locationInfo="未知位置"})},getWeatherIcon:function(t){var e={"晴":"el-icon-sunny","多云":"el-icon-cloudy","阴":"el-icon-cloudy","雨":"el-icon-heavy-rain","雪":"el-icon-cold","雷":"el-icon-lightning"};for(var n in e)if(t&&t.includes(n))return e[n];return"el-icon-partly-cloudy"}}}),s=i,c=(n("ec69"),n("2877")),o=Object(c.a)(s,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"digital-clock"},[n("div",{staticClass:"clock-display"},[t.locationInfo?n("div",{staticClass:"welcome-text"},[n("i",{staticClass:"el-icon-location-outline"}),t._v(" 欢迎来自 "),n("span",{staticClass:"location-name"},[t._v(t._s(t.locationInfo))]),t._v(" 的朋友！ ")]):t._e(),n("div",{staticClass:"time"},[n("span",{staticClass:"hour"},[t._v(t._s(t.time.hours))]),n("span",{staticClass:"separator"},[t._v(":")]),n("span",{staticClass:"minute"},[t._v(t._s(t.time.minutes))]),n("span",{staticClass:"separator"},[t._v(":")]),n("span",{staticClass:"second"},[t._v(t._s(t.time.seconds))])]),n("div",{staticClass:"date"},[n("span",{staticClass:"week"},[t._v(t._s(t.time.week))]),n("span",{staticClass:"date-text"},[t._v(t._s(t.time.date))])]),t.weatherInfo?n("div",{staticClass:"weather-info"},[n("div",{staticClass:"weather-main"},[n("i",{class:t.getWeatherIcon(t.weatherInfo.text)}),n("span",{staticClass:"weather-text"},[t._v(t._s(t.weatherInfo.text))]),n("span",{staticClass:"weather-temp"},[t._v(t._s(t.weatherInfo.temp)+"°C")])]),n("div",{staticClass:"weather-detail"},[n("span",[t._v("湿度: "+t._s(t.weatherInfo.humidity)+"%")]),n("span",[t._v(t._s(t.weatherInfo.windDir)+" "+t._s(t.weatherInfo.windScale)+"级")])])]):t._e()])])},[],!1,null,"0a9b0d77",null);e.default=o.exports},ec69:function(t,e,n){"use strict";n("da3f")}}]);