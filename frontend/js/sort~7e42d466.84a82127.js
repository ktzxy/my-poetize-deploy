(window.webpackJsonp=window.webpackJsonp||[]).push([["sort~7e42d466"],{"03ab":function(t,e,i){},"56f9":function(t,e,i){"use strict";i("03ab")},6499:function(t,e,i){"use strict";i.r(e);var r=i("5530"),s={components:{twoPoem:(i("d3b7"),i("3ca3"),i("ddb0"),i("7db0"),i("a434"),i("4d90"),i("99af"),i("4de4"),i("4e82"),i("159b"),i("d81d"),i("2ca0"),i("8a79"),i("caad"),i("2532"),function(){return i.e("chunk-bf5e9b92").then(i.bind(null,"0223"))}),proTag:function(){return i.e("chunk-52863968").then(i.bind(null,"2c18"))},articleList:function(){return i.e("chunk-fdf34c50").then(i.bind(null,"b263"))},myFooter:function(){return i.e("chunk-d55226c4").then(i.bind(null,"68e4"))}},data:function(){return{sortId:this.$route.query.sortId,labelId:this.$route.query.labelId,sort:null,pagination:{current:1,size:10,total:0,searchKey:"",sortId:this.$route.query.sortId,labelId:this.$route.query.labelId},articles:[],timeFilter:"",sortType:"time"}},computed:{firstArticleCover:function(){if(this.articles&&Array.isArray(this.articles)&&this.articles.length>0){var t=this.articles.find(function(t){return t&&t.articleCover&&"string"==typeof t.articleCover});return t?t.articleCover:null}return null}},watch:{$route:function(){this.pagination={current:1,size:10,total:0,searchKey:"",sortId:this.$route.query.sortId,labelId:this.$route.query.labelId},this.articles.splice(0,this.articles.length),this.sortId=this.$route.query.sortId,this.labelId=this.$route.query.labelId,this.getSort(),this.getArticles()}},created:function(){this.getSort(),this.getArticles()},mounted:function(){},methods:{selectTimeFilter:function(t){this.timeFilter!==t&&(this.timeFilter=t,this.pagination.current=1,this.articles=[],this.getArticles())},selectSortType:function(t){this.sortType!==t&&(this.sortType=t,this.pagination.current=1,this.articles=[],this.getArticles())},resetFilters:function(){this.timeFilter="",this.sortType="time",this.pagination.current=1,this.articles=[],this.getArticles()},getTimeRange:function(){if(!this.timeFilter)return null;var t=new Date,e={week:7,month:30,quarter:90,year:365}[this.timeFilter];return function(t){var e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return"".concat(e,"-").concat(i,"-").concat(r)}(new Date(t.getTime()-24*e*60*60*1e3))},pageArticles:function(){this.pagination.current=this.pagination.current+1,this.getArticles()},getSort:function(){var t=this,e=this.$store.state.sortInfo;if(!this.$common.isEmpty(e)){var i=e.filter(function(e){return e.id===parseInt(t.sortId)});this.$common.isEmpty(i)||(this.sort=i[0])}},listArticle:function(t){var e=this;this.labelId=t.id,this.pagination={current:1,size:10,total:0,searchKey:"",sortId:this.$route.query.sortId,labelId:t.id},this.articles.splice(0,this.articles.length),this.$nextTick(function(){e.getArticles()})},getArticles:function(){var t=this,e=Object(r.a)(Object(r.a)({},this.pagination),{},{startDate:this.getTimeRange(),orderBy:this.sortType});this.$http.post(this.$constant.baseURL+"/article/listArticle",e).then(function(e){if(!t.$common.isEmpty(e.data)){var i=e.data.records;if("hot"===t.sortType?i=i.sort(function(t,e){return e.viewCount-t.viewCount}):"like"===t.sortType&&(i=i.sort(function(t,e){return e.likeCount-t.likeCount})),t.timeFilter){var r=t.getTimeRange();i=i.filter(function(t){return t.createTime>=r})}var s=t.processArticleCoverPaths(i),a=t.articles.length;s.forEach(function(e,i){t.$set(t.articles,a+i,e)}),t.pagination.total=e.data.total}}).catch(function(e){t.$message({message:e.message,type:"error"})})},processArticleCoverPaths:function(t){var e=this.$store.state.sysConfig["local.downloadUrl"]||this.$store.state.sysConfig.webStaticResourcePrefix;return e&&t&&Array.isArray(t)?t.map(function(t){if(t&&t.articleCover&&"string"==typeof t.articleCover&&!t.articleCover.startsWith("http://")&&!t.articleCover.startsWith("https://")){var i=e.endsWith("/"),r=e.includes("/resourceStorage")||e.includes("resourceStorage/");t.articleCover.startsWith("resourceStorage/")?t.articleCover=e+t.articleCover:(t.articleCover.startsWith("articleCover/"),t.articleCover=r?e+t.articleCover:e+(i?"":"/")+"resourceStorage/"+t.articleCover)}return t}):t}}},a=s,n=(i("56f9"),i("2877")),c=Object(n.a)(a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"my-animation-slide-top"},[t.firstArticleCover?i("div",{staticClass:"cover-container"},[i("img",{staticClass:"category-cover",attrs:{src:t.firstArticleCover,alt:"分类封面"}}),i("div",{staticClass:"cover-overlay"},[i("h1",{staticClass:"cover-title"},[t._v(t._s(t.sort.sortName))])])]):i("twoPoem")],1),i("div",{staticClass:"my-animation-slide-bottom",staticStyle:{background:"var(--background)","padding-top":"40px"}},[i("div",{staticClass:"filter-container shadow-box"},[i("div",{staticClass:"filter-section"},[i("div",{staticClass:"filter-title"},[i("svg",{staticStyle:{"vertical-align":"-2px","margin-right":"6px"},attrs:{viewBox:"0 0 1024 1024",width:"16",height:"16"}},[i("path",{attrs:{d:"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z",fill:"#409EFF"}}),i("path",{attrs:{d:"M654.222222 256c-17.066667 0-28.444444 11.377778-28.444444 28.444444v56.888889c0 17.066667 11.377778 28.444444 28.444444 28.444445s28.444444-11.377778 28.444445-28.444445v-56.888889c0-17.066667-11.377778-28.444444-28.444445-28.444444zM369.777778 256c-17.066667 0-28.444444 11.377778-28.444445 28.444444v56.888889c0 17.066667 11.377778 28.444444 28.444445 28.444445s28.444444-11.377778 28.444444-28.444445v-56.888889c0-17.066667-11.377778-28.444444-28.444444-28.444444z",fill:"#FFFFFF"}})]),t._v(" 时间筛选 ")]),i("div",{staticClass:"filter-time-options"},[i("span",{class:{active:""===t.timeFilter},on:{click:function(e){return t.selectTimeFilter("")}}},[t._v("全部")]),i("span",{class:{active:"week"===t.timeFilter},on:{click:function(e){return t.selectTimeFilter("week")}}},[t._v("近一周")]),i("span",{class:{active:"month"===t.timeFilter},on:{click:function(e){return t.selectTimeFilter("month")}}},[t._v("近一月")]),i("span",{class:{active:"quarter"===t.timeFilter},on:{click:function(e){return t.selectTimeFilter("quarter")}}},[t._v("近三月")]),i("span",{class:{active:"year"===t.timeFilter},on:{click:function(e){return t.selectTimeFilter("year")}}},[t._v("近一年")])])]),i("div",{staticClass:"filter-section"},[i("div",{staticClass:"filter-title"},[i("svg",{staticStyle:{"vertical-align":"-2px","margin-right":"6px"},attrs:{viewBox:"0 0 1024 1024",width:"16",height:"16"}},[i("path",{attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:"#FF9C55"}}),i("path",{attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.7-11.2z",fill:"#FFD977"}})]),t._v(" 排序方式 ")]),i("div",{staticClass:"filter-sort-options"},[i("span",{class:{active:"time"===t.sortType},on:{click:function(e){return t.selectSortType("time")}}},[i("i",{staticClass:"el-icon-time"}),t._v(" 最新发布 ")]),i("span",{class:{active:"hot"===t.sortType},on:{click:function(e){return t.selectSortType("hot")}}},[i("i",{staticClass:"el-icon-star-on"}),t._v(" 最热门 ")]),i("span",{class:{active:"like"===t.sortType},on:{click:function(e){return t.selectSortType("like")}}},[i("i",{staticClass:"el-icon-thumb"}),t._v(" 最多点赞 ")])])]),i("div",{staticClass:"filter-stats"},[i("span",[i("i",{staticClass:"el-icon-document"}),t._v(" 共 "+t._s(t.pagination.total)+" 篇文章")]),t.timeFilter||"time"!==t.sortType?i("span",[i("i",{staticClass:"el-icon-refresh"}),i("a",{staticStyle:{cursor:"pointer",color:"var(--themeBackground)"},on:{click:t.resetFilters}},[t._v("重置筛选")])]):t._e()])]),t.$common.isEmpty(t.sort)||t.$common.isEmpty(t.sort.labels)?t._e():i("div",{staticClass:"sort-warp shadow-box"},t._l(t.sort.labels,function(e,r){return i("div",{key:r,class:{isActive:!t.$common.isEmpty(t.labelId)&&parseInt(t.labelId)===e.id},on:{click:function(i){return t.listArticle(e)}}},[i("proTag",{staticStyle:{margin:"12px"},attrs:{info:e.labelName+" "+e.countOfLabel,color:t.$constant.before_color_list[Math.floor(6*Math.random())]}})],1)}),0),i("div",{staticClass:"article-wrap"},[i("articleList",{attrs:{articleList:t.articles}}),i("div",{staticClass:"pagination-wrap"},[t.pagination.total!==t.articles.length?i("div",{staticClass:"pagination",on:{click:function(e){return t.pageArticles()}}},[t._v(" 下一页 ")]):i("div",{staticStyle:{"user-select":"none"}},[t._v(" ~~到底啦~~ ")])])],1),i("myFooter")],1)])},[],!1,null,"cb4ab560",null);e.default=c.exports}}]);