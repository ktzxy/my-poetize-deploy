(window.webpackJsonp=window.webpackJsonp||[]).push([["app~5a11b65b"],{"1cc7":function(e,t,n){"use strict";n("1da1"),n("96cf"),n("99af"),n("e9c4"),n("ac1f"),n("00b4"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("d9e2")},2007:function(e,t,n){"use strict";var r=n("5530"),a=n("3835"),o=n("b85c"),i=n("d4ec"),c=n("bee2"),s=(n("4d90"),n("99af"),n("d3b7"),n("159b"),n("b64b"),n("d81d"),n("ac1f"),n("1276"),n("a9e3"),n("fb6a"),n("4e82"),function(){function e(){Object(i.a)(this,e),this.holidays=this.initHolidays(),this.currentHoliday=null}return Object(c.a)(e,[{key:"initHolidays",value:function(){return[{id:"new_year",name:"元旦",startDate:"01-01",endDate:"01-03",theme:{primary:"#ff6b6b",secondary:"#ffd93d",accent:"#6bcf7f",background:"#fff5f5",name:"新年主题"},effects:["fireworks","snow"]},{id:"spring_festival",name:"春节",dateRange:"lunar",lunarDate:"1-1",duration:7,theme:{primary:"#e63946",secondary:"#f77f00",accent:"#ffb703",background:"#fff8f0",name:"春节主题"},effects:["fireworks","lanterns","red_packets"]},{id:"valentines",name:"情人节",startDate:"02-14",endDate:"02-14",theme:{primary:"#ff006e",secondary:"#fb5607",accent:"#ff85a2",background:"#fff0f6",name:"情人节主题"},effects:["hearts","roses"]},{id:"womens_day",name:"妇女节",startDate:"03-08",endDate:"03-08",theme:{primary:"#f72585",secondary:"#b5179e",accent:"#7209b7",background:"#fff5fb",name:"妇女节主题"},effects:["flowers"]},{id:"qingming",name:"清明节",dateRange:"solar",solarTerm:"qingming",theme:{primary:"#8ac926",secondary:"#52b788",accent:"#95d5b2",background:"#f8fff8",name:"清明主题"},effects:["willow","rain"]},{id:"labor_day",name:"劳动节",startDate:"05-01",endDate:"05-03",theme:{primary:"#ff4d6d",secondary:"#ffb703",accent:"#06d6a0",background:"#fffbf0",name:"劳动节主题"},effects:[]},{id:"childrens_day",name:"儿童节",startDate:"06-01",endDate:"06-01",theme:{primary:"#4cc9f0",secondary:"#f72585",accent:"#ffd93d",background:"#f0fbff",name:"儿童节主题"},effects:["balloons","candy"]},{id:"mid_autumn",name:"中秋节",dateRange:"lunar",lunarDate:"8-15",duration:1,theme:{primary:"#ffb703",secondary:"#fb8500",accent:"#ffd60a",background:"#fffef0",name:"中秋主题"},effects:["moon","lanterns"]},{id:"national_day",name:"国庆节",startDate:"10-01",endDate:"10-07",theme:{primary:"#e63946",secondary:"#ffba08",accent:"#f77f00",background:"#fff5f0",name:"国庆主题"},effects:["flag","fireworks"]},{id:"halloween",name:"万圣节",startDate:"10-31",endDate:"10-31",theme:{primary:"#ff6d00",secondary:"#8338ec",accent:"#3a0ca3",background:"#fff8f0",name:"万圣节主题"},effects:["pumpkin","ghost","bats"]},{id:"christmas",name:"圣诞节",startDate:"12-24",endDate:"12-26",theme:{primary:"#c9184a",secondary:"#06a77d",accent:"#ffd60a",background:"#fff5f5",name:"圣诞主题"},effects:["snow","santa","tree"]}]}},{key:"checkCurrentHoliday",value:function(){var e,t=new Date,n=this.formatDate(t),r=Object(o.a)(this.holidays);try{for(r.s();!(e=r.n()).done;){var a=e.value;if(this.isHolidayActive(a,t,n))return this.currentHoliday=a,a}}catch(e){r.e(e)}finally{r.f()}return this.currentHoliday=null,null}},{key:"isHolidayActive",value:function(e,t,n){if("lunar"===e.dateRange)return!1;if("solar"===e.dateRange)return!1;var r=e.startDate,a=e.endDate;return n>=r&&n<=a}},{key:"formatDate",value:function(e){var t=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n)}},{key:"getCurrentTheme",value:function(){var e=this.checkCurrentHoliday();return e?e.theme:null}},{key:"applyHolidayTheme",value:function(){var e=this.getCurrentTheme();if(!e)return!1;var t=document.documentElement;return Object.keys(e).forEach(function(n){"name"!==n&&t.style.setProperty("--".concat(n),e[n])}),this.currentHoliday&&this.currentHoliday.effects&&this.applyEffects(this.currentHoliday.effects),!0}},{key:"applyEffects",value:function(e){var t=this;e.forEach(function(e){switch(e){case"snow":t.createSnowEffect();break;case"fireworks":t.createFireworksEffect();break;case"hearts":t.createHeartsEffect();break;case"sakura":t.createSakuraEffect()}})}},{key:"createSnowEffect",value:function(){var e=document.createElement("div");e.className="snow-container",e.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      pointer-events: none;\n      z-index: 9999;\n    ";for(var t=0;t<50;t++){var n=document.createElement("div");n.innerHTML="❄",n.style.cssText="\n        position: absolute;\n        top: -20px;\n        left: ".concat(100*Math.random(),"%;\n        font-size: ").concat(10*Math.random()+10,"px;\n        opacity: ").concat(.5*Math.random()+.3,";\n        animation: fall ").concat(3*Math.random()+2,"s linear infinite;\n        animation-delay: ").concat(2*Math.random(),"s;\n      "),e.appendChild(n)}var r=document.createElement("style");r.textContent="\n      @keyframes fall {\n        to {\n          transform: translateY(100vh) rotate(360deg);\n        }\n      }\n    ",document.head.appendChild(r),document.body.appendChild(e)}},{key:"createFireworksEffect",value:function(){}},{key:"createHeartsEffect",value:function(){}},{key:"createSakuraEffect",value:function(){}},{key:"clearEffects",value:function(){document.querySelectorAll(".snow-container, .fireworks-container, .hearts-container").forEach(function(e){return e.remove()})}},{key:"getAllHolidays",value:function(){return this.holidays}},{key:"getUpcomingHolidays",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=new Date,n=[];return this.holidays.forEach(function(e){if("lunar"!==e.dateRange&&"solar"!==e.dateRange){var o=e.startDate.split("-").map(Number),i=Object(a.a)(o,2),c=i[0],s=i[1],u=new Date(t.getFullYear(),c-1,s);u>t&&n.push(Object(r.a)(Object(r.a)({},e),{},{daysUntil:Math.ceil((u-t)/864e5)}))}}),n.sort(function(e,t){return e.daysUntil-t.daysUntil}).slice(0,e)}}]),e}());t.a=s},4998:function(e,t){var n,r=document.title;document.addEventListener("visibilitychange",function(){document.hidden?(document.title="w(ﾟДﾟ)w 不要走！再看看嘛！",clearTimeout(n)):(document.title="♪(^∇^*)欢迎肥来！",n=setTimeout(function(){document.title=r},2e3))})},"56d7":function(e,t,n){"use strict";n.r(t),n("0fae");var r=n("9e2f"),a=n.n(r),o=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),i=n("3dfd"),c=(n("d3b7"),n("3ca3"),n("ddb0"),n("b0c0"),n("8c4f")),s=c.a.prototype.push;c.a.prototype.push=function(e){return s.call(this,e).catch(function(e){return e})},o.default.use(c.a);var u=[{path:"/landing",name:"landing",component:function(){return n.e("landing~847ed95a").then(n.bind(null,"4925"))}},{path:"/",redirect:"/landing"},{path:"/home",component:function(){return Promise.all([n.e("chunk-commons~31ecd969"),n.e("home~21833f8f")]).then(n.bind(null,"c3b0"))},children:[{path:"/",name:"index",component:function(){return Promise.all([n.e("chunk-commons~31ecd969"),n.e("index~21833f8f")]).then(n.bind(null,"6e78"))}},{path:"/sort",name:"sort",component:function(){return Promise.all([n.e("chunk-commons~31ecd969"),n.e("sort~7e42d466")]).then(n.bind(null,"6499"))}},{path:"/article/:id",name:"article",component:function(){return Promise.all([n.e("chunk-markdown~00c385fd"),n.e("chunk-markdown~18c029cd"),n.e("chunk-commons~31ecd969"),n.e("article~31ecd969")]).then(n.bind(null,"d31b"))}},{path:"/weiYan",name:"weiYan",component:function(){return n.e("weiyan~68e90b2d").then(n.bind(null,"1099"))}},{path:"/jotting",name:"jotting",component:function(){return n.e("jotting~eda05df5").then(n.bind(null,"da4b"))}},{path:"/love",name:"love",component:function(){return n.e("love~82f67309").then(n.bind(null,"a7d2"))}},{path:"/favorite",name:"favorite",component:function(){return n.e("favorite~eea7bfd9").then(n.bind(null,"9679"))}},{path:"/collection",name:"collection",component:function(){return n.e("collection~7dd62264").then(n.bind(null,"c47d"))}},{path:"/travel",name:"travel",component:function(){return n.e("travel~d503e975").then(n.bind(null,"9ead"))}},{path:"/message",name:"message",component:function(){return n.e("message~16258d72").then(n.bind(null,"16c2"))}},{path:"/about",name:"about",component:function(){return n.e("about~e3d5e500").then(n.bind(null,"3a34"))}},{path:"/user",name:"user",component:function(){return Promise.all([n.e("chunk-commons~31ecd969"),n.e("user~e05db47a")]).then(n.bind(null,"885a"))}},{path:"/notification",name:"notification",component:function(){return Promise.all([n.e("chunk-commons~31ecd969"),n.e("notification~b08be51a")]).then(n.bind(null,"75be"))}},{path:"/letter",name:"letter",component:function(){return n.e("letter~b4dbaeda").then(n.bind(null,"30b1"))}},{path:"/contact",name:"contact",component:function(){return n.e("contact~97f74a92").then(n.bind(null,"6180"))}}]},{path:"/admin",redirect:"/welcome",meta:{requiresAuth:!0,requiresAdmin:!0},component:function(){return n.e("admin~159bcbe4").then(n.bind(null,"75a7"))},children:[{path:"/welcome",name:"welcome",meta:{requiresAdmin:!0},component:function(){return n.e("admin-welcome~ad1e7cfa").then(n.bind(null,"b894"))}},{path:"/main",name:"main",meta:{requiresAdmin:!0},component:function(){return n.e("admin-main~065b16f2").then(n.bind(null,"6f7c"))}},{path:"/webEdit",name:"webEdit",meta:{requiresAdmin:!0,requiresRoot:!0},component:function(){return Promise.all([n.e("chunk-commons~31ecd969"),n.e("admin-webedit~15207a66")]).then(n.bind(null,"57d1"))}},{path:"/userList",name:"userList",meta:{requiresAdmin:!0,requiresRoot:!0},component:function(){return n.e("admin-userlist~3b199ac0").then(n.bind(null,"d401"))}},{path:"/postList",name:"postList",meta:{requiresAdmin:!0},component:function(){return n.e("admin-postlist~2d0f8592").then(n.bind(null,"24c4"))}},{path:"/postEdit",name:"postEdit",meta:{requiresAdmin:!0},component:function(){return Promise.all([n.e("chunk-commons~31ecd969"),n.e("admin-postedit~31ecd969")]).then(n.bind(null,"868a"))}},{path:"/sortList",name:"sortList",meta:{requiresAdmin:!0},component:function(){return n.e("admin-sortlist~0fe4749a").then(n.bind(null,"0c89"))}},{path:"/configList",name:"configList",meta:{requiresAdmin:!0,requiresRoot:!0},component:function(){return n.e("admin-configlist~3ed38d82").then(n.bind(null,"3a0e"))}},{path:"/commentList",name:"commentList",meta:{requiresAdmin:!0},component:function(){return n.e("admin-commentlist~8cda5576").then(n.bind(null,"2543"))}},{path:"/commentAudit",name:"commentAudit",meta:{requiresAdmin:!0,requiresRoot:!0},component:function(){return n.e("admin-commentaudit~d04c6680").then(n.bind(null,"d4019"))}},{path:"/treeHoleList",name:"treeHoleList",meta:{requiresAdmin:!0},component:function(){return n.e("admin-treeholelist~e68e25e0").then(n.bind(null,"738f"))}},{path:"/resourceList",name:"resourceList",meta:{requiresAdmin:!0},component:function(){return n.e("admin-resourcelist~641649cd").then(n.bind(null,"ea6f"))}},{path:"/loveList",name:"loveList",meta:{requiresAdmin:!0},component:function(){return n.e("admin-lovelist~e2866bf2").then(n.bind(null,"273f"))}},{path:"/resourcePathList",name:"resourcePathList",meta:{requiresAdmin:!0},component:function(){return n.e("admin-resourcepathlist~411ea6ca").then(n.bind(null,"3601"))}},{path:"/dashboard",name:"dashboard",meta:{requiresAdmin:!0},component:function(){return Promise.all([n.e("chunk-commons~31ecd969"),n.e("admin-dashboard~2064fac2")]).then(n.bind(null,"ca24"))}},{path:"/analytics",name:"analytics",meta:{requiresAdmin:!0},component:function(){return n.e("admin-analytics~84eadbbc").then(n.bind(null,"ece0"))}},{path:"/shareStats",name:"shareStats",meta:{requiresAdmin:!0},component:function(){return n.e("admin-sharestats~a0ad92a9").then(n.bind(null,"139e"))}},{path:"/apiCache",name:"apiCache",meta:{requiresAdmin:!0,requiresRoot:!0},component:function(){return n.e("admin-apicache~d6bce6c5").then(n.bind(null,"acb0"))}},{path:"/systemSettings",name:"systemSettings",meta:{requiresAdmin:!0,requiresRoot:!0},component:function(){return n.e("admin-systemsettings~ed859088").then(n.bind(null,"1806"))}}]},{path:"/verify",name:"verify",component:function(){return n.e("verify~c74f2af8").then(n.bind(null,"6419"))}}],l=new c.a({mode:"history",routes:u,scrollBehavior:function(e,t,n){return{x:0,y:0}}});l.beforeEach(function(e,t,n){if(e.matched.some(function(e){return e.meta.requiresAuth})){if(!localStorage.getItem("adminToken"))return void n({path:"/verify",query:{redirect:e.fullPath}});if(e.matched.some(function(e){return e.meta.requiresAdmin})){var r=JSON.parse(localStorage.getItem("currentAdmin")||"{}");if(e.matched.some(function(e){return e.meta.requiresRoot})){if(0!==r.userType)return void n({path:"/welcome",query:{error:"permission_denied"}})}else if(0!==r.userType&&1!==r.userType)return void n({path:"/verify",query:{error:"not_admin"}})}n()}else n()}),l.afterEach(function(e,t){"index"===e.name&&setTimeout(function(){Promise.all([n.e("chunk-markdown~00c385fd"),n.e("chunk-markdown~18c029cd"),n.e("chunk-commons~31ecd969"),n.e("article~31ecd969")]).then(n.bind(null,"d31b"))},2e3),"sort"===e.name&&setTimeout(function(){Promise.all([n.e("chunk-markdown~00c385fd"),n.e("chunk-markdown~18c029cd"),n.e("chunk-commons~31ecd969"),n.e("article~31ecd969")]).then(n.bind(null,"d31b"))},1e3),"article"===e.name&&setTimeout(function(){n.e("chunk-2d209ab9").then(n.bind(null,"79f0"))},1500)});var f=l,d=n("53ca"),m=n("5530"),h=n("b1f8"),g=(n("b64b"),n("159b"),n("2ca0"),n("caad"),n("2532"),n("25f0"),n("8a79"),n("4de4"),n("e9c4"),n("4e82"),n("ac1f"),n("1276"),n("d81d"),n("5319"),n("2f62"));o.default.use(g.a);var p="webInfo_last_refresh",v=Date.now(),b=localStorage.getItem(p);if(!b||v-parseInt(b)>3e5||!function(){try{var e=localStorage.getItem("webInfo");if(!e)return!1;for(var t=JSON.parse(e),n=0,r=["backgroundImage","avatar","favoriteBgImage","loveBgImage","weiyanBgImage","treeHoleBgImage","loveWeiyanAvatar","lovePhotoAvatar","loveMessageAvatar"];n<r.length;n++){var a=r[n];if(!t[a]||""===t[a])return!1}return!0}catch(e){return!1}}()){localStorage.removeItem("webInfo");Object.keys(localStorage).forEach(function(e){e.startsWith("poetize_api_cache_")&&(e.includes("/webInfo/")||e.includes("getWebInfo")||e.includes("getSortInfo")||e.includes("listSortArticle"))&&localStorage.removeItem(e)}),localStorage.setItem(p,v.toString())}function y(e){if(e&&e.avatar&&"string"==typeof e.avatar){var t=null,n=JSON.parse(localStorage.getItem("sysConfig")||"{}");if(t=n["local.downloadUrl"]||n.webStaticResourcePrefix,e.avatar.startsWith("http://")||e.avatar.startsWith("https://"))return e;if(t){t.endsWith("/")||(t+="/");var r=t.includes("/resourceStorage")||t.includes("resourceStorage/");e.avatar.startsWith("resourceStorage/")?e.avatar=t+e.avatar:e.avatar=r?t+e.avatar:t+"resourceStorage/"+e.avatar}}return e}function w(e){if(e&&e.avatar&&"string"==typeof e.avatar){var t=null,n=JSON.parse(localStorage.getItem("sysConfig")||"{}");if(t=n["local.downloadUrl"]||n.webStaticResourcePrefix,e.avatar.startsWith("http://")||e.avatar.startsWith("https://"))return e;if(t){t.endsWith("/")||(t+="/");var r=t.includes("/resourceStorage")||t.includes("resourceStorage/");e.avatar.startsWith("resourceStorage/")?e.avatar=t+e.avatar:e.avatar=r?t+e.avatar:t+"resourceStorage/"+e.avatar}}return e}var k=new g.a.Store({state:{toolbar:JSON.parse(localStorage.getItem("toolbar")||'{"visible": false, "enter": true}'),sortInfo:JSON.parse(localStorage.getItem("sortInfo")||"[]"),currentUser:w(JSON.parse(localStorage.getItem("currentUser")||"{}")),currentAdmin:y(JSON.parse(localStorage.getItem("currentAdmin")||"{}")),sysConfig:JSON.parse(localStorage.getItem("sysConfig")||"{}"),webInfo:JSON.parse(localStorage.getItem("webInfo")||'{"webName": "", "webTitle": [], "notices": [], "randomCover": [], "footer": "", "backgroundImage": "", "avatar": ""}')},getters:{articleTotal:function(e){return null!==e.sortInfo&&0!==e.sortInfo.length?1===e.sortInfo.length?e.sortInfo[0].countOfSort:e.sortInfo.reduce(function(e,t){return"number"==typeof e?e+t.countOfSort:e.countOfSort+t.countOfSort}):0},navigationBar:function(e){return null!==e.sortInfo&&0!==e.sortInfo.length?e.sortInfo.filter(function(e){return 0===e.sortType}):[]},processCommentAvatar:function(){return S},processCommentList:function(){return I}},mutations:{changeToolbarStatus:function(e,t){e.toolbar=t,localStorage.setItem("toolbar",JSON.stringify(t))},loadSortInfo:function(e,t){null!==t&&0!==t.length&&(e.sortInfo=t.sort(function(e,t){return e.priority-t.priority}),localStorage.setItem("sortInfo",JSON.stringify(t.sort(function(e,t){return e.priority-t.priority}))))},loadCurrentUser:function(e,t){if(t&&t.avatar&&"string"==typeof t.avatar){var n=e.sysConfig["local.downloadUrl"]||e.sysConfig.webStaticResourcePrefix;if(t.avatar.startsWith("http://")||t.avatar.startsWith("https://"));else if(n){n.endsWith("/")||Object(h.a)("downloadUrl");var r=n.includes("/resourceStorage")||n.includes("resourceStorage/");t.avatar.startsWith("resourceStorage/")?t.avatar=n+t.avatar:t.avatar=r?n+t.avatar:n+"resourceStorage/"+t.avatar}}e.currentUser=t,localStorage.setItem("currentUser",JSON.stringify(t)),e.currentUser&&e.currentUser.avatar},loadSysConfig:function(e,t){var n=t["local.downloadUrl"]||t.webStaticResourcePrefix;if(Object(m.a)({},e.currentUser),Object(m.a)({},e.currentAdmin),["adminLoginBackground","signupBackground","webStaticResourcePrefix","landing.background"].forEach(function(e){"contact.background"!==e&&t[e]&&"string"==typeof t[e]&&(t[e].startsWith("http://")||t[e].startsWith("https://")||"webStaticResourcePrefix"!==e&&n&&(t[e].startsWith("resourceStorage/")?n.endsWith("/resourceStorage/")||n.endsWith("resourceStorage/")?t[e]=n+t[e].substring(16):t[e]=n+t[e]:n&&(n.includes("/resourceStorage")||n.includes("resourceStorage/"))?t[e]=n+t[e]:t[e]=n+"resourceStorage/"+t[e]))}),t["contact.methods"])try{var r=JSON.parse(t["contact.methods"]),a=!1;r.forEach(function(e){e.qrcodeImage&&"string"==typeof e.qrcodeImage&&(e.qrcodeImage.startsWith("http://")||e.qrcodeImage.startsWith("https://")||(e.qrcodeImage.startsWith("resourceStorage/")?n&&(n.endsWith("/resourceStorage/")||n.endsWith("resourceStorage/"))?e.qrcodeImage=n+e.qrcodeImage.substring(16):e.qrcodeImage=(n||"")+e.qrcodeImage:e.qrcodeImage=(n||"")+"resourceStorage/"+e.qrcodeImage,a=!0))}),a&&(t["contact.methods"]=JSON.stringify(r))}catch(e){}if(e.sysConfig=t,localStorage.setItem("sysConfig",JSON.stringify(t)),e.currentUser&&e.currentUser.avatar){var o=w(Object(m.a)({},e.currentUser));e.currentUser=o,localStorage.setItem("currentUser",JSON.stringify(o))}if(e.currentAdmin&&e.currentAdmin.avatar){var i=y(Object(m.a)({},e.currentAdmin));e.currentAdmin=i,localStorage.setItem("currentAdmin",JSON.stringify(i))}window.processCommentList=I},loadCurrentAdmin:function(e,t){if(t&&t.avatar&&"string"==typeof t.avatar){var n=e.sysConfig["local.downloadUrl"]||e.sysConfig.webStaticResourcePrefix;if(t.avatar.startsWith("http://")||t.avatar.startsWith("https://"));else if(n){n.endsWith("/")||Object(h.a)("downloadUrl");var r=n.includes("/resourceStorage")||n.includes("resourceStorage/");t.avatar.startsWith("resourceStorage/")?t.avatar=n+t.avatar:t.avatar=r?n+t.avatar:n+"resourceStorage/"+t.avatar}}e.currentAdmin=t,localStorage.setItem("currentAdmin",JSON.stringify(t)),e.currentAdmin&&e.currentAdmin.avatar},loadWebInfo:function(e,t){t.webTitle&&"string"==typeof t.webTitle?t.webTitle=t.webTitle.split(""):t.webTitle||(t.webTitle=[]);try{t.notices="string"==typeof t.notices?JSON.parse(t.notices):t.notices||[]}catch(e){t.notices=[]}try{t.randomCover="string"==typeof t.randomCover?JSON.parse(t.randomCover):t.randomCover||[]}catch(e){t.randomCover=[]}var n=e.sysConfig["local.downloadUrl"]||e.sysConfig.webStaticResourcePrefix;if(["backgroundImage","avatar","favoriteBgImage","travelBgImage","loveBgImage","weiyanBgImage","treeHoleBgImage","loveWeiyanAvatar","lovePhotoAvatar","loveMessageAvatar"].forEach(function(e){t[e]&&"string"==typeof t[e]&&(t[e].startsWith("http://")||t[e].startsWith("https://")||!n||(n&&(n.includes("/resourceStorage")||n.includes("resourceStorage/"))?t[e]=n+t[e]:t[e]=n+"resourceStorage/"+t[e]))}),t.sortArticles&&"object"===Object(d.a)(t.sortArticles))for(var r in t.sortArticles)t.sortArticles[r]&&Array.isArray(t.sortArticles[r])&&(t.sortArticles[r]=t.sortArticles[r].map(function(e){if(e.articleCover&&"string"==typeof e.articleCover&&!e.articleCover.startsWith("http://")&&!e.articleCover.startsWith("https://")&&n){var t=n.endsWith("/"),r=n.includes("/resourceStorage")||n.includes("resourceStorage/");e.articleCover.startsWith("resourceStorage/")?e.articleCover=n+e.articleCover:(e.articleCover.startsWith("articleCover/"),e.articleCover=r?n+e.articleCover:n+(t?"":"/")+"resourceStorage/"+e.articleCover)}return e}));if(["adminLoginBackground","webStaticResourcePrefix"].forEach(function(t){e.sysConfig[t]&&"string"==typeof e.sysConfig[t]&&(e.sysConfig[t].startsWith("http://")||e.sysConfig[t].startsWith("https://")||("webStaticResourcePrefix"!==t&&n?e.sysConfig[t].startsWith("resourceStorage/")?e.sysConfig[t]=n+e.sysConfig[t]:e.sysConfig[t]=n+"resourceStorage/"+e.sysConfig[t]:"webStaticResourcePrefix"===t&&e.sysConfig["local.downloadUrl"]&&(e.sysConfig[t].startsWith("resourceStorage/static/")?e.sysConfig[t]=n+e.sysConfig[t]:e.sysConfig[t].startsWith("static/")?e.sysConfig[t]=n+"resourceStorage/"+e.sysConfig[t]:e.sysConfig[t]=e.sysConfig["local.downloadUrl"].replace("resourceStorage/","resourceStorage/static/"))))}),e.sysConfig["contact.methods"])try{var a=JSON.parse(e.sysConfig["contact.methods"]),o=!1;a.forEach(function(e){e.qrcodeImage&&"string"==typeof e.qrcodeImage&&(e.qrcodeImage.startsWith("http://")||e.qrcodeImage.startsWith("https://")||(e.qrcodeImage.startsWith("resourceStorage/")?n&&(n.endsWith("/resourceStorage/")||n.endsWith("resourceStorage/"))?e.qrcodeImage=n+e.qrcodeImage.substring(16):e.qrcodeImage=(n||"")+e.qrcodeImage:e.qrcodeImage=(n||"")+"resourceStorage/"+e.qrcodeImage,o=!0))}),o&&(e.sysConfig["contact.methods"]=JSON.stringify(a))}catch(e){}e.sysConfig["contact.background"],e.webInfo=t,localStorage.setItem("webInfo",JSON.stringify(t))}},actions:{},modules:{},plugins:[]});function S(e){if(e&&e.avatar&&"string"==typeof e.avatar){var t=null,n=JSON.parse(localStorage.getItem("sysConfig")||"{}");if(t=n["local.downloadUrl"]||n.webStaticResourcePrefix,e.avatar.startsWith("http://")||e.avatar.startsWith("https://"))return e;if(t){t.endsWith("/")||(t+="/");var r=t.includes("/resourceStorage")||t.includes("resourceStorage/");e.avatar.startsWith("resourceStorage/")?e.avatar=t+e.avatar:e.avatar=r?t+e.avatar:t+"resourceStorage/"+e.avatar}}return e}function I(e){return Array.isArray(e)?e.map(function(e){var t=S(Object(m.a)({},e));return t.children&&Array.isArray(t.children)&&(t.children=I(t.children)),t.childComments&&t.childComments.records&&(t.childComments.records=I(t.childComments.records)),t}):e}n("d9e2");var x=n("bc3a"),T=n.n(x),C={baseURL:"http://localhost:8081",webURL:"http://localhost",host:location.hostname+(location.port?":"+location.port:""),live2d_path:"https://fastly.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/",cdnPath:"https://fastly.jsdelivr.net/gh/fghrsh/live2d_api/",waifuPath:"/webInfo/getWaifuJson",hitokoto:"https://v1.hitokoto.cn",shehui:"https://api.oick.cn/yulu/api.php",tocbot:"https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.18.2/tocbot.min.js",jinrishici:"https://v1.jinrishici.com/all.json",cryptojs_key:"atticuswildeblog",before_color_list:["black","rgb(131, 123, 199)","#ee7752","#e73c7e","#23a6d5","#23d5ab"],tree_hole_color:["rgb(180, 224, 255)","rgb(180, 203, 255)","rgb(246, 223, 255)","rgb(255, 214, 198)","rgb(255, 205, 143)","rgb(238, 255, 143)","rgb(220, 255, 165)","rgb(164, 234, 192)","rgb(202, 241, 233)","rgb(230, 230, 250)"],before_color_1:"black",after_color_1:"linear-gradient(45deg, #f43f3b, #ec008c)",before_color_2:"rgb(131, 123, 199)",after_color_2:"linear-gradient(45deg, #f43f3b, #ec008c)",sortColor:["linear-gradient(to right, #358bff, #15c6ff)","linear-gradient(to right, #18e7ae, #1eebeb)","linear-gradient(to right, #ff6655, #ffbf37)","linear-gradient(120deg, rgba(255, 39, 232, 1) 0%, rgba(255, 128, 0, 1) 100%)","linear-gradient(120deg, rgba(91, 39, 255, 1) 0%, rgba(0, 212, 255, 1) 100%)"],pageColor:"#ee7752",commentPageColor:"#23d5ab",userId:1,source:0,defaultAvatar:"/static/images/default-avatar.png",emojiList:["衰","鄙视","再见","捂嘴","摸鱼","奋斗","白眼","可怜","皱眉","鼓掌","烦恼","吐舌","挖鼻","委屈","滑稽","啊这","生气","害羞","晕","好色","流泪","吐血","微笑","酷","坏笑","吓","大兵","哭笑","困","呲牙"]},E=n("4328"),D=n.n(E),P=n("1da1"),L=n("3835"),A=n("d4ec"),j=n("bee2"),O=(n("96cf"),n("4ec9"),n("a15b"),n("99af"),n("4fad"),n("a630"),n("fb6a"),function(){function e(){Object(A.a)(this,e),this.memoryCache=new Map,this.config={defaultTTL:3e5,maxMemoryItems:100,storagePrefix:"poetize_api_cache_",enableLocalStorage:!0,maxStorageSize:5242880},this.cacheStrategies={"/article/listArticle":3e5,"/article/info":6e5,"/webInfo/getSortInfo":18e5,"/user/getUserInfo":9e5,"/comment/listComment":18e4},this.cachePriority={"/webInfo/getSortInfo":10,"/user/getUserInfo":9,"/article/info":8,"/article/listArticle":7,"/comment/listComment":5},this.accessCounter=new Map,this.preloadQueue=[],this.isPreloading=!1}return Object(j.a)(e,[{key:"generateKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.keys(t).sort().map(function(e){return"".concat(e,"=").concat(JSON.stringify(t[e]))}).join("&");return"".concat(e,"?").concat(n)}},{key:"getTTL",value:function(e){for(var t=0,n=Object.entries(this.cacheStrategies);t<n.length;t++){var r=Object(L.a)(n[t],2),a=r[0],o=r[1];if(e.includes(a))return o}return this.config.defaultTTL}},{key:"set",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=this.generateKey(e,t),o=r||this.getTTL(e),i={data:n,timestamp:Date.now(),ttl:o,url:e,params:t};if(this.memoryCache.set(a,i),this.memoryCache.size>this.config.maxMemoryItems){var c=this.memoryCache.keys().next().value;this.memoryCache.delete(c)}if(this.config.enableLocalStorage)try{var s=this.config.storagePrefix+a;localStorage.setItem(s,JSON.stringify(i)),this.cleanExpiredStorage()}catch(e){this.clearOldestStorage()}}},{key:"get",value:function(e,t){var n=this.generateKey(e,t),r=this.accessCounter.get(n)||0;this.accessCounter.set(n,r+1);var a=this.memoryCache.get(n);if(!a&&this.config.enableLocalStorage)try{var o=this.config.storagePrefix+n,i=localStorage.getItem(o);i&&(a=JSON.parse(i),this.memoryCache.set(n,a))}catch(e){}if(a){if(Date.now()-a.timestamp<a.ttl)return a.data;this.delete(e,t)}return null}},{key:"delete",value:function(e,t){var n=this.generateKey(e,t);if(this.memoryCache.delete(n),this.config.enableLocalStorage)try{var r=this.config.storagePrefix+n;localStorage.removeItem(r)}catch(e){}}},{key:"clear",value:function(){var e=this;if(this.memoryCache.clear(),this.config.enableLocalStorage)try{Object.keys(localStorage).forEach(function(t){t.startsWith(e.config.storagePrefix)&&localStorage.removeItem(t)})}catch(e){}}},{key:"clearByPattern",value:function(e){var t=this;if(Array.from(this.memoryCache.keys()).forEach(function(n){n.includes(e)&&t.memoryCache.delete(n)}),this.config.enableLocalStorage)try{Object.keys(localStorage).forEach(function(n){n.startsWith(t.config.storagePrefix)&&n.includes(e)&&localStorage.removeItem(n)})}catch(e){}}},{key:"cleanExpiredStorage",value:function(){var e=this;if(this.config.enableLocalStorage)try{var t=Object.keys(localStorage),n=Date.now();t.forEach(function(t){if(t.startsWith(e.config.storagePrefix))try{var r=JSON.parse(localStorage.getItem(t));r&&n-r.timestamp>=r.ttl&&localStorage.removeItem(t)}catch(e){localStorage.removeItem(t)}})}catch(e){}}},{key:"clearOldestStorage",value:function(){var e=this;if(this.config.enableLocalStorage)try{for(var t=Object.keys(localStorage).filter(function(t){return t.startsWith(e.config.storagePrefix)}),n=t.map(function(e){try{return{key:e,timestamp:JSON.parse(localStorage.getItem(e)).timestamp||0}}catch(t){return{key:e,timestamp:0}}}).sort(function(e,t){return e.timestamp-t.timestamp}),r=Math.ceil(.1*n.length),a=0;a<r;a++)localStorage.removeItem(n[a].key)}catch(e){}}},{key:"getStats",value:function(){var e=this,t=this.memoryCache.size,n=0,r=0;if(this.config.enableLocalStorage)try{Object.keys(localStorage).forEach(function(t){if(t.startsWith(e.config.storagePrefix)){r++;var a=localStorage.getItem(t);n+=a?2*a.length:0}})}catch(e){}return{memory:{count:t,maxCount:this.config.maxMemoryItems},storage:{count:r,size:n,maxSize:this.config.maxStorageSize,sizeFormatted:this.formatSize(n)}}}},{key:"formatSize",value:function(e){if(0===e)return"0 B";var t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["B","KB","MB","GB"][t]}},{key:"getPriority",value:function(e){for(var t=0,n=Object.entries(this.cachePriority);t<n.length;t++){var r=Object(L.a)(n[t],2),a=r[0],o=r[1];if(e.includes(a))return o}return 0}},{key:"clearLowPriorityCache",value:function(){for(var e=this,t=Array.from(this.memoryCache.entries()).map(function(t){var n=Object(L.a)(t,2),r=n[0],a=n[1];return{key:r,item:a,priority:e.getPriority(a.url),accessCount:e.accessCounter.get(r)||0}}).sort(function(e,t){return e.priority!==t.priority?e.priority-t.priority:e.accessCount-t.accessCount}),n=Math.ceil(.3*t.length),r=0;r<n;r++)this.memoryCache.delete(t[r].key)}},{key:"preload",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=this.generateKey(t,r);return this.get(t,r)?Promise.resolve():new Promise(function(o,i){n.preloadQueue.push({fetchFn:e,url:t,params:r,key:a,resolve:o,reject:i,priority:n.getPriority(t)}),n.processPreloadQueue()})}},{key:"processPreloadQueue",value:function(){var e=Object(P.a)(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPreloading&&0!==this.preloadQueue.length){e.next=2;break}return e.abrupt("return");case 2:this.isPreloading=!0,this.preloadQueue.sort(function(e,t){return t.priority-e.priority});case 4:if(!(this.preloadQueue.length>0)){e.next=25;break}if(t=this.preloadQueue.shift(),e.prev=6,!(n=this.get(t.url,t.params))){e.next=11;break}return t.resolve(n),e.abrupt("continue",4);case 11:return e.next=13,t.fetchFn();case 13:return r=e.sent,this.set(t.url,t.params,r),t.resolve(r),e.next=18,new Promise(function(e){return setTimeout(e,100)});case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(6),t.reject(e.t0);case 23:e.next=4;break;case 25:this.isPreloading=!1;case 26:case"end":return e.stop()}},e,this,[[6,20]])}));return function(){return e.apply(this,arguments)}}()},{key:"smartPreload",value:function(e,t){var n=this;"requestIdleCallback"in window?window.requestIdleCallback(function(){t.forEach(function(t){var r=t.url,a=t.params;n.preload(e,r,a)})}):setTimeout(function(){t.forEach(function(t){var r=t.url,a=t.params;n.preload(e,r,a)})},1e3)}},{key:"getHotCache",value:function(){return Array.from(this.accessCounter.entries()).sort(function(e,t){return t[1]-e[1]}).slice(0,10).map(function(e){var t=Object(L.a)(e,2);return{key:t[0],count:t[1]}})}}]),e}()),M=new O;T.a.defaults.baseURL=C.baseURL,T.a.interceptors.request.use(function(e){return e},function(e){return Promise.reject(e)}),T.a.interceptors.response.use(function(e){return null!==e.data&&e.data.hasOwnProperty("code")&&200!==e.data.code?(300===e.data.code&&(k.commit("loadCurrentUser",{}),localStorage.removeItem("userToken"),k.commit("loadCurrentAdmin",{}),localStorage.removeItem("adminToken"),window.location.href="/user"),Promise.reject(new Error(e.data.message))):e},function(e){return Promise.reject(e)});var W={post:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?{headers:{Authorization:localStorage.getItem("adminToken")}}:{headers:{Authorization:localStorage.getItem("userToken")}},new Promise(function(a,o){T.a.post(e,r?n:D.a.stringify(n),t).then(function(e){a(e.data)}).catch(function(e){o(e)})})},get:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?{Authorization:localStorage.getItem("adminToken")}:{Authorization:localStorage.getItem("userToken")},r){var a=M.get(e,n);if(a)return Promise.resolve(a)}return new Promise(function(a,o){T.a.get(e,{params:n,headers:t}).then(function(t){r&&t.data&&200===t.data.code&&M.set(e,n,t.data),a(t.data)}).catch(function(e){o(e)})})},delete:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?{Authorization:localStorage.getItem("adminToken")}:{Authorization:localStorage.getItem("userToken")},new Promise(function(r,a){T.a.delete(e,{params:n,headers:t}).then(function(e){r(e.data)}).catch(function(e){a(e)})})},upload:function(e,t){var n,r=arguments.length>3?arguments[3]:void 0;return n=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?{headers:{Authorization:localStorage.getItem("adminToken")},timeout:6e4}:{headers:{Authorization:localStorage.getItem("userToken")},timeout:6e4},void 0!==r&&(n.onUploadProgress=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),r.onProgress(e)}),new Promise(function(r,a){T.a.post(e,t,n).then(function(e){r(e.data)}).catch(function(e){a(e)})})},uploadQiniu:function(e,t){var n={headers:{"Content-Type":"multipart/form-data"},timeout:6e4};return new Promise(function(r,a){T.a.post(e,t,n).then(function(e){r(e.data)}).catch(function(e){a(e)})})}},R=(n("466d"),n("498a"),n("4d63"),n("c607"),n("2c3e"),n("3452")),q=n.n(R),N={pushNotification:function(e,t){if(t)return this.isEmpty(e)?[]:e.filter(function(e){return"推送标题："!==e.substr(0,5)&&"推送封面："!==e.substr(0,5)&&"推送链接："!==e.substr(0,5)});var n={};return e.forEach(function(e){"推送标题："===e.substr(0,5)?n["标题"]=e.substr(5):"推送封面："===e.substr(0,5)?n["封面"]=e.substr(5):"推送链接："===e.substr(0,5)&&(n["链接"]=e.substr(5))}),n},mobile:function(){var e=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);return e&&e.length&&e.length>0},isEmpty:function(e){return!!(null==e||"string"==typeof e&&""===e.trim()||Array.prototype.isPrototypeOf(e)&&0===e.length||Object.prototype.isPrototypeOf(e)&&0===Object.keys(e).length)},encrypt:function(e){var t={mode:q.a.mode.ECB,padding:q.a.pad.Pkcs7},n=q.a.enc.Utf8.parse(C.cryptojs_key);return q.a.AES.encrypt(e,n,t).toString().replace(/\//g,"_").replace(/\+/g,"-")},decrypt:function(e){var t=e.replace(/\-/g,"+").replace(/_/g,"/"),n={mode:q.a.mode.ECB,padding:q.a.pad.Pkcs7},r=q.a.enc.Utf8.parse(C.cryptojs_key),a=q.a.AES.decrypt(t,r,n);return q.a.enc.Utf8.stringify(a)},faceReg:function(e){return e?(e=e.replace(/\[[^\[^\]]+\]/g,function(e){var t=C.emojiList.indexOf(e.replace("[","").replace("]",""));return t>-1?'<img loading="lazy" style="vertical-align: middle;width: 32px;height: 32px" src="'+((k.state.sysConfig&&k.state.sysConfig.webStaticResourcePrefix?k.state.sysConfig.webStaticResourcePrefix:"http://localhost:8081/resourceStorage/static/")+"static/emoji/q"+(t+1)+".gif")+'" title="'+e+'" onerror="this.style.display=\'none\';"/>':e}),e):e},pictureReg:function(e){return e=e.replace(/\[[^\[^\]]+\]/g,function(e){if(e.indexOf(",")>-1){var t=e.replace("[","").replace("]","").split(",");return'<img loading="lazy" class="pictureReg" style="border-radius: 5px;width: 100%;max-width: 250px;display: block" src="'+t[1]+'" title="'+t[0]+'"/>'}return e}),e},imgShow:function(e){$(e).click(function(){var e=$(this).attr("src");$("#bigImg").attr("src",e),$("<img/>").attr("src",e).load(function(){var e,t,n=$(window).width(),r=$(window).height(),a=this.width,o=this.height,i=.8;o>r*i?(e=(t=r*i)/o*a)>n*i&&(e=n*i):a>n*i?t=(e=n*i)/a*o:(e=a,t=o),$("#bigImg").css("width",e),$("#bigImg").css("border-radius","6px");var c=(n-e)/2,s=(r-t)/2;$("#innerImg").css({top:s,left:c}),$("#outerImg").fadeIn("fast")}),$("#outerImg").click(function(){$(this).fadeOut("fast")})})},getDateTimeStamp:function(e){return Date.parse(e.replace(/-/gi,"/"))},getDateDiff:function(e){var t,n,r,a,o,i=isNaN(Date.parse(e.replace(/-/gi,"/"))/1e3)?Date.parse(e)/1e3:Date.parse(e.replace(/-/gi,"/"))/1e3,c=Math.floor((new Date).getTime()/1e3),s=new Date(1e3*i),u=s.getFullYear(),l=s.getMonth()+1,f=s.getDate(),d=s.getHours(),m=s.getMinutes(),h=s.getSeconds();return l<10&&(l="0"+l),f<10&&(f="0"+f),d<10&&(d="0"+d),m<10&&(m="0"+m),h<10&&(h="0"+h),o=c-i,a=Math.floor(o/86400),r=Math.floor(o/3600),n=Math.floor(o/60),t=Math.floor(o),a>0&&a<3?a+"天前":a<=0&&r>0?r+"小时前":r<=0&&n>0?n+"分钟前":t<60?t<=0?"刚刚发表":t+"秒前":a>=3?u+"-"+l+"-"+f+" "+d+":"+m:void 0},saveResource:function(e,t,n,r,a,o,i){var c=arguments.length>7&&void 0!==arguments[7]&&arguments[7],s={type:t,path:n,size:r,mimeType:a,storeType:i,originalName:o};e.$http.post(e.$constant.baseURL+"/resource/saveResource",s,c).catch(function(t){e.$message({message:t.message,type:"error"})})},timeDiff:function(e,t){e=e.replace(new RegExp("-","gm"),"/"),t=t?t.replace(new RegExp("-","gm"),"/"):new Date;var n=function(e,t,n){var r=new Date(e).getTime()-new Date(t).getTime()>0?t:e,a=new Date(e).getTime()-new Date(t).getTime()>0?e:t,o=new Date(new Date(a).getFullYear(),new Date(a).getMonth()+1,0).getDate(),i=new Date(r).getDate()>o?o:new Date(r).getDate();return{minTime:r,maxTime:a,maxMinTong:"month"===n?new Date(a).getFullYear()+"/"+(new Date(r).getMonth()+1)+"/"+i+" "+new Date(r).toLocaleTimeString("chinese",{hour12:!1}):new Date(a).getFullYear()+"/"+(new Date(a).getMonth()+1)+"/"+i+" "+new Date(r).toLocaleTimeString("chinese",{hour12:!1})}},r=function(e,t,n){var r=Math.abs(new Date(e).getTime()-new Date(t).getTime());return n?parseInt(r/864e5)-n:parseInt(r/864e5)};return function(e,t){var a=n(e,t,"day"),o=a.minTime,i=a.maxTime,c=a.maxMinTong,s=r(o,c);if(new Date(c).getTime()>new Date(i).getTime()){var u=new Date(c).getMonth()-1,l=new Date(c).setMonth(u);s-=r(new Date(l).getFullYear()+"/"+(new Date(l).getMonth()+1)+"/"+new Date(l).getDate(),c)}var f=function(e,t){var r=new Date(e).getFullYear(),a=new Date(t).getFullYear(),o=n(e,t,"month"),i=(o.minTime,o.maxTime),c=o.maxMinTong,s=Math.abs(r-a);return new Date(c).getTime()>new Date(i).getTime()&&s--,s}(e,t),d=function(e,t,r){var a=12*new Date(e).getFullYear()+(new Date(e).getMonth()+1),o=12*new Date(t).getFullYear()+(new Date(t).getMonth()+1),i=n(e,t,"day"),c=(i.minTime,i.maxTime),s=i.maxMinTong,u=Math.abs(a-o);return new Date(s).getTime()>new Date(c).getTime()&&u--,r?u-r:u}(e,t,12*f),m=r(e,t,s),h=function(e,t,n){var r=Math.abs(new Date(e).getTime()-new Date(t).getTime());return n?parseInt(r/36e5)-n:parseInt(r/36e5)}(e,t,24*r(e,t)),g=function(e,t,n){var r=Math.abs(new Date(e).getTime()-new Date(t).getTime());return n?parseInt(r/6e4)-n:parseInt(r/6e4)}(e,t,24*r(e,t)*60+60*h),p=function(e,t,n){var r=Math.abs(new Date(e).getTime()-new Date(t).getTime());return n?parseInt(r/1e3)-n:parseInt(r/1e3)}(e,t,24*r(e,t)*60*60+60*h*60+60*g);return{diffYear:f,diffMonth:d,diffDay:m,diffHour:h,diffMinute:g,diffSecond:p}}(e,t)},countdown:function(e){e=new Date(e.replace(new RegExp("-","gm"),"/"));var t=new Date,n=parseInt((e.getTime()-t.getTime())/1e3);return{d:parseInt(n/3600/24),h:parseInt(n/3600%24),m:parseInt(n/60%60),s:parseInt(n%60)}},imageOptimizer:n("cf85").a},B=n("b2d8"),z=n.n(B),U=n("fd15"),_=n("3e78"),H=n("b85c"),J={register:function(){var e=this;"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/sw.js").then(function(t){t.addEventListener("updatefound",function(){var n=t.installing;n.addEventListener("statechange",function(){"installed"===n.state&&navigator.serviceWorker.controller&&e.showUpdateNotification(n)})})}).catch(function(e){}),navigator.serviceWorker.addEventListener("controllerchange",function(){})})},showUpdateNotification:function(e){if(window.$notify){var t=window.$createElement;window.$notify({title:"发现新版本",message:t("div",[t("p","网站有新版本可用"),t("el-button",{props:{type:"primary",size:"small"},on:{click:function(){e.postMessage({type:"SKIP_WAITING"}),window.location.reload()}}},"立即更新")]),duration:0,type:"info"})}},unregister:function(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}).catch(function(e){})},clearCache:function(){return"serviceWorker"in navigator&&"caches"in window?caches.keys().then(function(e){return Promise.all(e.map(function(e){return caches.delete(e)}))}).then(function(){return!0}).catch(function(e){return!1}):Promise.resolve(!1)},getCacheSize:function(){return Object(P.a)(regeneratorRuntime.mark(function e(){var t,n,r,a,o,i,c,s,u,l,f,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("caches"in window)){e.next=50;break}return e.next=3,caches.keys();case 3:t=e.sent,n=0,r=Object(H.a)(t),e.prev=6,r.s();case 8:if((a=r.n()).done){e.next=41;break}return o=a.value,e.next=12,caches.open(o);case 12:return i=e.sent,e.next=15,i.keys();case 15:c=e.sent,s=Object(H.a)(c),e.prev=17,s.s();case 19:if((u=s.n()).done){e.next=31;break}return l=u.value,e.next=23,i.match(l);case 23:if(!(f=e.sent)){e.next=29;break}return e.next=27,f.blob();case 27:d=e.sent,n+=d.size;case 29:e.next=19;break;case 31:e.next=36;break;case 33:e.prev=33,e.t0=e.catch(17),s.e(e.t0);case 36:return e.prev=36,s.f(),e.finish(36);case 39:e.next=8;break;case 41:e.next=46;break;case 43:e.prev=43,e.t1=e.catch(6),r.e(e.t1);case 46:return e.prev=46,r.f(),e.finish(46);case 49:return e.abrupt("return",n);case 50:return e.abrupt("return",0);case 51:case"end":return e.stop()}},e,null,[[6,43,46,49],[17,33,36,39]])}))()},formatCacheSize:function(e){if(0===e)return"0 B";var t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["B","KB","MB","GB"][t]}};function F(e,t){if(t){var n=document.createElement("span");n.classList.add("ripple");var r=t.getBoundingClientRect(),a=Math.max(r.width,r.height),o=e.clientX-r.left-a/2,i=e.clientY-r.top-a/2;n.style.width=n.style.height=a+"px",n.style.left=o+"px",n.style.top=i+"px",t.appendChild(n),setTimeout(function(){n.remove()},600)}}function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var n=t.ripple,r=void 0===n||n,a=t.scale,o=void 0===a||a,i=t.vibrate,c=void 0!==i&&i;o&&e.classList.add("touch-feedback"),r&&e.classList.add("ripple-container"),e.addEventListener("touchstart",function(t){r&&F(t.touches[0],e),c&&navigator.vibrate&&navigator.vibrate(10)},{passive:!0})}}var Q={addRipple:F,enableTouchFeedback:Y,enableTouchFeedbackBatch:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};document.querySelectorAll(e).forEach(function(e){Y(e,t)})},detectLongPress:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;if(e&&t){var r=null,a=function(){r=setTimeout(function(){t(),navigator.vibrate&&navigator.vibrate([30,50,30])},n)},o=function(){r&&(clearTimeout(r),r=null)};return e.addEventListener("touchstart",a,{passive:!0}),e.addEventListener("touchend",o,{passive:!0}),e.addEventListener("touchmove",o,{passive:!0}),function(){e.removeEventListener("touchstart",a),e.removeEventListener("touchend",o),e.removeEventListener("touchmove",o)}}},detectSwipe:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var n=0,r=0,a=0,o=0,i=function(e){n=e.touches[0].clientX,r=e.touches[0].clientY},c=function(e){a=e.touches[0].clientX,o=e.touches[0].clientY},s=function(){var e=a-n,i=o-r;Math.abs(e)>Math.abs(i)?Math.abs(e)>50&&(e>0&&t.onSwipeRight?t.onSwipeRight():e<0&&t.onSwipeLeft&&t.onSwipeLeft()):Math.abs(i)>50&&(i>0&&t.onSwipeDown?t.onSwipeDown():i<0&&t.onSwipeUp&&t.onSwipeUp())};return e.addEventListener("touchstart",i,{passive:!0}),e.addEventListener("touchmove",c,{passive:!0}),e.addEventListener("touchend",s,{passive:!0}),function(){e.removeEventListener("touchstart",i),e.removeEventListener("touchmove",c),e.removeEventListener("touchend",s)}}},preventDoubleTapZoom:function(e){if(e){var t=0;e.addEventListener("touchend",function(e){var n=(new Date).getTime(),r=n-t;r<300&&r>0&&e.preventDefault(),t=n},{passive:!1})}}};if(n("2b3d"),n("9861"),n("841c"),C.live2d_path,screen.width>768){setTimeout(function(){var e=function(){var e=k.state.sysConfig||{};return{enabled:"false"!==e["live2d.enabled"],modelName:e["live2d.modelName"]||"",showWelcome:"false"!==e["live2d.showWelcome"],showHitokoto:"false"!==e["live2d.showHitokoto"],showToolbar:"false"!==e["live2d.showToolbar"],minWidth:parseInt(e["live2d.minWidth"])||768,lockModel:"true"===e["live2d.lockModel"]}}();if(e.enabled)if(screen.width<e.minWidth);else{var t=["https://fastly.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/","https://gcore.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/","https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/","https://raw.githubusercontent.com/stevenjoezhang/live2d-widget/master/","https://ghproxy.com/https://raw.githubusercontent.com/stevenjoezhang/live2d-widget/master/","https://cdn.staticaly.com/gh/stevenjoezhang/live2d-widget/master/"],n=0;!function r(){if(n>=t.length);else{var a=t[n];Promise.all([K(a+"waifu.css","css"),K(a+"live2d.min.js","js")]).then(function(){!function(e){document.body.insertAdjacentHTML("beforeend",'<div id="waifu-toggle">\n\t\t\t<span>看板娘</span>\n\t\t</div>');var t=document.getElementById("waifu-toggle");t.addEventListener("click",function(){if(t.classList.remove("waifu-toggle-active"),t.getAttribute("first-time"))X(e),t.removeAttribute("first-time");else{localStorage.removeItem("waifu-display");var n=document.getElementById("waifu");n.style.display="",setTimeout(function(){n.style.opacity="1"},0)}}),localStorage.getItem("waifu-display")&&Date.now()-localStorage.getItem("waifu-display")<=864e5?(t.setAttribute("first-time",!0),setTimeout(function(){t.classList.add("waifu-toggle-active")},0)):X(e)}({waifuPath:C.baseURL+C.waifuPath,cdnPath:C.cdnPath,config:e})}).catch(function(e){n++,setTimeout(r,500)})}}()}},1e3)}function K(e,t){return new Promise(function(n,r){var a;if("css"===t?((a=document.createElement("link")).rel="stylesheet",a.href=e):"js"===t&&((a=document.createElement("script")).src=e),a){var o=setTimeout(function(){r(new Error("资源加载超时: ".concat(e)))},1e4);a.onload=function(){clearTimeout(o),n(e)},a.onerror=function(){clearTimeout(o),r(new Error("资源加载失败: ".concat(e)))},document.head.appendChild(a)}else r(new Error("不支持的资源类型: ".concat(t)))})}function X(e){var t=e.waifuPath,n=e.cdnPath,r=e.config;n.endsWith("/")||(n+="/");var a,o=0,i=!1;localStorage.removeItem("waifu-display"),localStorage.removeItem("waifu-text");var c=r.showToolbar?'\n      \x3c!-- 工具 --\x3e\n\t\t\t<div id="waifu-tool">\n\t\t\t\t<span class="fa fa-lg fa-comment"></span>\n\t\t\t\t<span class="fa fa-lg fa-street-view"></span>\n\t\t\t\t<span class="fa fa-lg fa-camera-retro"></span>\n\t\t\t\t<span class="fa fa-lg fa-mouse-pointer"></span>\n\t\t\t\t<span class="fa fa-lg fa-times"></span>\n\t\t\t</div>':"";document.body.insertAdjacentHTML("beforeend",'<div id="waifu">\n\t\t\t<div id="waifu-tips"></div>\n\t\t\t<canvas id="live2d" width="800" height="800"></canvas>\n\t\t\t'.concat(c,"\n\t\t</div>")),setTimeout(function(){document.getElementById("waifu").style.bottom=0,setTimeout(function(){!function(){var e=document.getElementById("waifu");if(e){var t,n,r,a,o=!1,i=localStorage.getItem("waifu-position");if(i)try{var c=JSON.parse(i);e.style.left=c.left+"px",e.style.bottom=c.bottom+"px"}catch(t){k(e)}else k(e);e.addEventListener("mousedown",function(i){if(!i.target.closest("#waifu-tool")&&!i.target.closest("#waifu-tips")){o=!0,e.classList.add("dragging"),t=i.clientX,n=i.clientY;var c=e.getBoundingClientRect();r=c.left,a=window.innerHeight-c.bottom,i.preventDefault(),i.stopPropagation()}},!0),document.addEventListener("mousemove",function(i){if(o){var c=i.clientX-t,s=i.clientY-n,u=r+c,l=a-s,f=e.offsetWidth,d=e.offsetHeight;u=Math.max(0,Math.min(u,window.innerWidth-f)),l=Math.max(0,Math.min(l,window.innerHeight-d)),e.style.left=u+"px",e.style.bottom=l+"px",e.style.right="auto",i.preventDefault()}}),document.addEventListener("mouseup",function(){if(o){o=!1,e.classList.remove("dragging");var t=e.getBoundingClientRect(),n={left:t.left,bottom:window.innerHeight-t.bottom};localStorage.setItem("waifu-position",JSON.stringify(n))}}),e.addEventListener("dblclick",function(t){t.target.closest("#waifu-tool")||(k(e),localStorage.removeItem("waifu-position"),w("位置已重置~",2e3,8))})}}()},200)},100);var s,u,l=!1,f=["我是一个特别固执的人，我从来不会在意别人跟我说什么，让我去做，让我去怎么做，我不管。如果，你也可以像我一样，那我觉得，这件事情，太酷辣!!!","我厉害，你给我大拇哥！","那些说我们的网站土的人，说抄袭的人，说我们文章拉的人，说我吃饱了撑的人，你给我大拇哥！","好久不见，日子过得好快呢……","嘤嘤嘤～","嗨～快来逗我玩吧！","退、退、退","很喜欢上班，有种上坟的感觉。","很喜欢放假，有种刑满释放的感觉。","很喜欢看评论，有一种批阅奏折的感觉。","很喜欢发工资，有一种领低保的感觉。","记得把我加入 Adblock 白名单哦！"];function d(){return m.apply(this,arguments)}function m(){return m=Object(P.a)(regeneratorRuntime.mark(function e(){var t,r,o,i,c,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("live2d_model_list"))){e.next=11;break}return e.prev=2,a=JSON.parse(t),e.abrupt("return");case 8:e.prev=8,e.t0=e.catch(2);case 11:r={models:[["Potion-Maker/Pio"],["ShizukuTalk/shizuku-48"],["HyperdimensionNeptunia/nepnep","HyperdimensionNeptunia/blanc","HyperdimensionNeptunia/noir","HyperdimensionNeptunia/vert"],["kesshouban/kasumi-pajamas"],["tororo/tororo"],["hijiki/hijiki"],["tsumiki/tsumiki"]],messages:["大家好，我是 Pio～","嗨，你好呀～","请多指教～","嗯...?","大家好～","请多关照～","你好呀～"]},o=["".concat(n,"model_list.json"),"https://fastly.jsdelivr.net/gh/fghrsh/live2d_api/model_list.json","https://gcore.jsdelivr.net/gh/fghrsh/live2d_api/model_list.json"],i=0,c=o;case 14:if(!(i<c.length)){e.next=36;break}return s=c[i],e.prev=16,e.next=20,Promise.race([fetch(s),new Promise(function(e,t){return setTimeout(function(){return t(new Error("timeout"))},5e3)})]);case 20:return u=e.sent,e.next=23,u.json();case 23:return a=e.sent,localStorage.setItem("live2d_model_list",JSON.stringify(a)),e.abrupt("return");case 29:return e.prev=29,e.t1=e.catch(16),e.abrupt("continue",33);case 33:i++,e.next=14;break;case 36:a=r,localStorage.setItem("live2d_model_list",JSON.stringify(a));case 39:case"end":return e.stop()}},e,null,[[2,8],[16,29]])})),m.apply(this,arguments)}function h(e,t,n){return g.apply(this,arguments)}function g(){return g=Object(P.a)(regeneratorRuntime.mark(function e(t,r,o){var c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=3;break}return w("模型加载中，请稍候...",2e3,9),e.abrupt("return");case 3:if(i=!0,localStorage.setItem("modelId",t),e.prev=5,!r){e.next=10;break}c=r,e.next=14;break;case 10:if(a){e.next=13;break}return e.next=13,d();case 13:c=y(a.models[t]);case 14:s="".concat(n,"model/").concat(c,"/index.json"),loadlive2d("live2d",s),loadlive2d("live2d",s),o&&w(o,4e3,10),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(5);case 23:return e.prev=23,setTimeout(function(){i=!1},1e3),e.finish(23);case 26:case"end":return e.stop()}},e,null,[[5,20,23,26]])})),g.apply(this,arguments)}function p(){return p=Object(P.a)(regeneratorRuntime.mark(function e(){var t,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.lockModel){e.next=5;break}return w("管理员已锁定模型，无法切换哦～",4e3,9),e.abrupt("return");case 5:if(e.prev=5,w("正在加载新皮肤...",2e3,11),t=localStorage.getItem("modelId")||"0",a){e.next=13;break}return e.next=13,d();case 13:o=y(a.models[t]),i="".concat(n,"model/").concat(o,"/index.json"),loadlive2d("live2d",i),setTimeout(function(){w("我的新衣服好看嘛？",4e3,10)},2e3),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(5),w("切换皮肤失败，请检查网络连接",3e3,9);case 25:case"end":return e.stop()}},e,null,[[5,21]])})),p.apply(this,arguments)}function v(){return v=Object(P.a)(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.lockModel){e.next=5;break}return w("管理员已锁定模型，无法切换哦～",4e3,9),e.abrupt("return");case 5:if(e.prev=5,t=parseInt(localStorage.getItem("modelId")||"0"),a){e.next=12;break}return e.next=12,d();case 12:return n=++t>=a.models.length?0:t,e.next=17,h(n,null,a.messages[n]);case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(5),w("切换模型失败，请查看控制台错误信息",3e3,9);case 23:case"end":return e.stop()}},e,null,[[5,19]])})),v.apply(this,arguments)}function b(e){var t=new Array("富强","民主","文明","和谐","自由","平等","公正","法治","爱国","敬业","诚信","友善"),n=$("<span>").text(t[o]);o=(o+1)%t.length;var r=e.pageX,a=e.pageY;n.css({"z-index":1e3,top:a-20,left:r,position:"absolute","pointer-events":"none","font-weight":"bold",color:"#ff6651"}),$("body").append(n),n.animate({top:a-180,opacity:0},1500,function(){n.remove()})}function y(e){return Array.isArray(e)?e[Math.floor(Math.random()*e.length)]:e}function w(e,t,n){if(e&&!(localStorage.getItem("waifu-text")&&localStorage.getItem("waifu-text")>n)){u&&(clearTimeout(u),u=null),e=y(e),localStorage.setItem("waifu-text",n);var r=document.getElementById("waifu-tips");r.innerHTML=e,r.classList.add("waifu-tips-active"),u=setTimeout(function(){localStorage.removeItem("waifu-text"),r.classList.remove("waifu-tips-active")},t)}}function k(e){e.style.left="0px",e.style.bottom="0px",e.style.right="auto"}window.addEventListener("mousemove",function(){return l=!0}),window.addEventListener("keydown",function(){return l=!0}),setInterval(function(){l?(l=!1,clearInterval(s),s=null):s||(s=setInterval(function(){w(y(f),6e3,9)},2e4))},1e3),function(){if(r.showToolbar){var e=document.querySelector("#waifu-tool");if(!e)return;if(r.showHitokoto){var t=e.querySelector(".fa-comment");t&&t.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),fetch(C.hitokoto).then(function(e){return e.json()}).then(function(e){var t="这句一言来自 <span>「".concat(e.from,"」</span>，是 <span>").concat(e.creator,"</span> 在 hitokoto.cn 投稿的。");w(e.hitokoto,6e3,9),setTimeout(function(){w(t,4e3,9)},6e3)})})}var n=e.querySelector(".fa-street-view");n&&n.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),function(){v.apply(this,arguments)}()});var a=e.querySelector(".fa-camera-retro");a&&a.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),function(){p.apply(this,arguments)}()});var o=e.querySelector(".fa-mouse-pointer");o&&o.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),"0"===localStorage.getItem("showMouseAnimation")?(localStorage.setItem("showMouseAnimation","1"),document.querySelector("body").addEventListener("click",b),w("哈哈，要牢记社会主义核心价值观哦！",6e3,9)):(localStorage.setItem("showMouseAnimation","0"),document.querySelector("body").removeEventListener("click",b),w("今天你爱国了吗？",6e3,9))});var i=e.querySelector(".fa-times");i&&i.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),localStorage.setItem("waifu-display",Date.now()),w("愿你有一天能与重要的人重逢。",2e3,11);var t=document.getElementById("waifu");t.style.opacity="0",t.style.transition="opacity 0.3s",setTimeout(function(){t.style.display="none",t.style.transition="none";var e=document.getElementById("waifu-toggle");e&&e.classList.add("waifu-toggle-active")},300)})}window.addEventListener("copy",function(){w("你都复制了些什么呀，转载要记得加上出处哦！",6e3,9)}),window.addEventListener("visibilitychange",function(){document.hidden||w("哇，你终于回来了～",6e3,9)}),localStorage.setItem("showMouseAnimation","1"),document.querySelector("body").addEventListener("click",b)}(),function(){if(r.showWelcome){var e;if("/"===location.pathname){var t=(new Date).getHours();e=t>5&&t<=7?"早上好！一日之计在于晨，美好的一天就要开始了。":t>7&&t<=11?"上午好！工作顺利嘛，不要久坐，多起来走动走动哦！":t>11&&t<=13?"中午了，工作了一个上午，现在是午餐时间！":t>13&&t<=17?"午后很容易犯困呢，今天的运动目标完成了吗？":t>17&&t<=19?"傍晚了！窗外夕阳的景色很美丽呢，最美不过夕阳红～":t>19&&t<=21?"晚上好，今天过得怎么样？":t>21&&t<=23?["已经这么晚了呀，早点休息吧，晚安～","深夜时要爱护眼睛呀！"]:"你是夜猫子呀？这么晚还不睡觉，明天起的来嘛？"}else if(""!==document.referrer){var n=new URL(document.referrer),a=n.hostname.split(".")[1];e=location.hostname===n.hostname?"欢迎阅读<span>「".concat(document.title.split(" - ")[0],"」</span>"):"baidu"===a?"Hello！来自 百度搜索 的朋友<br>你是搜索 <span>".concat(n.search.split("&wd=")[1].split("&")[0],"</span> 找到的我吗？"):"so"===a?"Hello！来自 360搜索 的朋友<br>你是搜索 <span>".concat(n.search.split("&q=")[1].split("&")[0],"</span> 找到的我吗？"):"google"===a?"Hello！来自 谷歌搜索 的朋友<br>欢迎阅读<span>「".concat(document.title.split(" - ")[0],"」</span>"):"Hello！来自 <span>".concat(n.hostname,"</span> 的朋友")}else e="欢迎阅读<span>「".concat(document.title.split(" - ")[0],"」</span>");w(e,7e3,8)}}(),function(){var e=localStorage.getItem("modelId"),n=r.modelName&&null===e;null===e&&(e=0),h(e,n?r.modelName:null),window.addEventListener("error",function(e){if(e.message&&e.message.includes("Cannot read properties of undefined"))return e.preventDefault(),!1},!0),fetch(t).then(function(e){return e.json()}).then(function(e){e&&(Array.isArray(e.mouseover)&&window.addEventListener("mouseover",function(t){var n,r=Object(H.a)(e.mouseover);try{for(r.s();!(n=r.n()).done;){var a=n.value,o=a.selector,i=a.text;if(t.target.matches(o))return void w(i=(i=y(i)).replace("{text}",t.target.innerText),4e3,8)}}catch(e){r.e(e)}finally{r.f()}}),Array.isArray(e.click)&&window.addEventListener("click",function(t){var n,r=Object(H.a)(e.click);try{for(r.s();!(n=r.n()).done;){var a=n.value,o=a.selector,i=a.text;if(t.target.matches(o))return void w(i=(i=y(i)).replace("{text}",t.target.innerText),4e3,8)}}catch(e){r.e(e)}finally{r.f()}}),Array.isArray(e.seasons)&&e.seasons.forEach(function(e){var t=e.date,n=e.text,r=new Date,a=t.split("-")[0],o=t.split("-")[1]||a;a.split("/")[0]<=r.getMonth()+1&&r.getMonth()+1<=o.split("/")[0]&&a.split("/")[1]<=r.getDate()&&r.getDate()<=o.split("/")[1]&&(n=(n=y(n)).replace("{year}",r.getFullYear()),f.push(n))}))}).catch(function(e){})}()}n("4998"),n("c98c"),n("a2f0"),n("cadf"),n("7f91"),n("03fd"),n("1a0a"),n("8602"),n("64e1");var G=n("1188");o.default.use(a.a),o.default.use(G.vueBaberrage),o.default.use(z.a),o.default.use(U.a),o.default.directive("lazyload",_.a),o.default.prototype.$http=W,o.default.prototype.$common=N,o.default.prototype.$constant=C,o.default.prototype.$apiCache=M,o.default.prototype.$touchFeedback=Q,o.default.config.productionTip=!1,J.register(),window.innerWidth<=768&&o.default.nextTick(function(){Q.enableTouchFeedbackBatch("button, .el-button",{ripple:!0,scale:!0,vibrate:!1})});var Z=new o.default({router:f,store:k,render:function(e){return e(i.a)}}).$mount("#app");window.$notify=Z.$notify,window.$createElement=Z.$createElement},cf85:function(e,t,n){"use strict";var r=n("5530"),a=n("1da1");n("d3b7"),n("b0c0"),n("b680"),n("d9e2"),n("d81d"),n("820e"),n("3ca3"),n("ddb0"),n("fb6a"),n("ac1f"),n("5319"),n("a15b"),n("99af"),n("159b"),n("caad"),n("2532"),n("96cf"),t.a={compressImageByNetwork:function(e){var t=arguments,n=this;return Object(a.a)(regeneratorRuntime.mark(function a(){var o,i,c,s,u;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:o=t.length>1&&void 0!==t[1]?t[1]:{},i=n.getNetworkType(),c=.8,s=1920,a.t0=i,a.next="slow-2g"===a.t0||"2g"===a.t0?7:"3g"===a.t0?10:"4g"===a.t0?13:(a.t0,16);break;case 7:return c=.4,s=800,a.abrupt("break",19);case 10:return c=.6,s=1200,a.abrupt("break",19);case 13:return c=.8,s=1920,a.abrupt("break",19);case 16:return c=.9,s=2560,a.abrupt("break",19);case 19:return u=Object(r.a)({quality:o.quality||c,maxWidth:o.maxWidth||s,maxHeight:o.maxHeight||s},o),a.abrupt("return",n.compressImage(e,u));case 21:case"end":return a.stop()}},a)}))()},compressImage:function(e){var t=arguments,n=this;return Object(a.a)(regeneratorRuntime.mark(function r(){var a,o,i,c,s,u,l,f,d;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o=(a=t.length>1&&void 0!==t[1]?t[1]:{}).quality,i=void 0===o?.8:o,c=a.maxWidth,s=void 0===c?1920:c,u=a.maxHeight,l=void 0===u?1920:u,f=a.mimeType,d=void 0===f?"image/jpeg":f,r.abrupt("return",new Promise(function(t,r){var a=new FileReader;a.onload=function(a){var o=new Image;o.onload=function(){try{var a=document.createElement("canvas"),c=a.getContext("2d"),u=n.calculateSize(o.width,o.height,s,l),f=u.width,m=u.height;a.width=f,a.height=m,c.drawImage(o,0,0,f,m),a.toBlob(function(n){if(n){var a=new File([n],e.name,{type:d}),o=(100*(1-n.size/e.size)).toFixed(2);t({file:a,originalSize:e.size,compressedSize:n.size,compressionRate:"".concat(o,"%"),width:f,height:m})}else r(new Error("图片压缩失败"))},d,i)}catch(e){r(e)}},o.onerror=function(){return r(new Error("图片加载失败"))},o.src=a.target.result},a.onerror=function(){return r(new Error("文件读取失败"))},a.readAsDataURL(e)}));case 3:case"end":return r.stop()}},r)}))()},calculateSize:function(e,t,n,r){if(e<=n&&t<=r)return{width:e,height:t};var a=n/e,o=r/t,i=Math.min(a,o);return{width:Math.round(e*i),height:Math.round(t*i)}},getNetworkType:function(){if(!navigator.connection)return"unknown";var e=navigator.connection,t=e.effectiveType;return"wifi"===e.type?"wifi":t||"unknown"},getNetworkSpeed:function(){return navigator.connection?{downlink:navigator.connection.downlink,effectiveType:navigator.connection.effectiveType,rtt:navigator.connection.rtt,saveData:navigator.connection.saveData}:null},preloadImages:function(e){var t=this,n=e.map(function(e){return t.preloadImage(e)});return Promise.allSettled(n)},preloadImage:function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){return t({url:e,loaded:!0})},r.onerror=function(){return n({url:e,loaded:!1})},r.src=e})},smartPreload:function(e){var t=this;return Object(a.a)(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("slow-2g"!==(r=t.getNetworkType())&&"2g"!==r){n.next=4;break}return n.abrupt("return");case 4:if("3g"!==r){n.next=8;break}return a=e.slice(0,3),n.abrupt("return",t.preloadImages(a));case 8:return n.abrupt("return",t.preloadImages(e));case 10:case"end":return n.stop()}},n)}))()},convertToWebP:function(e){return Object(a.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){var r=new FileReader;r.onload=function(r){var a=new Image;a.onload=function(){var r=document.createElement("canvas");r.width=a.width,r.height=a.height,r.getContext("2d").drawImage(a,0,0),r.toBlob(function(r){if(r){var a=new File([r],e.name.replace(/\.[^.]+$/,".webp"),{type:"image/webp"});t(a)}else n(new Error("WebP转换失败"))},"image/webp",.8)},a.onerror=function(){return n(new Error("图片加载失败"))},a.src=r.target.result},r.onerror=function(){return n(new Error("文件读取失败"))},r.readAsDataURL(e)}));case 1:case"end":return t.stop()}},t)}))()},isSupportWebP:function(){var e=document.createElement("canvas");return e.width=1,e.height=1,0===e.toDataURL("image/webp").indexOf("data:image/webp")},getImageInfo:function(e){return Object(a.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){var r=new FileReader;r.onload=function(r){var a=new Image;a.onload=function(){t({width:a.width,height:a.height,size:e.size,type:e.type,name:e.name,ratio:(a.width/a.height).toFixed(2)})},a.onerror=function(){return n(new Error("图片加载失败"))},a.src=r.target.result},r.onerror=function(){return n(new Error("文件读取失败"))},r.readAsDataURL(e)}));case 1:case"end":return t.stop()}},t)}))()},generateSrcset:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[480,768,1024,1920]).map(function(t){return"".concat(e,"?w=").concat(t," ").concat(t,"w")}).join(", ")},createLazyObserver:function(e){return new IntersectionObserver(function(t,n){t.forEach(function(t){t.isIntersecting&&(e(t.target),n.unobserve(t.target))})},{root:null,rootMargin:"50px",threshold:.01})},formatFileSize:function(e){if(0===e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]},onNetworkChange:function(e){var t=this;if(!navigator.connection)return null;var n=navigator.connection,r=function(){var n=t.getNetworkSpeed();e(n)};return n.addEventListener("change",r),function(){n.removeEventListener("change",r)}},shouldLoadHDImage:function(){var e,t=this.getNetworkType();return!(null===(e=navigator.connection)||void 0===e?void 0:e.saveData)&&"slow-2g"!==t&&"2g"!==t},getAdaptiveImageUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.shouldLoadHDImage(),r=this.isSupportWebP(),a=e,o=n?90:60;return a+=a.includes("?")?"&":"?",a+="q=".concat(o),r&&!1!==t.webp&&(a+="&f=webp"),t.width&&(a+="&w=".concat(t.width)),a}}}},[[2,"runtime-app","chunk-vue~b1f96ece","chunk-vue~d2305125","chunk-vue~87de5440","chunk-element-ui~85c8dd33","chunk-element-ui~69afac5b","chunk-markdown~00c385fd","chunk-markdown~18c029cd","chunk-vendors~253ae210","chunk-vendors~d939e436","chunk-vendors~92c00e46","chunk-vendors~31c671ca","chunk-vendors~73914085","styles~a095a59b","app~748942c6"]],["chunk-markdown~00c385fd","chunk-markdown~18c029cd","chunk-commons~31ecd969","article~31ecd969","chunk-2d209ab9"]]);