(window.webpackJsonp=window.webpackJsonp||[]).push([["admin-userlist~3b199ac0"],{"02f6":function(e,t,s){"use strict";s("beda")},beda:function(e,t,s){},d401:function(e,t,s){"use strict";s.r(t);var r=(s("d9e2"),{data:function(){var e=this;return{pagination:{current:1,size:10,total:0,searchKey:"",userStatus:null,userType:null,userLv:null},users:[],changeUser:{id:null,userType:null,userLv:null},newUser:{id:null,username:"",password:"",confirmPassword:"",phoneNumber:"",email:"",userType:2,userLv:1,gender:0,introduction:""},userRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:32,message:"长度在2到32个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:32,message:"长度在6到32个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:function(t,s,r){s!==e.newUser.password?r(new Error("两次输入密码不一致")):r()},trigger:"blur"}],userType:[{required:!0,message:"请选择用户类型",trigger:"change"}],userLv:[{required:!0,message:"请选择用户等级",trigger:"change"}]},editVisible:!1,editVipVisible:!1,addVisible:!1,editMode:!1}},computed:{},watch:{},created:function(){this.getUsers()},mounted:function(){},methods:{clearSearch:function(){this.pagination={current:1,size:10,total:0,searchKey:"",userStatus:null,userType:null},this.getUsers()},getUsers:function(){var e=this;this.$http.post(this.$constant.baseURL+"/admin/user/list",this.pagination,!0).then(function(t){e.$common.isEmpty(t.data)||(e.users=t.data.records,e.pagination.total=t.data.total)}).catch(function(t){e.$message({message:t.message,type:"error"})})},changeUserStatus:function(e){var t=this;this.$http.get(this.$constant.baseURL+"/admin/user/changeUserStatus",{userId:e.id,flag:e.userStatus},!0).then(function(e){t.$message({message:"修改成功！",type:"success"})}).catch(function(e){t.$message({message:e.message,type:"error"})})},changeUserAdmire:function(e){var t=this;this.$common.isEmpty(e.admire)||this.$confirm("确认保存？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success",center:!0}).then(function(){t.$http.get(t.$constant.baseURL+"/admin/user/changeUserAdmire",{userId:e.id,admire:e.admire},!0).then(function(e){t.$message({message:"修改成功！",type:"success"})}).catch(function(e){t.$message({message:e.message,type:"error"})})}).catch(function(){t.$message({type:"success",message:"已取消保存!"})})},editUser:function(e){this.changeUser.id=e.id,this.changeUser.userType=e.userType,this.editVisible=!0},editVipUser:function(e){0!==e.userType?(this.changeUser.id=e.id,this.changeUser.userLv=e.userLv,this.editVipVisible=!0):this.$message({message:"站长不能修改等级！",type:"warning"})},handlePageChange:function(e){this.pagination.current=e,this.getUsers()},searchUser:function(){this.pagination.total=0,this.pagination.current=1,this.getUsers()},handleClose:function(){this.changeUser={id:null,userType:null,userLv:null},this.newUser={id:null,username:"",password:"",confirmPassword:"",phoneNumber:"",email:"",userType:2,userLv:1,gender:0,introduction:""},this.editVisible=!1,this.editVipVisible=!1,this.addVisible=!1,this.editMode=!1,this.$refs.userForm&&this.$refs.userForm.resetFields()},openAddDialog:function(){this.editMode=!1,this.addVisible=!0},openEditDialog:function(e){this.editMode=!0,this.newUser={id:e.id,username:e.username,password:"",confirmPassword:"",phoneNumber:e.phoneNumber||"",email:e.email||"",userType:e.userType,userLv:e.userLv,gender:e.gender||0,introduction:e.introduction||""},this.addVisible=!0},deleteUser:function(e){var t=this;this.$confirm('确认删除用户 "'+e.username+'" 吗？',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.get(t.$constant.baseURL+"/admin/user/deleteUser",{userId:e.id},!0).then(function(e){t.getUsers(),t.$message({message:"删除成功！",type:"success"})}).catch(function(e){t.$message({message:e.message,type:"error"})})}).catch(function(){})},saveNewUser:function(){var e=this;this.$refs.userForm.validate(function(t){if(t){var s=e.editMode?e.$constant.baseURL+"/admin/user/updateUser":e.$constant.baseURL+"/admin/user/addUser",r=e.editMode&&!e.newUser.password?{id:e.newUser.id,username:e.newUser.username,phoneNumber:e.newUser.phoneNumber,email:e.newUser.email,userType:e.newUser.userType,userLv:e.newUser.userLv,gender:e.newUser.gender,introduction:e.newUser.introduction}:e.newUser;e.$http.post(s,r,!0).then(function(t){e.handleClose(),e.getUsers(),e.$message({message:e.editMode?"修改成功！":"新增成功！",type:"success"})}).catch(function(t){e.$message({message:t.message,type:"error"})})}})},saveVipEdit:function(){var e=this;this.$http.get(this.$constant.baseURL+"/admin/user/changeUserLv",{userId:this.changeUser.id,userLv:this.changeUser.userLv},!0).then(function(t){e.handleClose(),e.getUsers(),e.$message({message:"修改成功！",type:"success"})}).catch(function(t){e.$message({message:t.message,type:"error"})})},saveEdit:function(){var e=this;this.$http.get(this.$constant.baseURL+"/admin/user/changeUserType",{userId:this.changeUser.id,userType:this.changeUser.userType},!0).then(function(t){e.handleClose(),e.getUsers(),e.$message({message:"修改成功！",type:"success"})}).catch(function(t){e.$message({message:t.message,type:"error"})})}}}),a=r,n=(s("02f6"),s("2877")),i=Object(n.a)(a,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",[s("div",{staticClass:"handle-box"},[s("el-select",{staticClass:"handle-select mrb10",attrs:{placeholder:"用户类型"},model:{value:e.pagination.userType,callback:function(t){e.$set(e.pagination,"userType",t)},expression:"pagination.userType"}},[s("el-option",{key:"1",attrs:{label:"站长",value:0}}),s("el-option",{key:"2",attrs:{label:"管理员",value:1}}),s("el-option",{key:"3",attrs:{label:"普通用户",value:2}})],1),s("el-select",{staticClass:"handle-select mrb10",attrs:{placeholder:"用户状态"},model:{value:e.pagination.userStatus,callback:function(t){e.$set(e.pagination,"userStatus",t)},expression:"pagination.userStatus"}},[s("el-option",{key:"1",attrs:{label:"启用",value:!0}}),s("el-option",{key:"2",attrs:{label:"禁用",value:!1}})],1),s("el-select",{staticClass:"handle-select mrb10",attrs:{placeholder:"用户等级"},model:{value:e.pagination.userLv,callback:function(t){e.$set(e.pagination,"userLv",t)},expression:"pagination.userLv"}},[s("el-option",{key:"1",attrs:{label:"VIP1",value:1}}),s("el-option",{key:"2",attrs:{label:"VIP2",value:2}}),s("el-option",{key:"3",attrs:{label:"VIP3",value:3}}),s("el-option",{key:"4",attrs:{label:"VIP4",value:4}}),s("el-option",{key:"5",attrs:{label:"VIP5",value:5}}),s("el-option",{key:"6",attrs:{label:"VIP6",value:6}})],1),s("el-input",{staticClass:"handle-input mrb10",attrs:{placeholder:"用户名/手机号/邮箱"},model:{value:e.pagination.searchKey,callback:function(t){e.$set(e.pagination,"searchKey",t)},expression:"pagination.searchKey"}}),s("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.searchUser()}}},[e._v("搜索")]),s("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.clearSearch()}}},[e._v("清除参数")]),s("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(t){return e.openAddDialog()}}},[e._v("新增用户")])],1),s("el-table",{staticClass:"table",attrs:{data:e.users,border:"","header-cell-class-name":"table-header"}},[s("el-table-column",{attrs:{prop:"id",label:"ID",width:"55",align:"center"}}),s("el-table-column",{attrs:{prop:"username",label:"用户名",align:"center"}}),s("el-table-column",{attrs:{prop:"phoneNumber",label:"手机号",align:"center"}}),s("el-table-column",{attrs:{prop:"email",label:"邮箱",align:"center"}}),s("el-table-column",{attrs:{label:"赞赏",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{size:"medium",maxlength:"30"},on:{blur:function(s){return e.changeUserAdmire(t.row)}},model:{value:t.row.admire,callback:function(s){e.$set(t.row,"admire",s)},expression:"scope.row.admire"}})]}}])}),s("el-table-column",{attrs:{label:"用户等级",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[6===t.row.userLv?s("el-tag",{staticStyle:{cursor:"pointer"},attrs:{type:"success","disable-transitions":""},nativeOn:{click:function(s){return e.editVipUser(t.row)}}},[e._v(" VIP6 ")]):5===t.row.userLv?s("el-tag",{staticStyle:{cursor:"pointer"},attrs:{type:"success","disable-transitions":""},nativeOn:{click:function(s){return e.editVipUser(t.row)}}},[e._v(" VIP5 ")]):4===t.row.userLv?s("el-tag",{staticStyle:{cursor:"pointer"},attrs:{type:"success","disable-transitions":""},nativeOn:{click:function(s){return e.editVipUser(t.row)}}},[e._v(" VIP4 ")]):3===t.row.userLv?s("el-tag",{staticStyle:{cursor:"pointer"},attrs:{type:"success","disable-transitions":""},nativeOn:{click:function(s){return e.editVipUser(t.row)}}},[e._v(" VIP3 ")]):2===t.row.userLv?s("el-tag",{staticStyle:{cursor:"pointer"},attrs:{type:"success","disable-transitions":""},nativeOn:{click:function(s){return e.editVipUser(t.row)}}},[e._v(" VIP2 ")]):s("el-tag",{staticStyle:{cursor:"pointer"},attrs:{type:"success","disable-transitions":""},nativeOn:{click:function(s){return e.editVipUser(t.row)}}},[e._v(" VIP1 ")])]}}])}),s("el-table-column",{attrs:{label:"用户状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tag",{attrs:{type:!1===t.row.userStatus?"danger":"success","disable-transitions":""}},[e._v(" "+e._s(!1===t.row.userStatus?"禁用":"启用")+" ")]),t.row.id!==e.$store.state.currentAdmin.id?s("el-switch",{nativeOn:{click:function(s){return e.changeUserStatus(t.row)}},model:{value:t.row.userStatus,callback:function(s){e.$set(t.row,"userStatus",s)},expression:"scope.row.userStatus"}}):e._e()]}}])}),s("el-table-column",{attrs:{label:"头像",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("el-image",{staticClass:"table-td-thumb",attrs:{lazy:"",src:e.row.avatar,fit:"cover"}})]}}])}),s("el-table-column",{attrs:{label:"性别",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.gender?s("el-tag",{attrs:{type:"success","disable-transitions":""}},[e._v(" 男 ")]):2===t.row.gender?s("el-tag",{attrs:{type:"success","disable-transitions":""}},[e._v(" 女 ")]):s("el-tag",{attrs:{type:"success","disable-transitions":""}},[e._v(" 保密 ")])]}}])}),s("el-table-column",{attrs:{prop:"introduction",label:"简介",align:"center"}}),s("el-table-column",{attrs:{label:"用户类型",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.userType?s("el-tag",{attrs:{type:"success","disable-transitions":""}},[e._v(" 站长 ")]):1===t.row.userType?s("el-tag",{staticStyle:{cursor:"pointer"},attrs:{type:"success","disable-transitions":""},nativeOn:{click:function(s){return e.editUser(t.row)}}},[e._v(" 管理员 ")]):s("el-tag",{staticStyle:{cursor:"pointer"},attrs:{type:"success","disable-transitions":""},nativeOn:{click:function(s){return e.editUser(t.row)}}},[e._v(" 普通用户 ")])]}}])}),s("el-table-column",{attrs:{prop:"createTime",label:"注册时间",align:"center"}}),s("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(s){return e.openEditDialog(t.row)}}},[e._v("编辑")]),t.row.id!==e.$store.state.currentAdmin.id?s("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(s){return e.deleteUser(t.row)}}},[e._v("删除")]):e._e()]}}])})],1),s("div",{staticClass:"pagination"},[s("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","pager-count":5,"current-page":e.pagination.current,"page-size":e.pagination.size,total:e.pagination.total},on:{"current-change":e.handlePageChange}})],1)],1),s("el-dialog",{attrs:{title:"修改用户类型",visible:e.editVisible,width:"30%","before-close":e.handleClose,"append-to-body":!0,"destroy-on-close":"",center:""},on:{"update:visible":function(t){e.editVisible=t}}},[s("div",{staticClass:"myCenter"},[s("el-radio-group",{model:{value:e.changeUser.userType,callback:function(t){e.$set(e.changeUser,"userType",t)},expression:"changeUser.userType"}},[s("el-radio-button",{attrs:{label:1}},[e._v("管理员")]),s("el-radio-button",{attrs:{label:2}},[e._v("普通用户")])],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){return e.handleClose()}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveEdit()}}},[e._v("确 定")])],1)]),s("el-dialog",{attrs:{title:"修改用户等级",visible:e.editVipVisible,width:"40%","before-close":e.handleClose,"append-to-body":!0,"destroy-on-close":"",center:""},on:{"update:visible":function(t){e.editVipVisible=t}}},[s("div",{staticClass:"myCenter"},[s("el-radio-group",{attrs:{size:"small"},model:{value:e.changeUser.userLv,callback:function(t){e.$set(e.changeUser,"userLv",t)},expression:"changeUser.userLv"}},[s("el-radio-button",{attrs:{label:1}},[e._v("VIP1")]),s("el-radio-button",{attrs:{label:2}},[e._v("VIP2")]),s("el-radio-button",{attrs:{label:3}},[e._v("VIP3")]),s("el-radio-button",{attrs:{label:4}},[e._v("VIP4")]),s("el-radio-button",{attrs:{label:5}},[e._v("VIP5")]),s("el-radio-button",{attrs:{label:6}},[e._v("VIP6")])],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){return e.handleClose()}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveVipEdit()}}},[e._v("确 定")])],1)]),s("el-dialog",{attrs:{title:e.editMode?"编辑用户":"新增用户",visible:e.addVisible,width:"500px","before-close":e.handleClose,"append-to-body":!0,"destroy-on-close":"",center:""},on:{"update:visible":function(t){e.addVisible=t}}},[s("el-form",{ref:"userForm",attrs:{model:e.newUser,rules:e.userRules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"用户名",prop:"username"}},[s("el-input",{attrs:{placeholder:"请输入用户名",maxlength:"32",disabled:e.editMode},model:{value:e.newUser.username,callback:function(t){e.$set(e.newUser,"username",t)},expression:"newUser.username"}})],1),s("el-form-item",{attrs:{label:"密码",prop:e.editMode?"":"password"}},[s("el-input",{attrs:{type:"password",placeholder:e.editMode?"不修改请留空":"请输入密码",maxlength:"32","show-password":""},model:{value:e.newUser.password,callback:function(t){e.$set(e.newUser,"password",t)},expression:"newUser.password"}})],1),!e.editMode||e.newUser.password?s("el-form-item",{attrs:{label:"确认密码",prop:e.editMode?"":"confirmPassword"}},[s("el-input",{attrs:{type:"password",placeholder:"请再次输入密码",maxlength:"32","show-password":""},model:{value:e.newUser.confirmPassword,callback:function(t){e.$set(e.newUser,"confirmPassword",t)},expression:"newUser.confirmPassword"}})],1):e._e(),s("el-form-item",{attrs:{label:"手机号"}},[s("el-input",{attrs:{placeholder:"请输入手机号",maxlength:"16"},model:{value:e.newUser.phoneNumber,callback:function(t){e.$set(e.newUser,"phoneNumber",t)},expression:"newUser.phoneNumber"}})],1),s("el-form-item",{attrs:{label:"邮箱"}},[s("el-input",{attrs:{placeholder:"请输入邮箱",maxlength:"32"},model:{value:e.newUser.email,callback:function(t){e.$set(e.newUser,"email",t)},expression:"newUser.email"}})],1),e.newUser.id!==e.$store.state.currentAdmin.id?s("el-form-item",{attrs:{label:"用户类型",prop:"userType"}},[s("el-radio-group",{model:{value:e.newUser.userType,callback:function(t){e.$set(e.newUser,"userType",t)},expression:"newUser.userType"}},[s("el-radio",{attrs:{label:1}},[e._v("管理员")]),s("el-radio",{attrs:{label:2}},[e._v("普通用户")])],1)],1):e._e(),s("el-form-item",{attrs:{label:"用户等级",prop:"userLv"}},[s("el-select",{attrs:{placeholder:"请选择用户等级"},model:{value:e.newUser.userLv,callback:function(t){e.$set(e.newUser,"userLv",t)},expression:"newUser.userLv"}},[s("el-option",{attrs:{label:"VIP1",value:1}}),s("el-option",{attrs:{label:"VIP2",value:2}}),s("el-option",{attrs:{label:"VIP3",value:3}}),s("el-option",{attrs:{label:"VIP4",value:4}}),s("el-option",{attrs:{label:"VIP5",value:5}}),s("el-option",{attrs:{label:"VIP6",value:6}})],1)],1),s("el-form-item",{attrs:{label:"性别"}},[s("el-radio-group",{model:{value:e.newUser.gender,callback:function(t){e.$set(e.newUser,"gender",t)},expression:"newUser.gender"}},[s("el-radio",{attrs:{label:0}},[e._v("保密")]),s("el-radio",{attrs:{label:1}},[e._v("男")]),s("el-radio",{attrs:{label:2}},[e._v("女")])],1)],1),s("el-form-item",{attrs:{label:"简介"}},[s("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入用户简介",maxlength:"200"},model:{value:e.newUser.introduction,callback:function(t){e.$set(e.newUser,"introduction",t)},expression:"newUser.introduction"}})],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){return e.handleClose()}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveNewUser()}}},[e._v("确 定")])],1)],1)],1)},[],!1,null,"6b715fe0",null);t.default=i.exports}}]);