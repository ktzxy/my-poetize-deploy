(window.webpackJsonp=window.webpackJsonp||[]).push([["admin-postedit~31ecd969"],{"38cf":function(e,t,a){a("23e7")({target:"String",proto:!0},{repeat:a("1148")})},"5fa0":function(e,t,a){},"857a":function(e,t,a){var r=a("e330"),i=a("1d80"),s=a("577e"),n=/"/g,o=r("".replace);e.exports=function(e,t,a,r){var l=s(i(e)),c="<"+t;return""!==a&&(c+=" "+a+'="'+o(s(r),n,"&quot;")+'"'),c+">"+l+"</"+t+">"}},"868a":function(e,t,a){"use strict";a.r(t);var r=a("5530"),i=(a("d3b7"),a("3ca3"),a("ddb0"),a("4de4"),a("cc71"),a("c5d0"),a("9911"),a("ac1f"),a("466d"),a("498a"),a("b0c0"),a("5319"),a("2ca0"),a("8a79"),a("caad"),a("2532"),a("99af"),a("a630"),a("159b"),a("1276"),a("e9c4"),a("4e82"),a("a434"),a("38cf"),a("a15b"),a("d81d"),a("cb29"),{autoSave:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e4,i=null,s=function(){var a=t();if(a){var i=Object(r.a)(Object(r.a)({},a),{},{savedAt:(new Date).toISOString()});localStorage.setItem("draft_".concat(e),JSON.stringify(i))}};return s(),i=setInterval(s,a),function(){i&&(clearInterval(i),i=null)}},loadDraft:function(e){try{var t=localStorage.getItem("draft_".concat(e));return t?JSON.parse(t):null}catch(e){return null}},deleteDraft:function(e){localStorage.removeItem("draft_".concat(e))},getAllDrafts:function(){for(var e=[],t=0;t<localStorage.length;t++){var a=localStorage.key(t);if(a&&a.startsWith("draft_"))try{var i=JSON.parse(localStorage.getItem(a));e.push(Object(r.a)({key:a.replace("draft_","")},i))}catch(e){}}return e.sort(function(e,t){return new Date(t.savedAt)-new Date(e.savedAt)})},cleanExpiredDrafts:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,a=Date.now()-24*t*60*60*1e3;this.getAllDrafts().forEach(function(t){new Date(t.savedAt).getTime()<a&&e.deleteDraft(t.key)})},registerHotkeys:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(t){var a=navigator.platform.toUpperCase().indexOf("MAC")>=0?t.metaKey:t.ctrlKey;a&&"s"===t.key&&(t.preventDefault(),e.save&&e.save()),a&&"b"===t.key&&(t.preventDefault(),e.bold&&e.bold()),a&&"i"===t.key&&(t.preventDefault(),e.italic&&e.italic()),a&&"k"===t.key&&(t.preventDefault(),e.link&&e.link()),a&&t.shiftKey&&"C"===t.key&&(t.preventDefault(),e.code&&e.code()),a&&t.shiftKey&&"I"===t.key&&(t.preventDefault(),e.image&&e.image()),a&&!t.shiftKey&&"z"===t.key&&e.undo&&e.undo(),a&&t.shiftKey&&"Z"===t.key&&(t.preventDefault(),e.redo&&e.redo())};return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}},versionManager:{maxVersions:10,saveVersion:function(e,t){var a=this.getVersions(e);a.unshift({content:t,timestamp:(new Date).toISOString(),version:a.length+1}),a.length>this.maxVersions&&a.splice(this.maxVersions),localStorage.setItem("versions_".concat(e),JSON.stringify(a))},getVersions:function(e){try{var t=localStorage.getItem("versions_".concat(e));return t?JSON.parse(t):[]}catch(e){return[]}},restoreVersion:function(e,t){return this.getVersions(e)[t]||null},clearVersions:function(e){localStorage.removeItem("versions_".concat(e))}},markdownShortcuts:{heading:function(){return"#".repeat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)+" "},bold:function(){return"**".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"粗体文字","**")},italic:function(){return"*".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"斜体文字","*")},link:function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https://example.com";return"[".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"链接文本","](").concat(e,")")},image:function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"![".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"图片描述","](").concat(e,")")},codeBlock:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"```".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"javascript","\n").concat(e,"\n```")},inlineCode:function(){return"`".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"code","`")},quote:function(){return"> ".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"引用内容")},unorderedList:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:["项目1","项目2","项目3"]).map(function(e){return"- ".concat(e)}).join("\n")},orderedList:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:["项目1","项目2","项目3"]).map(function(e,t){return"".concat(t+1,". ").concat(e)}).join("\n")},table:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a="| "+Array(t).fill("列").map(function(e,t){return e+(t+1)}).join(" | ")+" |",r="| "+Array(t).fill("---").join(" | ")+" |",i=Array(e-1).fill(0).map(function(){return"| "+Array(t).fill("内容").join(" | ")+" |"}).join("\n");return"".concat(a,"\n").concat(r,"\n").concat(i)},divider:function(){return"---"},taskList:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:["已完成任务","未完成任务"]).map(function(e,t){return"- [".concat(0===t?"x":" ","] ").concat(e)}).join("\n")}},getStatistics:function(e){var t;return e?{words:(null===(t=e.replace(/```[\s\S]*?```/g,"").match(/[\u4e00-\u9fa5\w]+/g))||void 0===t?void 0:t.length)||0,chars:e.length,lines:e.split("\n").length,images:(e.match(/!\[.*?\]\(.*?\)/g)||[]).length,links:(e.match(/\[.*?\]\(.*?\)/g)||[]).length,codeBlocks:(e.match(/```/g)||[]).length/2}:{words:0,chars:0,lines:0,images:0,links:0,codeBlocks:0}}}),s={components:{uploadPicture:function(){return a.e("chunk-commons~31ecd969").then(a.bind(null,"6034"))},TemplateSelector:function(){return Promise.all([a.e("chunk-commons~31ecd969"),a.e("chunk-f494c90e")]).then(a.bind(null,"13d8"))},EditorSidebar:function(){return a.e("chunk-9fa9df8e").then(a.bind(null,"c776"))}},data:function(){return{id:this.$route.query.id,article:{articleTitle:"",articleContent:"",summary:"",commentStatus:!0,recommendStatus:!1,viewType:"",viewValue:"",tips:"",articleCover:"",videoUrl:"",sortId:null,labelId:null},sorts:[],labels:[],labelsTemp:[],rules:{articleTitle:[{required:!0,message:"请输入标题",trigger:"change"}],articleContent:[{required:!0,message:"请输入内容",trigger:"change"}],commentStatus:[{required:!0,message:"是否启用评论",trigger:"change"}],recommendStatus:[{required:!0,message:"是否推荐",trigger:"change"}],viewType:[{required:!0,message:"访问类型",trigger:"change"}],articleCover:[{required:!0,message:"封面",trigger:"change"}],sortId:[{required:!0,message:"分类",trigger:"change"}],labelId:[{required:!0,message:"标签",trigger:"blur"}]},showTemplateSelector:!1}},computed:{editorStats:function(){return i.getStatistics(this.article.articleContent)}},watch:{"article.sortId":function(e,t){null!==t&&(this.article.labelId=null),this.$common.isEmpty(e)||this.$common.isEmpty(this.labels)||(this.labelsTemp=this.labels.filter(function(t){return t.sortId===e}))}},created:function(){var e=this;this.getSortAndLabel();var t=this.id||"new",a=i.loadDraft(t);a&&!this.id&&this.$confirm("检测到未保存的草稿，是否恢复？","提示",{confirmButtonText:"恢复",cancelButtonText:"删除",type:"info"}).then(function(){e.article=Object(r.a)(Object(r.a)({},e.article),a),e.$message.success("草稿已恢复")}).catch(function(){i.deleteDraft(t),e.$message.info("草稿已删除")})},mounted:function(){var e=this,t=this.id||"new";this.stopAutoSave=i.autoSave(t,function(){return e.article},3e4),this.unregisterHotkeys=i.registerHotkeys({save:function(){return e.submitForm("ruleForm")},bold:function(){return e.insertMarkdown("bold")},italic:function(){return e.insertMarkdown("italic")},link:function(){return e.insertMarkdown("link")},code:function(){return e.insertMarkdown("code")},image:function(){return e.insertMarkdown("image")}}),this.initPasteImageUpload(),this.initDragImageUpload()},beforeDestroy:function(){this.stopAutoSave&&this.stopAutoSave(),this.unregisterHotkeys&&this.unregisterHotkeys()},methods:{insertMarkdown:function(e){var t=i.markdownShortcuts,a="";switch(e){case"bold":a=t.bold();break;case"italic":a=t.italic();break;case"link":a=t.link();break;case"code":a=t.codeBlock();break;case"image":a=t.image()}this.article.articleContent+="\n"+a},handleImportMd:function(e){var t=this,a=new FileReader;a.onload=function(e){try{var a=e.target.result,r=a.match(/^#\s+(.+)$/m);r&&t.$common.isEmpty(t.article.articleTitle)&&(t.article.articleTitle=r[1].trim()),t.article.articleContent=a,t.$message({message:"导入MD文档成功！",type:"success"})}catch(e){t.$message({message:"导入失败："+e.message,type:"error"})}},a.onerror=function(){t.$message({message:"文件读取失败",type:"error"})},a.readAsText(e.raw,"UTF-8")},imgAdd:function(e,t){var a="";-1!==t.name.lastIndexOf(".")&&(a=t.name.substring(t.name.lastIndexOf(".")));var r="articlePicture/"+this.$store.state.currentAdmin.username.replace(/[^a-zA-Z]/g,"")+this.$store.state.currentAdmin.id+(new Date).getTime()+Math.floor(1e3*Math.random())+a,i=localStorage.getItem("defaultStoreType"),s=new FormData;s.append("file",t),s.append("originalName",t.name),s.append("key",r),s.append("relativePath",r),s.append("type","articlePicture"),s.append("storeType",i),"local"===i?this.saveLocal(e,s):"qiniu"===i&&this.saveQiniu(e,s)},saveLocal:function(e,t){var a=this;this.$http.upload(this.$constant.baseURL+"/resource/upload",t,!0).then(function(t){if(!a.$common.isEmpty(t.data)){var r=t.data,i=a.$store.state.sysConfig["local.downloadUrl"]||a.$store.state.sysConfig.webStaticResourcePrefix;r&&"string"==typeof r&&i&&(r.startsWith("http://")||r.startsWith("https://")||(r=i.endsWith("/resourceStorage/")||i.endsWith("resourceStorage/")||r.includes("resourceStorage/")?i+r:r.startsWith("articlePicture/")||r.startsWith("articleCover/")||r.startsWith("userAvatar/")?i+"resourceStorage/"+r:i+r)),a.$refs.md.$img2Url(e,r)}}).catch(function(e){a.$message({message:e.message,type:"error"})})},saveQiniu:function(e,t){var a=this;this.$http.get(this.$constant.baseURL+"/qiniu/getUpToken",{key:t.get("key")},!0).then(function(r){a.$common.isEmpty(r.data)||(t.append("token",r.data),a.$http.uploadQiniu(a.$store.state.sysConfig.qiniuUrl,t).then(function(r){if(!a.$common.isEmpty(r.key)){var i=a.$store.state.sysConfig["qiniu.downloadUrl"]+r.key,s=t.get("file");a.$common.saveResource(a,"articlePicture",i,s.size,s.type,s.name,"qiniu",!0);var n=a.$store.state.sysConfig["local.downloadUrl"]||a.$store.state.sysConfig.webStaticResourcePrefix;i&&"string"==typeof i&&n&&(i.startsWith("http://")||i.startsWith("https://")||(i=n.endsWith("/resourceStorage/")||n.endsWith("resourceStorage/")||i.includes("resourceStorage/")?n+i:i.startsWith("articlePicture/")||i.startsWith("articleCover/")||i.startsWith("userAvatar/")?n+"resourceStorage/"+i:n+i)),a.$refs.md.$img2Url(e,i)}}).catch(function(e){a.$message({message:e.message,type:"error"})}))}).catch(function(e){a.$message({message:e.message,type:"error"})})},addArticleCover:function(e){if(e&&"string"==typeof e){var t=this.$store.state.sysConfig["local.downloadUrl"]||this.$store.state.sysConfig.webStaticResourcePrefix;e.startsWith("http://")||e.startsWith("https://")||!t?this.article.articleCover=e:t.endsWith("/resourceStorage/")||t.endsWith("resourceStorage/")||e.includes("resourceStorage/")?this.article.articleCover=t+e:e.startsWith("articleCover/")||e.startsWith("articlePicture/")||e.startsWith("userAvatar/")?this.article.articleCover=t+"resourceStorage/"+e:this.article.articleCover=t+e}else this.article.articleCover=e},getSortAndLabel:function(){var e=this;this.$http.get(this.$constant.baseURL+"/webInfo/listSortAndLabel").then(function(t){e.$common.isEmpty(t.data)||(e.sorts=t.data.sorts,e.labels=t.data.labels,e.$common.isEmpty(e.id)||e.getArticle())}).catch(function(t){e.$message({message:t.message,type:"error"})})},getArticle:function(){var e=this;this.$http.get(this.$constant.baseURL+"/admin/article/getArticleById",{id:this.id},!0).then(function(t){if(!e.$common.isEmpty(t.data)){var a=Object(r.a)({},t.data);if(a.articleCover&&"string"==typeof a.articleCover){var i=e.$store.state.sysConfig["local.downloadUrl"]||e.$store.state.sysConfig.webStaticResourcePrefix;a.articleCover.startsWith("http://")||a.articleCover.startsWith("https://")||!i||(i.endsWith("/resourceStorage/")||i.endsWith("resourceStorage/")||a.articleCover.includes("resourceStorage/")?a.articleCover=i+a.articleCover:a.articleCover.startsWith("articleCover/")||a.articleCover.startsWith("articlePicture/")||a.articleCover.startsWith("userAvatar/")?a.articleCover=i+"resourceStorage/"+a.articleCover:a.articleCover=i+a.articleCover)}if(a.articleContent&&"string"==typeof a.articleContent){var s=e.$store.state.sysConfig["local.downloadUrl"]||e.$store.state.sysConfig.webStaticResourcePrefix;s&&(a.articleContent=a.articleContent.replace(/\!\[([^\]]*)\]\(([^\)]+)\)/g,function(e,t,a){return a.startsWith("http://")||a.startsWith("https://")||(a=s.endsWith("/resourceStorage/")||s.endsWith("resourceStorage/")||a.includes("resourceStorage/")?s+a:a.startsWith("articlePicture/")||a.startsWith("articleCover/")||a.startsWith("userAvatar/")?s+"resourceStorage/"+a:s+a),"![".concat(t,"](").concat(a,")")}))}e.article=a}}).catch(function(t){e.$message({message:t.message,type:"error"})})},submitForm:function(e){var t=this;"password"!==this.article.viewType&&"userLv"!==this.article.viewType||!this.$common.isEmpty(this.article.viewValue)?this.$refs[e].validate(function(e){e?t.$common.isEmpty(t.id)?t.saveArticle(t.article,"/article/saveArticle"):(t.article.id=t.id,t.saveArticle(t.article,"/article/updateArticle")):t.$message({message:"请完善必填项！",type:"error"})}):this.$message({message:"请设置文章访问参数！",type:"error"})},resetForm:function(e){this.$refs[e].resetFields(),this.$common.isEmpty(this.id)||this.getArticle()},saveArticle:function(e,t){var a=this;this.$confirm("确认保存？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success",center:!0}).then(function(){a.$http.post(a.$constant.baseURL+t,e,!0).then(function(e){a.$message({message:"保存成功！",type:"success"}),a.$apiCache.clearByPattern("/webInfo/getSortInfo");var t=a.id||"new";i.deleteDraft(t),a.$router.push({path:"/postList"})}).catch(function(e){a.$message({message:e.message,type:"error"})})}).catch(function(){a.$message({type:"success",message:"已取消保存!"})})},initPasteImageUpload:function(){var e=this,t=document.querySelector(".v-note-edit.divarea-wrapper");t&&t.addEventListener("paste",function(t){var a=t.clipboardData&&t.clipboardData.items;if(a)for(var r=0;r<a.length;r++){var i=a[r];if("file"===i.kind&&-1!==i.type.indexOf("image")){t.preventDefault();var s=i.getAsFile();s&&(e.$message({message:"正在上传粘贴的图片...",type:"info",duration:1e3}),e.uploadPasteImage(s));break}}})},initDragImageUpload:function(){var e=this,t=document.querySelector(".v-note-edit.divarea-wrapper");t&&(t.addEventListener("dragover",function(e){e.preventDefault(),e.stopPropagation(),t.style.backgroundColor="rgba(24, 144, 255, 0.1)"}),t.addEventListener("dragleave",function(e){e.preventDefault(),e.stopPropagation(),t.style.backgroundColor=""}),t.addEventListener("drop",function(a){a.preventDefault(),a.stopPropagation(),t.style.backgroundColor="";var r=a.dataTransfer.files;if(r&&0!==r.length){var i=Array.from(r).filter(function(e){return-1!==e.type.indexOf("image")});0!==i.length?i.length>5?e.$message({message:"一次最多上传5张图片",type:"warning"}):(e.$message({message:"正在上传 ".concat(i.length," 张图片..."),type:"info",duration:2e3}),i.forEach(function(t){e.uploadPasteImage(t)})):e.$message({message:"请拖拽图片文件",type:"warning"})}}))},uploadPasteImage:function(e){if(e.size>5242880)this.$message({message:"图片大小不能超过5MB",type:"error"});else{var t="";if(e.name&&-1!==e.name.lastIndexOf("."))t=e.name.substring(e.name.lastIndexOf("."));else{t={"image/png":".png","image/jpeg":".jpg","image/jpg":".jpg","image/gif":".gif","image/webp":".webp"}[e.type]||".png"}var a="articlePicture/"+this.$store.state.currentAdmin.username.replace(/[^a-zA-Z]/g,"")+this.$store.state.currentAdmin.id+(new Date).getTime()+Math.floor(1e3*Math.random())+t,r=localStorage.getItem("defaultStoreType"),i=new FormData;i.append("file",e),i.append("originalName",e.name||"paste-image"+t),i.append("key",a),i.append("relativePath",a),i.append("type","articlePicture"),i.append("storeType",r),"local"===r?this.uploadPasteToLocal(i):"qiniu"===r&&this.uploadPasteToQiniu(i)}},uploadPasteToLocal:function(e){var t=this;this.$http.upload(this.$constant.baseURL+"/resource/upload",e,!0).then(function(e){if(!t.$common.isEmpty(e.data)){var a=e.data;t.insertImageToEditor(a),t.$message({message:"图片上传成功",type:"success"})}}).catch(function(e){t.$message({message:"图片上传失败："+e.message,type:"error"})})},uploadPasteToQiniu:function(e){var t=this;this.$http.get(this.$constant.baseURL+"/qiniu/getUpToken",{key:e.get("key")},!0).then(function(a){t.$common.isEmpty(a.data)||(e.append("token",a.data),t.$http.uploadQiniu(t.$store.state.sysConfig.qiniuUrl,e).then(function(a){if(!t.$common.isEmpty(a.key)){var r=t.$store.state.sysConfig["qiniu.downloadUrl"]+a.key,i=e.get("file");t.$common.saveResource(t,"articlePicture",r,i.size,i.type,i.name,"qiniu",!0),t.insertImageToEditor(r),t.$message({message:"图片上传成功",type:"success"})}}).catch(function(e){t.$message({message:"图片上传失败："+e.message,type:"error"})}))}).catch(function(e){t.$message({message:"获取上传凭证失败："+e.message,type:"error"})})},insertImageToEditor:function(e){var t=this.$store.state.sysConfig["local.downloadUrl"]||this.$store.state.sysConfig.webStaticResourcePrefix;if(e&&"string"==typeof e&&t&&(e.startsWith("http://")||e.startsWith("https://")||(e=t.endsWith("/resourceStorage/")||t.endsWith("resourceStorage/")||e.includes("resourceStorage/")?t+e:e.startsWith("articlePicture/")||e.startsWith("articleCover/")||e.startsWith("userAvatar/")?t+"resourceStorage/"+e:t+e)),this.$refs.md){var a="\n![图片](".concat(e,")\n"),r=this.article.articleContent||"";this.article.articleContent=r+a}},handleTemplateSelect:function(e){var t=this;e&&this.$confirm("确认使用此模板？当前内容将被替换","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(t.article.articleContent=e.content,e.content){var a=e.content.split("\n")[0];a.startsWith("#")&&(t.article.articleTitle=a.replace(/^#+\s*/,"").trim())}t.$message.success("已应用模板")}).catch(function(){})}}},n=s,o=(a("d2da"),a("2877")),l=Object(o.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"post-edit-container"},[a("div",{staticClass:"main-editor"},[a("el-tag",{staticClass:"my-tag",attrs:{effect:"dark"}},[a("svg",{staticStyle:{"vertical-align":"-3px"},attrs:{viewBox:"0 0 1024 1024",width:"20",height:"20"}},[a("path",{attrs:{d:"M0 0h1024v1024H0V0z",fill:"#202425",opacity:".01"}}),a("path",{attrs:{d:"M682.666667 204.8h238.933333a34.133333 34.133333 0 0 1 34.133333 34.133333v648.533334a68.266667 68.266667 0 0 1-68.266666 68.266666h-204.8V204.8z",fill:"#FFAA44"}}),a("path",{attrs:{d:"M68.266667 921.6a34.133333 34.133333 0 0 0 34.133333 34.133333h785.066667a68.266667 68.266667 0 0 1-68.266667-68.266666V102.4a34.133333 34.133333 0 0 0-34.133333-34.133333H102.4a34.133333 34.133333 0 0 0-34.133333 34.133333v819.2z",fill:"#11AA66"}}),a("path",{attrs:{d:"M238.933333 307.2a34.133333 34.133333 0 0 0 0 68.266667h136.533334a34.133333 34.133333 0 1 0 0-68.266667H238.933333z m0 204.8a34.133333 34.133333 0 1 0 0 68.266667h409.6a34.133333 34.133333 0 1 0 0-68.266667H238.933333z m0 204.8a34.133333 34.133333 0 1 0 0 68.266667h204.8a34.133333 34.133333 0 1 0 0-68.266667H238.933333z",fill:"#FFFFFF"}})]),e._v(" 文章信息 ")]),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.article,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"标题",prop:"articleTitle"}},[a("div",{staticStyle:{display:"flex",gap:"10px"}},[a("el-input",{staticStyle:{flex:"1"},attrs:{maxlength:"30"},model:{value:e.article.articleTitle,callback:function(t){e.$set(e.article,"articleTitle",t)},expression:"article.articleTitle"}}),a("el-button",{attrs:{type:"info",icon:"el-icon-document"},on:{click:function(t){e.showTemplateSelector=!0}}},[e._v(" 使用模板 ")]),a("el-upload",{attrs:{action:"#","auto-upload":!1,"show-file-list":!1,accept:".md,.markdown","on-change":e.handleImportMd}},[a("el-button",{attrs:{type:"success",icon:"el-icon-upload2"}},[e._v("导入MD文档")])],1)],1)]),a("el-form-item",{attrs:{label:"视频链接",prop:"videoUrl"}},[a("el-input",{attrs:{maxlength:"1000"},model:{value:e.article.videoUrl,callback:function(t){e.$set(e.article,"videoUrl",t)},expression:"article.videoUrl"}})],1),a("el-form-item",{attrs:{"label-width":"auto",prop:"articleContent"}},[a("mavon-editor",{ref:"md",on:{imgAdd:e.imgAdd},model:{value:e.article.articleContent,callback:function(t){e.$set(e.article,"articleContent",t)},expression:"article.articleContent"}})],1),a("el-form-item",{attrs:{label:"文章摘要",prop:"summary"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入文章摘要，将显示在首页文章卡片和文章详情页顶部（可选）",maxlength:"500","show-word-limit":""},model:{value:e.article.summary,callback:function(t){e.$set(e.article,"summary",t)},expression:"article.summary"}})],1),a("el-form-item",{attrs:{label:"启用评论",prop:"commentStatus"}},[a("el-tag",{attrs:{type:!1===e.article.commentStatus?"danger":"success","disable-transitions":""}},[e._v(" "+e._s(!1===e.article.commentStatus?"否":"是")+" ")]),a("el-switch",{model:{value:e.article.commentStatus,callback:function(t){e.$set(e.article,"commentStatus",t)},expression:"article.commentStatus"}})],1),a("el-form-item",{attrs:{label:"是否推荐",prop:"recommendStatus"}},[a("el-tag",{attrs:{type:!1===e.article.recommendStatus?"danger":"success","disable-transitions":""}},[e._v(" "+e._s(!1===e.article.recommendStatus?"否":"是")+" ")]),a("el-switch",{model:{value:e.article.recommendStatus,callback:function(t){e.$set(e.article,"recommendStatus",t)},expression:"article.recommendStatus"}})],1),a("el-form-item",{attrs:{label:"访问类型",prop:"viewType"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"访问类型"},model:{value:e.article.viewType,callback:function(t){e.$set(e.article,"viewType",t)},expression:"article.viewType"}},[a("el-option",{key:"1",attrs:{label:"公开",value:"public"}}),a("el-option",{key:"2",attrs:{label:"登录",value:"login"}}),a("el-option",{key:"3",attrs:{label:"用户等级",value:"userLv"}}),a("el-option",{key:"4",attrs:{label:"密码",value:"password"}})],1)],1),e.$common.isEmpty(e.article.viewType)||"public"===e.article.viewType||"login"===e.article.viewType?e._e():a("el-form-item",{attrs:{label:"访问条件",prop:"viewValue"}},["userLv"===e.article.viewType?[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"用户等级"},model:{value:e.article.viewValue,callback:function(t){e.$set(e.article,"viewValue",t)},expression:"article.viewValue"}},[a("el-option",{key:"1",attrs:{label:"VIP1",value:"1"}}),a("el-option",{key:"2",attrs:{label:"VIP2",value:"2"}}),a("el-option",{key:"3",attrs:{label:"VIP3",value:"3"}}),a("el-option",{key:"4",attrs:{label:"VIP4",value:"4"}}),a("el-option",{key:"5",attrs:{label:"VIP5",value:"5"}}),a("el-option",{key:"6",attrs:{label:"VIP6",value:"6"}})],1)]:"password"===e.article.viewType?[a("el-input",{attrs:{maxlength:"30"},model:{value:e.article.viewValue,callback:function(t){e.$set(e.article,"viewValue",t)},expression:"article.viewValue"}})]:e._e()],2),e.$common.isEmpty(e.article.viewType)||"public"===e.article.viewType||"login"===e.article.viewType?e._e():a("el-form-item",{attrs:{label:"提示",prop:"tips"}},[a("el-input",{attrs:{maxlength:"100"},model:{value:e.article.tips,callback:function(t){e.$set(e.article,"tips",t)},expression:"article.tips"}})],1),a("el-form-item",{attrs:{label:"封面",prop:"articleCover"}},[a("div",{staticStyle:{display:"flex"}},[a("el-input",{model:{value:e.article.articleCover,callback:function(t){e.$set(e.article,"articleCover",t)},expression:"article.articleCover"}}),a("el-image",{staticClass:"table-td-thumb",staticStyle:{"margin-left":"10px"},attrs:{lazy:"","preview-src-list":[e.article.articleCover],src:e.article.articleCover,fit:"cover"}})],1),a("uploadPicture",{staticStyle:{"margin-top":"10px"},attrs:{isAdmin:!0,prefix:"articleCover",maxSize:2,maxNumber:1},on:{addPicture:e.addArticleCover}})],1),a("el-form-item",{attrs:{label:"分类",prop:"sortId"}},[a("el-select",{attrs:{placeholder:"请选择分类"},model:{value:e.article.sortId,callback:function(t){e.$set(e.article,"sortId",t)},expression:"article.sortId"}},e._l(e.sorts,function(e){return a("el-option",{key:e.id,attrs:{label:e.sortName,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"标签",prop:"labelId"}},[a("el-select",{attrs:{placeholder:"请选择标签"},model:{value:e.article.labelId,callback:function(t){e.$set(e.article,"labelId",t)},expression:"article.labelId"}},e._l(e.labelsTemp,function(e){return a("el-option",{key:e.id,attrs:{label:e.labelName,value:e.id}})}),1)],1)],1),a("div",{staticClass:"myCenter",staticStyle:{"margin-bottom":"22px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("保存")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置所有修改")])],1),a("template-selector",{on:{select:e.handleTemplateSelect},model:{value:e.showTemplateSelector,callback:function(t){e.showTemplateSelector=t},expression:"showTemplateSelector"}})],1),a("div",{staticClass:"editor-sidebar-wrapper"},[a("editor-sidebar",{attrs:{content:e.article.articleContent,title:e.article.articleTitle}})],1)])},[],!1,null,"321b9b90",null);t.default=l.exports},9911:function(e,t,a){"use strict";var r=a("23e7"),i=a("857a");r({target:"String",proto:!0,forced:a("af03")("link")},{link:function(e){return i(this,"a","href",e)}})},af03:function(e,t,a){var r=a("d039");e.exports=function(e){return r(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})}},c5d0:function(e,t,a){"use strict";var r=a("23e7"),i=a("857a");r({target:"String",proto:!0,forced:a("af03")("italics")},{italics:function(){return i(this,"i","","")}})},cc71:function(e,t,a){"use strict";var r=a("23e7"),i=a("857a");r({target:"String",proto:!0,forced:a("af03")("bold")},{bold:function(){return i(this,"b","","")}})},d2da:function(e,t,a){"use strict";a("5fa0")}}]);