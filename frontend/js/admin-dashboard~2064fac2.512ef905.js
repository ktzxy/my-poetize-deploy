(window.webpackJsonp=window.webpackJsonp||[]).push([["admin-dashboard~2064fac2"],{"70cf":function(t,a,e){},"92c4":function(t,a,e){"use strict";e("70cf")},ca24:function(t,a,e){"use strict";e.r(a);var s=(e("d3b7"),e("159b"),e("07ac"),e("d81d"),e("25f0"),{name:"Dashboard",data:function(){return{visitTrendType:"week",topStats:[{label:"æ€»è®¿é—®é‡",value:"0",trend:0,icon:"el-icon-view",color:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},{label:"æ–‡ç« æ•°é‡",value:"0",trend:0,icon:"el-icon-document",color:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},{label:"ç”¨æˆ·æ•°é‡",value:"0",trend:0,icon:"el-icon-user",color:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"},{label:"è¯„è®ºæ•°é‡",value:"0",trend:0,icon:"el-icon-chat-dot-round",color:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)"}],realtimeData:{onlineUsers:0,onlineHistory:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],todayVisits:0,visitProgress:0,todayArticles:0,recentArticles:[]},systemStatus:[{label:"CPUä½¿ç”¨ç‡",percentage:45,detail:"4æ ¸ @ 2.4GHz"},{label:"å†…å­˜ä½¿ç”¨ç‡",percentage:62,detail:"8GB / 16GB"},{label:"ç£ç›˜ä½¿ç”¨ç‡",percentage:38,detail:"256GB / 512GB"},{label:"ç½‘ç»œè´Ÿè½½",percentage:25,detail:"ä¸Šè¡Œ 2.3MB/s"}],charts:{}}},computed:{progressColor:function(){var t=this.realtimeData.visitProgress;return t<50?"#67c23a":t<80?"#e6a23c":"#f56c6c"}},mounted:function(){this.loadData(),this.initCharts(),this.startRealtimeUpdate()},beforeDestroy:function(){this.realtimeTimer&&clearInterval(this.realtimeTimer),Object.values(this.charts).forEach(function(t){t&&t.dispose&&t.dispose()})},methods:{forceRefreshStats:function(){var t=this;this.$http.post(this.$constant.baseURL+"/admin/statistics/refresh-cache",{},!0).then(function(a){200===a.code&&(t.$message.success("ç»Ÿè®¡ç¼“å­˜å·²åˆ·æ–°"),setTimeout(function(){t.loadOverviewStats(),t.loadRealtimeData()},1e3))}).catch(function(a){t.$message.error("åˆ·æ–°ç¼“å­˜å¤±è´¥")})},initCharts:function(){void 0!==window.echarts&&(this.initVisitChart(),this.initCategoryChart(),this.initUserActiveChart(),this.initHotArticleChart())},initVisitChart:function(){var t=window.echarts.init(this.$refs.visitChart);t.setOption({tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["è®¿é—®é‡","ç‹¬ç«‹è®¿å®¢"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:["å‘¨ä¸€","å‘¨äºŒ","å‘¨ä¸‰","å‘¨å››","å‘¨äº”","å‘¨å…­","å‘¨æ—¥"]},yAxis:{type:"value"},series:[{name:"è®¿é—®é‡",type:"line",smooth:!0,data:[1200,1320,1010,1340,900,1230,1100],areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(102, 126, 234, 0.5)"},{offset:1,color:"rgba(102, 126, 234, 0.1)"}]}}},{name:"ç‹¬ç«‹è®¿å®¢",type:"line",smooth:!0,data:[820,932,901,934,790,830,920]}]}),this.charts.visitChart=t},initCategoryChart:function(){var t=window.echarts.init(this.$refs.categoryChart);t.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},series:[{name:"æ–‡ç« åˆ†ç±»",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,label:{show:!0,formatter:"{b}\n{d}%"},labelLine:{show:!0},data:[{value:135,name:"å‰ç«¯å¼€å‘",itemStyle:{color:"#667eea"}},{value:89,name:"åç«¯å¼€å‘",itemStyle:{color:"#764ba2"}},{value:65,name:"æ•°æ®åº“",itemStyle:{color:"#f093fb"}},{value:43,name:"è¿ç»´éƒ¨ç½²",itemStyle:{color:"#4facfe"}},{value:26,name:"å…¶ä»–",itemStyle:{color:"#43e97b"}}]}]}),this.charts.categoryChart=t},initUserActiveChart:function(){var t=window.echarts.init(this.$refs.userActiveChart);t.setOption({tooltip:{trigger:"axis"},xAxis:{type:"category",data:["00:00","04:00","08:00","12:00","16:00","20:00","24:00"]},yAxis:{type:"value"},series:[{name:"æ´»è·ƒç”¨æˆ·æ•°",type:"bar",data:[15,8,25,68,125,156,89],itemStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#667eea"},{offset:1,color:"#764ba2"}]}}}]}),this.charts.userActiveChart=t},initHotArticleChart:function(){var t=this;this.$http.get(this.$constant.baseURL+"/admin/statistics/hot-articles?limit=10",{},!0).then(function(a){if(200===a.code&&a.data&&a.data.length>0){var e=a.data.map(function(t){return t.title||"æœªå‘½å"}).reverse(),s=a.data.map(function(t){return t.views||0}).reverse();t.renderHotArticleChart(e,s)}else{t.renderHotArticleChart(["æš‚æ— æ–‡ç« æ•°æ®"],[0])}}).catch(function(a){t.renderHotArticleChart(["åŠ è½½å¤±è´¥"],[0])})},renderHotArticleChart:function(t,a){var e=window.echarts.init(this.$refs.hotArticleChart),s={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:t},series:[{name:"é˜…è¯»é‡",type:"bar",data:a,itemStyle:{color:"#f5576c"}}]};e.setOption(s),this.charts.hotArticleChart=e},startRealtimeUpdate:function(){var t=this;this.realtimeTimer=setInterval(function(){t.loadRealtimeData()},3e4)},loadData:function(){this.loadOverviewStats(),this.loadRealtimeData()},loadOverviewStats:function(){var t=this;this.$http.get(this.$constant.baseURL+"/admin/statistics/overview",{},!0).then(function(a){200===a.code&&a.data&&(t.topStats[0].value=a.data.totalViews.toLocaleString(),t.topStats[0].trend=a.data.totalViewsTrend||0,t.topStats[1].value=a.data.articleCount.toString(),t.topStats[1].trend=a.data.articleCountTrend||0,t.topStats[2].value=a.data.userCount.toLocaleString(),t.topStats[2].trend=a.data.userCountTrend||0,t.topStats[3].value=a.data.commentCount.toLocaleString(),t.topStats[3].trend=a.data.commentCountTrend||0)}).catch(function(t){})},loadRealtimeData:function(){var t=this;this.$http.get(this.$constant.baseURL+"/admin/statistics/realtime",{},!0).then(function(a){200===a.code&&a.data&&(t.realtimeData.todayVisits=a.data.todayVisits||0,t.realtimeData.todayArticles=a.data.todayArticles||0,t.realtimeData.onlineUsers=a.data.onlineUsers||0,t.realtimeData.visitProgress=Math.min(100,t.realtimeData.todayVisits/5e3*100))}).catch(function(t){})},getStatusColor:function(t){return t<50?"#67c23a":t<80?"#e6a23c":"#f56c6c"}}}),i=s,r=(e("92c4"),e("2877")),l=Object(r.a)(i,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dashboard-container"},[e("div",{staticClass:"stats-cards"},t._l(t.topStats,function(a,s){return e("div",{key:s,staticClass:"stat-card"},[e("div",{staticClass:"stat-icon",style:{background:a.color}},[e("i",{class:a.icon})]),e("div",{staticClass:"stat-content"},[e("div",{staticClass:"stat-label"},[t._v(t._s(a.label))]),e("div",{staticClass:"stat-value"},[t._v(t._s(a.value))]),e("div",{staticClass:"stat-trend",class:a.trend>0?"up":"down"},[e("i",{class:a.trend>0?"el-icon-top":"el-icon-bottom"}),e("span",[t._v(t._s(Math.abs(a.trend))+"%")]),e("span",{staticClass:"trend-label"},[t._v("è¾ƒæ˜¨æ—¥")])])])])}),0),e("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[e("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:t.forceRefreshStats}},[t._v(" åˆ·æ–°ç»Ÿè®¡ç¼“å­˜ ")])],1),e("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[e("el-col",{attrs:{span:16}},[e("div",{staticClass:"chart-card"},[e("div",{staticClass:"chart-header"},[e("span",{staticClass:"chart-title"},[t._v("ğŸ“ˆ è®¿é—®é‡è¶‹åŠ¿")]),e("el-radio-group",{attrs:{size:"mini"},model:{value:t.visitTrendType,callback:function(a){t.visitTrendType=a},expression:"visitTrendType"}},[e("el-radio-button",{attrs:{label:"week"}},[t._v("è¿‘7å¤©")]),e("el-radio-button",{attrs:{label:"month"}},[t._v("è¿‘30å¤©")])],1)],1),e("div",{ref:"visitChart",staticClass:"chart-body"})])]),e("el-col",{attrs:{span:8}},[e("div",{staticClass:"chart-card"},[e("div",{staticClass:"chart-header"},[e("span",{staticClass:"chart-title"},[t._v("ğŸ“Š æ–‡ç« åˆ†ç±»å æ¯”")])]),e("div",{ref:"categoryChart",staticClass:"chart-body"})])])],1),e("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("div",{staticClass:"chart-card"},[e("div",{staticClass:"chart-header"},[e("span",{staticClass:"chart-title"},[t._v("ğŸ‘¥ ç”¨æˆ·æ´»è·ƒåº¦")])]),e("div",{ref:"userActiveChart",staticClass:"chart-body"})])]),e("el-col",{attrs:{span:12}},[e("div",{staticClass:"chart-card"},[e("div",{staticClass:"chart-header"},[e("span",{staticClass:"chart-title"},[t._v("ğŸ”¥ çƒ­é—¨æ–‡ç« TOP10")])]),e("div",{ref:"hotArticleChart",staticClass:"chart-body"})])])],1),e("div",{staticClass:"realtime-section"},[t._m(0),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:8}},[e("div",{staticClass:"realtime-card"},[e("div",{staticClass:"realtime-label"},[t._v("åœ¨çº¿ç”¨æˆ·")]),e("div",{staticClass:"realtime-value"},[t._v(t._s(t.realtimeData.onlineUsers))]),e("div",{staticClass:"realtime-chart"},t._l(t.realtimeData.onlineHistory,function(a,s){return e("div",{key:s,staticClass:"realtime-bar",style:{height:a/Math.max.apply(Math,t.realtimeData.onlineHistory)*100+"%"}})}),0)])]),e("el-col",{attrs:{span:8}},[e("div",{staticClass:"realtime-card"},[e("div",{staticClass:"realtime-label"},[t._v("ä»Šæ—¥è®¿é—®")]),e("div",{staticClass:"realtime-value"},[t._v(t._s(t.realtimeData.todayVisits))]),e("div",{staticClass:"realtime-progress"},[e("el-progress",{attrs:{percentage:t.realtimeData.visitProgress,"stroke-width":12,color:t.progressColor}})],1)])]),e("el-col",{attrs:{span:8}},[e("div",{staticClass:"realtime-card"},[e("div",{staticClass:"realtime-label"},[t._v("ä»Šæ—¥æ–°å¢æ–‡ç« ")]),e("div",{staticClass:"realtime-value"},[t._v(t._s(t.realtimeData.todayArticles))]),e("div",{staticClass:"realtime-list"},t._l(t.realtimeData.recentArticles,function(a,s){return e("div",{key:s,staticClass:"article-item"},[e("i",{staticClass:"el-icon-document"}),e("span",{staticClass:"article-title"},[t._v(t._s(a.title))]),e("span",{staticClass:"article-time"},[t._v(t._s(a.time))])])}),0)])])],1)],1),e("div",{staticClass:"system-status"},[t._m(1),e("el-row",{attrs:{gutter:20}},t._l(t.systemStatus,function(a,s){return e("el-col",{key:s,attrs:{span:6}},[e("div",{staticClass:"status-item"},[e("div",{staticClass:"status-label"},[t._v(t._s(a.label))]),e("el-progress",{attrs:{type:"circle",percentage:a.percentage,color:t.getStatusColor(a.percentage),width:100}}),e("div",{staticClass:"status-detail"},[t._v(t._s(a.detail))])],1)])}),1)],1)],1)},[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"section-title"},[e("i",{staticClass:"el-icon-monitor"}),e("span",[t._v("å®æ—¶ç›‘æ§")]),e("span",{staticClass:"realtime-badge"},[t._v("LIVE")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"section-title"},[e("i",{staticClass:"el-icon-setting"}),e("span",[t._v("ç³»ç»ŸçŠ¶æ€")])])}],!1,null,"e3844020",null);a.default=l.exports}}]);