(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-9fa9df8e"],{"54bc":function(t,a,s){},b0d3:function(t,a,s){"use strict";s("54bc")},c776:function(t,a,s){"use strict";s.r(a);var e=(s("ac1f"),s("5319"),s("4de4"),s("d3b7"),s("1276"),s("498a"),s("466d"),s("a434"),s("99af"),s("b64b"),s("159b"),s("2ca0"),s("4e82"),{name:"EditorSidebar",props:{content:{type:String,default:""},title:{type:String,default:""}},data:function(){return{autoSaveEnabled:!0,autoOptimizeImages:!1,saveStatus:"自动保存中...",lastSaveTime:"--",localDraftCount:3,totalImageSize:2.5,savedSize:.8,draftDialogVisible:!1,stats:{wordCount:0,paragraphCount:0,readingTime:0,imageCount:0,codeBlockCount:0},seoChecks:{title:!0,keywords:!1,headings:!0,images:!1},draftList:[],autoSaveTimer:null}},watch:{content:{handler:function(t){this.updateStats(t),this.autoSaveEnabled&&this.debouncedAutoSave()},immediate:!0}},mounted:function(){this.loadAutoSaveSettings(),this.loadDraftList()},beforeDestroy:function(){this.autoSaveTimer&&clearTimeout(this.autoSaveTimer)},methods:{updateStats:function(t){this.stats.wordCount=t.replace(/\s/g,"").length,this.stats.paragraphCount=t.split("\n\n").filter(function(t){return t.trim()}).length,this.stats.readingTime=Math.ceil(this.stats.wordCount/300);var a=t.match(/!\[.*?\]\(.*?\)/g);this.stats.imageCount=a?a.length:0;var s=t.match(/```[\s\S]*?```/g);this.stats.codeBlockCount=s?s.length:0},toggleAutoSave:function(t){t?(this.saveStatus="自动保存已开启",this.$message.success("草稿自动保存已开启")):(this.saveStatus="自动保存已关闭",this.$message.info("草稿自动保存已关闭")),localStorage.setItem("autoSaveEnabled",t)},debouncedAutoSave:function(){var t=this;this.autoSaveTimer&&clearTimeout(this.autoSaveTimer),this.autoSaveTimer=setTimeout(function(){t.saveDraft()},3e3)},saveDraft:function(){var t=this;this.saveStatus="保存中...",setTimeout(function(){var a=new Date;t.lastSaveTime=a.toLocaleTimeString("zh-CN"),t.saveStatus="已保存",t.$emit("draft-saved",{title:t.title,content:t.content,saveTime:a})},500)},showDraftList:function(){this.draftDialogVisible=!0},loadDraft:function(t){this.$emit("load-draft",t),this.draftDialogVisible=!1,this.$message.success("已加载草稿: ".concat(t.title))},deleteDraft:function(t){var a=this;this.$confirm("确认删除草稿“".concat(t.title,"”？"),"提示",{type:"warning"}).then(function(){var s="draft_"+t.id;localStorage.removeItem(s);var e=a.draftList.indexOf(t);e>-1&&(a.draftList.splice(e,1),a.localDraftCount--),a.$message.success("草稿已删除")}).catch(function(){})},toggleImageOptimization:function(t){this.$message.success(t?"图片自动优化已开启":"图片自动优化已关闭"),localStorage.setItem("autoOptimizeImages",t)},optimizeAllImages:function(){var t=this;this.$message.info("正在优化图片..."),setTimeout(function(){t.$message.success("已优化 ".concat(t.stats.imageCount," 张图片，节省 ").concat(t.savedSize," MB"))},2e3)},runSeoCheck:function(){this.$message.info("正在进行SEO检查...")},loadAutoSaveSettings:function(){var t=localStorage.getItem("autoSaveEnabled");null!==t&&(this.autoSaveEnabled="true"===t);var a=localStorage.getItem("autoOptimizeImages");null!==a&&(this.autoOptimizeImages="true"===a)},loadDraftList:function(){var t=[];Object.keys(localStorage).forEach(function(a){if(a.startsWith("draft_"))try{var s=JSON.parse(localStorage.getItem(a));s&&s.articleTitle&&t.push({id:a.replace("draft_",""),title:s.articleTitle||"未命名草稿",saveTime:s.savedAt?new Date(s.savedAt).toLocaleString("zh-CN"):"--"})}catch(t){}}),this.draftList=t.sort(function(t,a){var s=new Date(t.saveTime).getTime();return new Date(a.saveTime).getTime()-s}),this.localDraftCount=t.length}}}),i=e,l=(s("b0d3"),s("2877")),o=Object(l.a)(i,function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"editor-sidebar"},[s("el-card",{staticClass:"sidebar-card",attrs:{shadow:"hover"}},[s("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[s("i",{staticClass:"el-icon-document"}),s("span",[t._v("草稿")]),s("el-switch",{attrs:{size:"mini"},on:{change:t.toggleAutoSave},model:{value:t.autoSaveEnabled,callback:function(a){t.autoSaveEnabled=a},expression:"autoSaveEnabled"}})],1),s("div",{staticClass:"save-status"},[t.autoSaveEnabled?s("span",{staticClass:"status-text"},[s("i",{staticClass:"el-icon-success",staticStyle:{color:"#67c23a"}}),t._v(" "+t._s(t.saveStatus)+" ")]):s("span",{staticClass:"status-text disabled"},[t._v("已禁用")])]),s("div",{staticClass:"draft-info"},[s("div",{staticClass:"info-item"},[s("span",{staticClass:"label"},[t._v("本地草稿:")]),s("span",{staticClass:"value"},[t._v(t._s(t.localDraftCount))])]),s("div",{staticClass:"info-item"},[s("span",{staticClass:"label"},[t._v("最后保存:")]),s("span",{staticClass:"value"},[t._v(t._s(t.lastSaveTime))])])]),s("el-button",{attrs:{size:"small",type:"text"},on:{click:t.showDraftList}},[t._v("查看草稿列表")])],1),s("el-card",{staticClass:"sidebar-card",attrs:{shadow:"hover"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("i",{staticClass:"el-icon-data-line"}),s("span",[t._v("统计信息")])]),s("div",{staticClass:"stats-list"},[s("div",{staticClass:"stat-item"},[s("span",{staticClass:"stat-label"},[t._v("字数:")]),s("span",{staticClass:"stat-value"},[t._v(t._s(t.stats.wordCount))])]),s("div",{staticClass:"stat-item"},[s("span",{staticClass:"stat-label"},[t._v("段落:")]),s("span",{staticClass:"stat-value"},[t._v(t._s(t.stats.paragraphCount))])]),s("div",{staticClass:"stat-item"},[s("span",{staticClass:"stat-label"},[t._v("预计阅读:")]),s("span",{staticClass:"stat-value"},[t._v(t._s(t.stats.readingTime)+" 分钟")])]),s("div",{staticClass:"stat-item"},[s("span",{staticClass:"stat-label"},[t._v("图片:")]),s("span",{staticClass:"stat-value"},[t._v(t._s(t.stats.imageCount))])]),s("div",{staticClass:"stat-item"},[s("span",{staticClass:"stat-label"},[t._v("代码块:")]),s("span",{staticClass:"stat-value"},[t._v(t._s(t.stats.codeBlockCount))])])])]),s("el-card",{staticClass:"sidebar-card",attrs:{shadow:"hover"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("i",{staticClass:"el-icon-picture"}),s("span",[t._v("图片优化")])]),s("div",{staticClass:"image-optimization"},[s("el-switch",{on:{change:t.toggleImageOptimization},model:{value:t.autoOptimizeImages,callback:function(a){t.autoOptimizeImages=a},expression:"autoOptimizeImages"}},[s("span",{attrs:{slot:"label"},slot:"label"},[t._v("自动优化")])]),t.stats.imageCount>0?s("div",{staticClass:"optimization-info"},[s("div",{staticClass:"info-item"},[s("span",[t._v("图片总大小:")]),s("span",[t._v(t._s(t.totalImageSize)+" MB")])]),t.autoOptimizeImages?s("div",{staticClass:"info-item"},[s("span",[t._v("可节省:")]),s("span",{staticStyle:{color:"#67c23a"}},[t._v(t._s(t.savedSize)+" MB")])]):t._e()]):t._e(),s("el-button",{attrs:{size:"small",type:"primary",disabled:0===t.stats.imageCount},on:{click:t.optimizeAllImages}},[t._v(" 批量优化 ")])],1)]),s("el-card",{staticClass:"sidebar-card",attrs:{shadow:"hover"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("i",{staticClass:"el-icon-search"}),s("span",[t._v("SEO检查")])]),s("div",{staticClass:"seo-checks"},[s("div",{staticClass:"check-item",class:t.seoChecks.title?"pass":"fail"},[s("i",{class:t.seoChecks.title?"el-icon-success":"el-icon-warning"}),s("span",[t._v("标题长度适中")])]),s("div",{staticClass:"check-item",class:t.seoChecks.keywords?"pass":"fail"},[s("i",{class:t.seoChecks.keywords?"el-icon-success":"el-icon-warning"}),s("span",[t._v("包含关键词")])]),s("div",{staticClass:"check-item",class:t.seoChecks.headings?"pass":"fail"},[s("i",{class:t.seoChecks.headings?"el-icon-success":"el-icon-warning"}),s("span",[t._v("标题层级正确")])]),s("div",{staticClass:"check-item",class:t.seoChecks.images?"pass":"fail"},[s("i",{class:t.seoChecks.images?"el-icon-success":"el-icon-warning"}),s("span",[t._v("图片alt属性")])])]),s("el-button",{attrs:{size:"small",type:"text"},on:{click:t.runSeoCheck}},[t._v("完整检查")])],1),s("el-dialog",{attrs:{title:"草稿列表",visible:t.draftDialogVisible,width:"60%"},on:{"update:visible":function(a){t.draftDialogVisible=a}}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.draftList}},[s("el-table-column",{attrs:{prop:"title",label:"标题","min-width":"200"}}),s("el-table-column",{attrs:{prop:"saveTime",label:"保存时间",width:"180"}}),s("el-table-column",{attrs:{label:"操作",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){return t.loadDraft(a.row)}}},[t._v("加载")]),s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){return t.deleteDraft(a.row)}}},[t._v("删除")])]}}])})],1)],1)],1)},[],!1,null,"506de7b6",null);a.default=o.exports}}]);